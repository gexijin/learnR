<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Advanced topics | Learn R through examples</title>
  <meta name="description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Advanced topics | Learn R through examples" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  <meta name="github-repo" content="gexijin/learnR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Advanced topics | Learn R through examples" />
  
  <meta name="twitter:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  

<meta name="author" content="Xijin Ge, Jianli Qi, and Rong Fan" />


<meta name="date" content="2024-01-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-heart-attack-dataset-ii.html"/>
<link rel="next" href="state-dataset.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html"><i class="fa fa-check"></i><b>1</b> Step into R programming:The iris flower dataset</a>
<ul>
<li class="chapter" data-level="1.1" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting started</a></li>
<li class="chapter" data-level="1.2" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#the-proper-way-of-using-rstudio"><i class="fa fa-check"></i><b>1.2</b> The proper way of using RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#data-frames-contain-rows-and-columns-the-iris-flower-dataset"><i class="fa fa-check"></i><b>1.3</b> Data frames contain rows and columns: the iris flower dataset</a></li>
<li class="chapter" data-level="1.4" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#analyzing-one-set-of-numbers"><i class="fa fa-check"></i><b>1.4</b> Analyzing one set of numbers</a></li>
<li class="chapter" data-level="1.5" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#analyzing-a-categorical-variable"><i class="fa fa-check"></i><b>1.5</b> Analyzing a categorical variable</a></li>
<li class="chapter" data-level="1.6" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#the-relationship-between-two-numerical-variables"><i class="fa fa-check"></i><b>1.6</b> The relationship between two numerical variables</a></li>
<li class="chapter" data-level="1.7" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#testing-the-differences-between-two-groups"><i class="fa fa-check"></i><b>1.7</b> Testing the differences between two groups</a></li>
<li class="chapter" data-level="1.8" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#testing-differences-among-multiple-groups-anova"><i class="fa fa-check"></i><b>1.8</b> Testing differences among multiple groups (ANOVA)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html"><i class="fa fa-check"></i><b>2</b> Visualizing the iris flower data set</a>
<ul>
<li class="chapter" data-level="2.1" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#basic-concepts-of-r-graphics"><i class="fa fa-check"></i><b>2.1</b> Basic concepts of R graphics</a></li>
<li class="chapter" data-level="2.2" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#scatter-plot-matrix"><i class="fa fa-check"></i><b>2.2</b> Scatter plot matrix</a></li>
<li class="chapter" data-level="2.3" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#star-and-segment-diagrams"><i class="fa fa-check"></i><b>2.3</b> Star and segment diagrams</a></li>
<li class="chapter" data-level="2.4" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#the-ggplot2-package-is-intuitive-and-powerful"><i class="fa fa-check"></i><b>2.4</b> The ggplot2 package is intuitive and powerful</a></li>
<li class="chapter" data-level="2.5" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#other-types-of-plots-with-ggplot2"><i class="fa fa-check"></i><b>2.5</b> Other types of plots with ggplot2</a></li>
<li class="chapter" data-level="2.6" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#hierarchical-clustering-and-heat-map"><i class="fa fa-check"></i><b>2.6</b> Hierarchical clustering and heat map</a></li>
<li class="chapter" data-level="2.7" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#principal-component-analysis-pca"><i class="fa fa-check"></i><b>2.7</b> Principal component analysis (PCA)</a></li>
<li class="chapter" data-level="2.8" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#logistic-regression-for-binary-outcomes-prediction"><i class="fa fa-check"></i><b>2.8</b> Logistic Regression for Binary Outcomes Prediction</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-structures.html"><a href="data-structures.html#basic-concepts"><i class="fa fa-check"></i><b>3.1</b> Basic concepts</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-structures.html"><a href="data-structures.html#expressions"><i class="fa fa-check"></i><b>3.1.1</b> Expressions</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-structures.html"><a href="data-structures.html#logical-values"><i class="fa fa-check"></i><b>3.1.2</b> Logical Values</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-structures.html"><a href="data-structures.html#variables"><i class="fa fa-check"></i><b>3.1.3</b> Variables</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-structures.html"><a href="data-structures.html#functions"><i class="fa fa-check"></i><b>3.1.4</b> Functions</a></li>
<li class="chapter" data-level="3.1.5" data-path="data-structures.html"><a href="data-structures.html#seeking-help-and-example-code"><i class="fa fa-check"></i><b>3.1.5</b> Seeking help and example Code</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-structures.html"><a href="data-structures.html#data-structures-1"><i class="fa fa-check"></i><b>3.2</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>3.2.1</b> Vectors</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>3.2.2</b> Matrices</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>3.2.3</b> Data Frames</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-structures.html"><a href="data-structures.html#strings-and-string-vectors"><i class="fa fa-check"></i><b>3.2.4</b> Strings and string vectors</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.2.5</b> Lists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html"><i class="fa fa-check"></i><b>4</b> Importing data and managing files</a>
<ul>
<li class="chapter" data-level="4.1" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#project-oriented-workflow"><i class="fa fa-check"></i><b>4.1</b> Project-oriented workflow</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#create-a-project-in-a-new-folder"><i class="fa fa-check"></i><b>4.1.1</b> Create a project in a new folder</a></li>
<li class="chapter" data-level="4.1.2" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#create-a-script-file-and-comment-please"><i class="fa fa-check"></i><b>4.1.2</b> Create a script file (and Comment, Please!)</a></li>
<li class="chapter" data-level="4.1.3" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#copy-data-files-to-the-new-directory"><i class="fa fa-check"></i><b>4.1.3</b> Copy data files to the new directory</a></li>
<li class="chapter" data-level="4.1.4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#import-data-files"><i class="fa fa-check"></i><b>4.1.4</b> Import data files</a></li>
<li class="chapter" data-level="4.1.5" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#check-and-convert-data-types"><i class="fa fa-check"></i><b>4.1.5</b> Check and convert data types</a></li>
<li class="chapter" data-level="4.1.6" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#close-a-project-when-you-are-done"><i class="fa fa-check"></i><b>4.1.6</b> Close a project when you are done</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#read-files-directly-using-read.table"><i class="fa fa-check"></i><b>4.2</b> Read files directly using read.table</a></li>
<li class="chapter" data-level="4.3" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#general-procedure-to-read-data-into-r"><i class="fa fa-check"></i><b>4.3</b> General procedure to read data into R:</a></li>
<li class="chapter" data-level="4.4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#enter-data-manually"><i class="fa fa-check"></i><b>4.4</b> Enter data manually</a></li>
<li class="chapter" data-level="4.5" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#data-manipulation-in-a-data-frame"><i class="fa fa-check"></i><b>4.5</b> Data manipulation in a data frame</a></li>
<li class="chapter" data-level="4.6" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#data-transformation-using-the-dplyr"><i class="fa fa-check"></i><b>4.6</b> Data transformation using the dplyr</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html"><i class="fa fa-check"></i><b>5</b> The heart attack data set (I)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#begin-your-analysis-by-examining-each-column-individually"><i class="fa fa-check"></i><b>5.1</b> Begin your analysis by examining each column individually</a></li>
<li class="chapter" data-level="5.2" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#possible-correlation-between-two-numeric-columns"><i class="fa fa-check"></i><b>5.2</b> Possible correlation between two numeric columns</a></li>
<li class="chapter" data-level="5.3" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-categorical-variables"><i class="fa fa-check"></i><b>5.3</b> Associations between categorical variables</a></li>
<li class="chapter" data-level="5.4" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-a-categorical-and-a-numeric-variables"><i class="fa fa-check"></i><b>5.4</b> Associations between a categorical and a numeric variables</a></li>
<li class="chapter" data-level="5.5" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-multiple-columns"><i class="fa fa-check"></i><b>5.5</b> Associations between multiple columns</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html"><i class="fa fa-check"></i><b>6</b> The heart attack dataset (II)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#scatter-plot-in-ggplot2"><i class="fa fa-check"></i><b>6.1</b> Scatter plot in ggplot2</a></li>
<li class="chapter" data-level="6.2" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>6.2</b> Histograms and density plots</a></li>
<li class="chapter" data-level="6.3" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#box-plots-and-violin-plots"><i class="fa fa-check"></i><b>6.3</b> Box plots and Violin plots</a></li>
<li class="chapter" data-level="6.4" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#bar-plot-with-error-bars"><i class="fa fa-check"></i><b>6.4</b> Bar plot with error bars</a></li>
<li class="chapter" data-level="6.5" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#statistical-models-easy-to-run-tricky-to-interpret"><i class="fa fa-check"></i><b>6.5</b> Statistical models: Easy to Run, tricky to interpret!</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>7</b> Advanced topics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="advanced-topics.html"><a href="advanced-topics.html#introduction-to-r-markdown"><i class="fa fa-check"></i><b>7.1</b> Introduction to R Markdown</a></li>
<li class="chapter" data-level="7.2" data-path="advanced-topics.html"><a href="advanced-topics.html#tidyverse"><i class="fa fa-check"></i><b>7.2</b> Tidyverse</a></li>
<li class="chapter" data-level="7.3" data-path="advanced-topics.html"><a href="advanced-topics.html#interactive-plots-made-easy-with-plotly"><i class="fa fa-check"></i><b>7.3</b> Interactive plots made easy with Plotly</a></li>
<li class="chapter" data-level="7.4" data-path="advanced-topics.html"><a href="advanced-topics.html#shiny-apps"><i class="fa fa-check"></i><b>7.4</b> Shiny Apps</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="advanced-topics.html"><a href="advanced-topics.html#install-the-shiny-package"><i class="fa fa-check"></i><b>7.4.1</b> Install the Shiny package</a></li>
<li class="chapter" data-level="7.4.2" data-path="advanced-topics.html"><a href="advanced-topics.html#create-a-shiny-web-app-is-a-piece-of-cake"><i class="fa fa-check"></i><b>7.4.2</b> Create a Shiny web app is a piece of cake</a></li>
<li class="chapter" data-level="7.4.3" data-path="advanced-topics.html"><a href="advanced-topics.html#lets-play"><i class="fa fa-check"></i><b>7.4.3</b> Let’s play!</a></li>
<li class="chapter" data-level="7.4.4" data-path="advanced-topics.html"><a href="advanced-topics.html#publish-your-app"><i class="fa fa-check"></i><b>7.4.4</b> Publish your app</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="advanced-topics.html"><a href="advanced-topics.html#define-your-own-function"><i class="fa fa-check"></i><b>7.5</b> Define your own function</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="state-dataset.html"><a href="state-dataset.html"><i class="fa fa-check"></i><b>8</b> State dataset</a>
<ul>
<li class="chapter" data-level="8.1" data-path="state-dataset.html"><a href="state-dataset.html#data-import-and-manipulation"><i class="fa fa-check"></i><b>8.1</b> Data Import and Manipulation</a></li>
<li class="chapter" data-level="8.2" data-path="state-dataset.html"><a href="state-dataset.html#visualizing-data"><i class="fa fa-check"></i><b>8.2</b> Visualizing data</a></li>
<li class="chapter" data-level="8.3" data-path="state-dataset.html"><a href="state-dataset.html#analyzing-the-relationship-among-variables"><i class="fa fa-check"></i><b>8.3</b> Analyzing the relationship among variables</a></li>
<li class="chapter" data-level="8.4" data-path="state-dataset.html"><a href="state-dataset.html#the-whole-picture-of-the-data-set"><i class="fa fa-check"></i><b>8.4</b> The whole picture of the data set</a></li>
<li class="chapter" data-level="8.5" data-path="state-dataset.html"><a href="state-dataset.html#linear-model-analysis"><i class="fa fa-check"></i><b>8.5</b> Linear model analysis</a></li>
<li class="chapter" data-level="8.6" data-path="state-dataset.html"><a href="state-dataset.html#conclusion"><i class="fa fa-check"></i><b>8.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html"><i class="fa fa-check"></i><b>9</b> The game sales dataset</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#reading-in-data-and-managing-the-dataset"><i class="fa fa-check"></i><b>9.1</b> Reading in data and managing the dataset</a></li>
<li class="chapter" data-level="9.2" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#visualization-of-categorical-variables"><i class="fa fa-check"></i><b>9.2</b> Visualization of categorical variables</a></li>
<li class="chapter" data-level="9.3" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#correlation-among-numeric-variables"><i class="fa fa-check"></i><b>9.3</b> Correlation among numeric variables</a></li>
<li class="chapter" data-level="9.4" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#analysis-of-score-and-count"><i class="fa fa-check"></i><b>9.4</b> Analysis of score and count</a></li>
<li class="chapter" data-level="9.5" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#analysis-of-sales"><i class="fa fa-check"></i><b>9.5</b> Analysis of sales</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-year.release"><i class="fa fa-check"></i><b>9.5.1</b> By Year.Release</a></li>
<li class="chapter" data-level="9.5.2" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-region"><i class="fa fa-check"></i><b>9.5.2</b> By Region</a></li>
<li class="chapter" data-level="9.5.3" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-rating"><i class="fa fa-check"></i><b>9.5.3</b> By Rating</a></li>
<li class="chapter" data-level="9.5.4" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-genre"><i class="fa fa-check"></i><b>9.5.4</b> By Genre</a></li>
<li class="chapter" data-level="9.5.5" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-score"><i class="fa fa-check"></i><b>9.5.5</b> by Score</a></li>
<li class="chapter" data-level="9.5.6" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-rating-genre-critic-score"><i class="fa fa-check"></i><b>9.5.6</b> By Rating &amp; Genre &amp; Critic score</a></li>
<li class="chapter" data-level="9.5.7" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-platform"><i class="fa fa-check"></i><b>9.5.7</b> By Platform</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#effect-of-platform-type-on-principle-components"><i class="fa fa-check"></i><b>9.6</b> Effect of platform type on principle components</a></li>
<li class="chapter" data-level="9.7" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#models-for-global-sales"><i class="fa fa-check"></i><b>9.7</b> Models for global sales</a></li>
<li class="chapter" data-level="9.8" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#conclusion-1"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html"><i class="fa fa-check"></i><b>10</b> The messy salary data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#data-preparation-and-cleaning"><i class="fa fa-check"></i><b>10.1</b> Data Preparation and Cleaning</a></li>
<li class="chapter" data-level="10.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#variable-analysis"><i class="fa fa-check"></i><b>10.2</b> Variable Analysis</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#income-and-age"><i class="fa fa-check"></i><b>10.2.1</b> Income and age</a></li>
<li class="chapter" data-level="10.2.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-group"><i class="fa fa-check"></i><b>10.2.2</b> Ethnic group</a></li>
<li class="chapter" data-level="10.2.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#sex"><i class="fa fa-check"></i><b>10.2.3</b> Sex</a></li>
<li class="chapter" data-level="10.2.4" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#union-descreption"><i class="fa fa-check"></i><b>10.2.4</b> Union descreption</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#analysis-of-gross-income"><i class="fa fa-check"></i><b>10.3</b> Analysis of gross income</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#age"><i class="fa fa-check"></i><b>10.3.1</b> Age</a></li>
<li class="chapter" data-level="10.3.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#sex-1"><i class="fa fa-check"></i><b>10.3.2</b> Sex</a></li>
<li class="chapter" data-level="10.3.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-group-1"><i class="fa fa-check"></i><b>10.3.3</b> Ethnic Group</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#analysis-of-gross-income-types"><i class="fa fa-check"></i><b>10.4</b> Analysis of gross income types</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#defining-gross-income-types"><i class="fa fa-check"></i><b>10.4.1</b> Defining Gross income types</a></li>
<li class="chapter" data-level="10.4.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#the-intersection-of-ethnic-sex-and-age"><i class="fa fa-check"></i><b>10.4.2</b> The Intersection of Ethnic, Sex and age</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#lm-and-anova-analysis"><i class="fa fa-check"></i><b>10.5</b> LM and ANOVA analysis</a></li>
<li class="chapter" data-level="10.6" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#conclusion-2"><i class="fa fa-check"></i><b>10.6</b> Conclusion</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learn R through examples</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="advanced-topics" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Advanced topics<a href="advanced-topics.html#advanced-topics" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-to-r-markdown" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Introduction to R Markdown<a href="advanced-topics.html#introduction-to-r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="851" height="638" src="https://www.youtube.com/embed/AI6U08TrogY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<div class="float">
<img src="https://github.com/gexijin/learnR/raw/master/images/RMarkdown.gif" alt="Animated GIF for R Markdown" />
<div class="figcaption">Animated GIF for R Markdown</div>
</div>
<p>Let’s start learning R Markdown from its cheat sheet. Here’s a fun and simple way to start: Click the RStudio IDE and navigate to <em>Help <span class="math inline">\(\rightarrow\)</span> Cheatsheets <span class="math inline">\(\rightarrow\)</span> R Markdown Cheat Sheet.</em> As the cheat sheet explained, the R Markdown (.Rmd) file can combine your code and the output in one file, and produce documents in various formats, such as html, pdf, MS Word, or RTF.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label0"></span>
<img src="images/Ch7_Adv_top_0.PNG" alt="R Markdown Cheat Sheet" width="80%" />
<p class="caption">
Figure 7.1: R Markdown Cheat Sheet
</p>
</div>
<p>Here is how to create an R Markdown file: Firstly, you need to open a new .Rmd file at File <span class="math inline">\(\rightarrow\)</span> New File <span class="math inline">\(\rightarrow\)</span>. Then, in the open window, feel free to change the <strong>Title</strong>. For example, you can change the <strong>Untitled</strong> to <strong>MyFirstRmd</strong>. Third, choose the default output format from the three options: HTML, PDF or WORD. Then click “OK” .</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label1"></span>
<img src="images/Ch7_Adv_top_1.PNG" alt="Create a new RMarkdown file" width="80%" />
<p class="caption">
Figure 7.2: Create a new RMarkdown file
</p>
</div>
<p>Congratulations, you now have a new file named MyFirstRmd.Rmd.</p>
<p>The first part of the file is YAML (Yet Another Markup Language) header, which is surrounded by dashes “-” . As shown in Figure <a href="advanced-topics.html#fig:label2">7.3</a>, it specifies the key arguments for the document, such as <strong>title</strong>, <strong>author</strong>, <strong>date</strong>, and output format. If it says <strong>output: pdf_document</strong>, congratulations, you have chosen <strong>PDF</strong> as the default format for your create file.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label2"></span>
<img src="images/Ch7_Adv_top_2.PNG" alt="YAML Header" width="80%" />
<p class="caption">
Figure 7.3: YAML Header
</p>
</div>
<p>The second part of an .Rmd file is called chunks of R, surrounded by three back ticks “`”. Figure <a href="advanced-topics.html#fig:label3">7.4</a> is an example of a chunk. The “nm_cars” after r in the { } is the name of the chunk.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label3"></span>
<img src="images/Ch7_Adv_top_3.PNG" alt="Chunk of R" width="45%" />
<p class="caption">
Figure 7.4: Chunk of R
</p>
</div>
<p>A chunk is a collection of r code. You can run each chunk by clicking the right arrow on the top-right or using the Ctrl+Shift+Enter shortcut. R executes the code and displays the outputs along with the code，as illustrated in Figure <a href="advanced-topics.html#fig:label3">7.4</a>.</p>
<pre><code>##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00</code></pre>
<p>Many chunk options are available in the R Markdown Cheat Sheet. let’s explore some common chunk options that you’ll use frequently.</p>
<p>1, <strong>eval = FALSE</strong> behaves like a display case, showing the code but not evaluating it. The final document will only show the code, sans results.</p>
<p><img src="images/Ch7_Adv_top_6.PNG" width="50%" /></p>
<p>2, <strong>include = FALSE</strong> is like a ninja, running the code, without displaying the code or result in the final document.</p>
<p><img src="images/Ch7_Adv_top_7.PNG" width="50%" /></p>
<p>3, <strong>echo = FALSE</strong> acts like a stagehand, hiding the code from the final document, and revealing only the output.</p>
<p><img src="images/Ch7_Adv_top_8.PNG" width="50%" /></p>
<p>Another chunk below displays only the plot in the final document. The code does not show up since the <code>echo = FALSE</code> parameter was added to the code chunk.</p>
<p><img src="images/Ch7_Adv_top_9.PNG" width="50%" /></p>
<p>4, <strong>message = FALSE</strong> prevents messages from appearing in the final document.</p>
<p>5, <strong>warning = FALSE</strong> is like a “Do Not Disturb” sign, preventing warnings from showing up in the final document.</p>
<p>6, <strong>results = ‘hide’</strong> is a bit of a tease, Concealing printed output.</p>
<p>7, <strong>fig.show = ‘hide’</strong> is like a magician, hiding plots in sleeve and out of sight.</p>
<p>8, <strong>error = TRUE</strong> acts as a brave soul, allowing the render to continue even if code returns an error.</p>
<p>The third part of an .Rmd file included the text mixed with symbols like # or *.</p>
<p><img src="images/Ch7_Adv_top_4.PNG" width="100%" /></p>
<p>You can type your text like how you do in MS Word. The pound symbol <strong>#</strong> implies a heading. The number of pounds indicates the heading level; It runs from 1 to 6. One <strong>#</strong> presents the first level header, two <strong>#</strong>s imply the second level header, and etc. Here is an output displaying various levels.</p>
<p><img src="images/Ch7_Adv_top_5.PNG" width="60%" /></p>
<p>To italicize a word, surround it with a single asterisk: *Italic* becomes <em>Italic</em>. For bolding, use two asterisks: **bold** turns into <strong>bold</strong>.</p>
<p>The final step is to obtain the whole output by clicking the <strong>Knit</strong> button on the top of the .Rmd file. You will be asked to name the file and save it to your PC if it is the first time you knit the file.</p>
<p>Follow these simple steps as instructed, your output file will magically appear on your screen.</p>
</div>
<div id="tidyverse" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Tidyverse<a href="advanced-topics.html#tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Tidyverse is a collection of powerful R packages, including superheros like ggplot2, dplyr, readr, purr, tidyr, and tibble. They were all written by Hadley Wickham, a true hero in the open-source R world. Following the same design philosophy and grammar, these mighty packages are designed to make R code more readable, intuitive, and just plain fun. As they are so user-friendly, some people argue that beginners should start by learning them, instead of the base R. Now let’s explain the dplyr package in a little detail using the classic iris data set.</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="advanced-topics.html#cb750-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>) </span></code></pre></div>
<div class="sourceCode" id="cb751"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb751-1"><a href="advanced-topics.html#cb751-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>In dplyr, we use the pipe operator ‘%&gt;%’ like a magic wand, sending data to the next stage. This is similar to the “+” operator we used in ggplot2 but for data manipulation. For example: to create a new data frame for setosa with sepals longer than 4.0:</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb752-1"><a href="advanced-topics.html#cb752-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb752-2"><a href="advanced-topics.html#cb752-2" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>, Sepal.Length <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code></pre></div>
<p>Add a new column for the ratios of sepal length to sepal width:</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb753-1"><a href="advanced-topics.html#cb753-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb753-2"><a href="advanced-topics.html#cb753-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Sepal.Length <span class="sc">/</span> Sepal.Width)</span></code></pre></div>
<p>Sort by sepal length in ascending order:</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb754-1"><a href="advanced-topics.html#cb754-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb754-2"><a href="advanced-topics.html#cb754-2" tabindex="-1"></a>  <span class="fu">arrange</span>(Sepal.Length)</span></code></pre></div>
<p>The power of dplyr is that we can connect these pipe operators to define a work flow. Imagine we’re looking for the Iris setosa flowers with the largest sepal ratio.</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="advanced-topics.html#cb755-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb755-2"><a href="advanced-topics.html#cb755-2" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span>                  <span class="co"># Filter rows</span></span>
<span id="cb755-3"><a href="advanced-topics.html#cb755-3" tabindex="-1"></a>  <span class="fu">select</span>(Sepal.Length, Sepal.Width) <span class="sc">%&gt;%</span>            <span class="co"># Select two columns </span></span>
<span id="cb755-4"><a href="advanced-topics.html#cb755-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Sepal.Length <span class="sc">/</span> Sepal.Width) <span class="sc">%&gt;%</span>   <span class="co"># Add a new column</span></span>
<span id="cb755-5"><a href="advanced-topics.html#cb755-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ratio))   <span class="sc">%&gt;%</span>                       <span class="co"># Sort in descending order</span></span>
<span id="cb755-6"><a href="advanced-topics.html#cb755-6" tabindex="-1"></a>  <span class="fu">head</span>()   <span class="co"># Show top rows. No more pipes, end of sequence.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width    ratio
## 1          4.5         2.3 1.956522
## 2          5.0         3.0 1.666667
## 3          4.9         3.0 1.633333
## 4          4.8         3.0 1.600000
## 5          4.8         3.0 1.600000
## 6          5.4         3.4 1.588235</code></pre>
<p>Here, <strong>filter</strong>( ), <strong>mutate</strong>( ) and <strong>arrange</strong>( ) are 3 magical <strong>“verbs”</strong> that operate on the data frame sequentially. <strong>head</strong>( ) is the function that only shows the top rows. Notice the pipe operator ‘%&gt;%’ at the end of each line, leading us through the enchantment sequence, making the code a delight to read.</p>
<p>Two other useful verbs are <strong>group_by</strong>( ) and <strong>summarise</strong>( ), perfect for generating summary statistics. Below, we use group_by to split the dataset into 3 groups by the species, compute the means of sepal length and width, and then recombine. It is a <strong>“split-apply-combine”</strong> magic.</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb757-1"><a href="advanced-topics.html#cb757-1" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb757-2"><a href="advanced-topics.html#cb757-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species)  <span class="sc">%&gt;%</span>  <span class="co"># Split by Species </span></span>
<span id="cb757-3"><a href="advanced-topics.html#cb757-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avgSL =</span> <span class="fu">mean</span>(Sepal.Length), <span class="at">avgSW =</span> <span class="fu">mean</span>(Sepal.Width)) <span class="sc">%&gt;%</span> </span>
<span id="cb757-4"><a href="advanced-topics.html#cb757-4" tabindex="-1"></a>  <span class="fu">arrange</span>(avgSL)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Species    avgSL avgSW
##   &lt;fct&gt;      &lt;dbl&gt; &lt;dbl&gt;
## 1 setosa      5.01  3.43
## 2 versicolor  5.94  2.77
## 3 virginica   6.59  2.97</code></pre>
<p>Here we’ve created a bouquet of new data frames, each displaying the mean sepal length and sepal width for each species. Obviously, we can change <strong>mean</strong>( ) to many other functions. This makes it very easy to summarize large data sets.</p>
<p>Exercise Instructions:
For all the following exercises, you need to use R Markdown. Please submit both your .Rmd file and the final document in pdf format. (No answer key is required.)</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-406}</p>
</blockquote>
<blockquote>
<p>Fill in the blanks. Hint: Build your code piece by piece, testing each step. Use <strong>head</strong> or <strong>summary</strong> to check your work.</p>
<ol style="list-style-type: lower-alpha">
<li>Read in the heart attack data from chapter 4. Insert Your own Path there.<br />
</li>
<li>Calculate the average cost per day for patients with different DIAGNOSIS codes.<br />
</li>
<li>Focus on females older than 20 and younger than 70 who stayed in the hospital at least one day.<br />
</li>
<li>Sort the results in descending order.</li>
<li>Use one command with multiple steps.</li>
</ol>
<p>heartatk4R &lt;- read.csv(“______________/heartatk4R.txt”, header = TRUE, sep = “,</p>
<p>colClasses = c(“character”, “factor”, “factor”, “factor”, “factor”, “numeric”, “numeric”, “numeric”)</p>
<p>head(heartatk4R)</p>
<p>library(dplyr)</p>
<p>df &lt;- heartatk4R %&gt;%</p>
<p>filter(SEX == “______” &amp; AGE &gt; 20 _____ AGE &lt; 70 &amp; ________) %&gt;%</p>
<p>group_by(___________) %&gt;%</p>
<p>___________(CostPerDay = ___________) %&gt;%</p>
<p>summarise(AvgCostPerDay = __________(CostPerDay, na.rm = _______)) %&gt;%</p>
<p>___________(-AvgCostPerDay)</p>
<p>df
:::</p>
</blockquote>
</div>
<div id="interactive-plots-made-easy-with-plotly" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Interactive plots made easy with Plotly<a href="advanced-topics.html#interactive-plots-made-easy-with-plotly" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ever wished your ggplot2 creations could come alive? Let’s dive into ‘plotly’.</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="advanced-topics.html#cb759-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;plotly&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb760-1"><a href="advanced-topics.html#cb760-1" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb760-2"><a href="advanced-topics.html#cb760-2" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Width, Petal.Length , <span class="at">color =</span> Species)) <span class="sc">+</span> <span class="fu">geom_point</span>() </span>
<span id="cb760-3"><a href="advanced-topics.html#cb760-3" tabindex="-1"></a><span class="fu">ggplotly</span>(g)</span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ef9e2158af55fbe472c8" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ef9e2158af55fbe472c8">{"x":{"data":[{"x":[0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.10000000000000001,0.20000000000000001,0.40000000000000002,0.40000000000000002,0.29999999999999999,0.29999999999999999,0.29999999999999999,0.20000000000000001,0.40000000000000002,0.20000000000000001,0.5,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.29999999999999999,0.29999999999999999,0.20000000000000001,0.59999999999999998,0.40000000000000002,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001],"y":[1.3999999999999999,1.3999999999999999,1.3,1.5,1.3999999999999999,1.7,1.3999999999999999,1.5,1.3999999999999999,1.5,1.5,1.6000000000000001,1.3999999999999999,1.1000000000000001,1.2,1.5,1.3,1.3999999999999999,1.7,1.5,1.7,1.5,1,1.7,1.8999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.3999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.5,1.3999999999999999,1.5,1.2,1.3,1.3999999999999999,1.3,1.5,1.3,1.3,1.3,1.6000000000000001,1.8999999999999999,1.3999999999999999,1.6000000000000001,1.3999999999999999,1.5,1.3999999999999999],"text":["Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.7<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.1<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.1<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.1<br />Petal.Length: 1.1<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.2<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.7<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.7<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.0<br />Species: setosa","Petal.Width: 0.5<br />Petal.Length: 1.7<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.9<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.1<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.2<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.1<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.3<br />Species: setosa","Petal.Width: 0.6<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.4<br />Petal.Length: 1.9<br />Species: setosa","Petal.Width: 0.3<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.6<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.5<br />Species: setosa","Petal.Width: 0.2<br />Petal.Length: 1.4<br />Species: setosa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"setosa","legendgroup":"setosa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.3999999999999999,1.5,1.5,1.3,1.5,1.3,1.6000000000000001,1,1.3,1.3999999999999999,1,1.5,1,1.3999999999999999,1.3,1.3999999999999999,1.5,1,1.5,1.1000000000000001,1.8,1.3,1.5,1.2,1.3,1.3999999999999999,1.3999999999999999,1.7,1.5,1,1.1000000000000001,1,1.2,1.6000000000000001,1.5,1.6000000000000001,1.5,1.3,1.3,1.3,1.2,1.3999999999999999,1.2,1,1.3,1.2,1.3,1.3,1.1000000000000001,1.3],"y":[4.7000000000000002,4.5,4.9000000000000004,4,4.5999999999999996,4.5,4.7000000000000002,3.2999999999999998,4.5999999999999996,3.8999999999999999,3.5,4.2000000000000002,4,4.7000000000000002,3.6000000000000001,4.4000000000000004,4.5,4.0999999999999996,4.5,3.8999999999999999,4.7999999999999998,4,4.9000000000000004,4.7000000000000002,4.2999999999999998,4.4000000000000004,4.7999999999999998,5,4.5,3.5,3.7999999999999998,3.7000000000000002,3.8999999999999999,5.0999999999999996,4.5,4.5,4.7000000000000002,4.4000000000000004,4.0999999999999996,4,4.4000000000000004,4.5999999999999996,4,3.2999999999999998,4.2000000000000002,4.2000000000000002,4.2000000000000002,4.2999999999999998,3,4.0999999999999996],"text":["Petal.Width: 1.4<br />Petal.Length: 4.7<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.9<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.0<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.6<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.6<br />Petal.Length: 4.7<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 3.3<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.6<br />Species: versicolor","Petal.Width: 1.4<br />Petal.Length: 3.9<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 3.5<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.2<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 4.0<br />Species: versicolor","Petal.Width: 1.4<br />Petal.Length: 4.7<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 3.6<br />Species: versicolor","Petal.Width: 1.4<br />Petal.Length: 4.4<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 4.1<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.1<br />Petal.Length: 3.9<br />Species: versicolor","Petal.Width: 1.8<br />Petal.Length: 4.8<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.0<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.9<br />Species: versicolor","Petal.Width: 1.2<br />Petal.Length: 4.7<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.3<br />Species: versicolor","Petal.Width: 1.4<br />Petal.Length: 4.4<br />Species: versicolor","Petal.Width: 1.4<br />Petal.Length: 4.8<br />Species: versicolor","Petal.Width: 1.7<br />Petal.Length: 5.0<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 3.5<br />Species: versicolor","Petal.Width: 1.1<br />Petal.Length: 3.8<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 3.7<br />Species: versicolor","Petal.Width: 1.2<br />Petal.Length: 3.9<br />Species: versicolor","Petal.Width: 1.6<br />Petal.Length: 5.1<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.6<br />Petal.Length: 4.5<br />Species: versicolor","Petal.Width: 1.5<br />Petal.Length: 4.7<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.4<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.1<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.0<br />Species: versicolor","Petal.Width: 1.2<br />Petal.Length: 4.4<br />Species: versicolor","Petal.Width: 1.4<br />Petal.Length: 4.6<br />Species: versicolor","Petal.Width: 1.2<br />Petal.Length: 4.0<br />Species: versicolor","Petal.Width: 1.0<br />Petal.Length: 3.3<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.2<br />Species: versicolor","Petal.Width: 1.2<br />Petal.Length: 4.2<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.2<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.3<br />Species: versicolor","Petal.Width: 1.1<br />Petal.Length: 3.0<br />Species: versicolor","Petal.Width: 1.3<br />Petal.Length: 4.1<br />Species: versicolor"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"versicolor","legendgroup":"versicolor","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5,1.8999999999999999,2.1000000000000001,1.8,2.2000000000000002,2.1000000000000001,1.7,1.8,1.8,2.5,2,1.8999999999999999,2.1000000000000001,2,2.3999999999999999,2.2999999999999998,1.8,2.2000000000000002,2.2999999999999998,1.5,2.2999999999999998,2,2,1.8,2.1000000000000001,1.8,1.8,1.8,2.1000000000000001,1.6000000000000001,1.8999999999999999,2,2.2000000000000002,1.5,1.3999999999999999,2.2999999999999998,2.3999999999999999,1.8,1.8,2.1000000000000001,2.3999999999999999,2.2999999999999998,1.8999999999999999,2.2999999999999998,2.5,2.2999999999999998,1.8999999999999999,2,2.2999999999999998,1.8],"y":[6,5.0999999999999996,5.9000000000000004,5.5999999999999996,5.7999999999999998,6.5999999999999996,4.5,6.2999999999999998,5.7999999999999998,6.0999999999999996,5.0999999999999996,5.2999999999999998,5.5,5,5.0999999999999996,5.2999999999999998,5.5,6.7000000000000002,6.9000000000000004,5,5.7000000000000002,4.9000000000000004,6.7000000000000002,4.9000000000000004,5.7000000000000002,6,4.7999999999999998,4.9000000000000004,5.5999999999999996,5.7999999999999998,6.0999999999999996,6.4000000000000004,5.5999999999999996,5.0999999999999996,5.5999999999999996,6.0999999999999996,5.5999999999999996,5.5,4.7999999999999998,5.4000000000000004,5.5999999999999996,5.0999999999999996,5.0999999999999996,5.9000000000000004,5.7000000000000002,5.2000000000000002,5,5.2000000000000002,5.4000000000000004,5.0999999999999996],"text":["Petal.Width: 2.5<br />Petal.Length: 6.0<br />Species: virginica","Petal.Width: 1.9<br />Petal.Length: 5.1<br />Species: virginica","Petal.Width: 2.1<br />Petal.Length: 5.9<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 5.6<br />Species: virginica","Petal.Width: 2.2<br />Petal.Length: 5.8<br />Species: virginica","Petal.Width: 2.1<br />Petal.Length: 6.6<br />Species: virginica","Petal.Width: 1.7<br />Petal.Length: 4.5<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 6.3<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 5.8<br />Species: virginica","Petal.Width: 2.5<br />Petal.Length: 6.1<br />Species: virginica","Petal.Width: 2.0<br />Petal.Length: 5.1<br />Species: virginica","Petal.Width: 1.9<br />Petal.Length: 5.3<br />Species: virginica","Petal.Width: 2.1<br />Petal.Length: 5.5<br />Species: virginica","Petal.Width: 2.0<br />Petal.Length: 5.0<br />Species: virginica","Petal.Width: 2.4<br />Petal.Length: 5.1<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 5.3<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 5.5<br />Species: virginica","Petal.Width: 2.2<br />Petal.Length: 6.7<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 6.9<br />Species: virginica","Petal.Width: 1.5<br />Petal.Length: 5.0<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 5.7<br />Species: virginica","Petal.Width: 2.0<br />Petal.Length: 4.9<br />Species: virginica","Petal.Width: 2.0<br />Petal.Length: 6.7<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 4.9<br />Species: virginica","Petal.Width: 2.1<br />Petal.Length: 5.7<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 6.0<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 4.8<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 4.9<br />Species: virginica","Petal.Width: 2.1<br />Petal.Length: 5.6<br />Species: virginica","Petal.Width: 1.6<br />Petal.Length: 5.8<br />Species: virginica","Petal.Width: 1.9<br />Petal.Length: 6.1<br />Species: virginica","Petal.Width: 2.0<br />Petal.Length: 6.4<br />Species: virginica","Petal.Width: 2.2<br />Petal.Length: 5.6<br />Species: virginica","Petal.Width: 1.5<br />Petal.Length: 5.1<br />Species: virginica","Petal.Width: 1.4<br />Petal.Length: 5.6<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 6.1<br />Species: virginica","Petal.Width: 2.4<br />Petal.Length: 5.6<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 5.5<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 4.8<br />Species: virginica","Petal.Width: 2.1<br />Petal.Length: 5.4<br />Species: virginica","Petal.Width: 2.4<br />Petal.Length: 5.6<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 5.1<br />Species: virginica","Petal.Width: 1.9<br />Petal.Length: 5.1<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 5.9<br />Species: virginica","Petal.Width: 2.5<br />Petal.Length: 5.7<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 5.2<br />Species: virginica","Petal.Width: 1.9<br />Petal.Length: 5.0<br />Species: virginica","Petal.Width: 2.0<br />Petal.Length: 5.2<br />Species: virginica","Petal.Width: 2.3<br />Petal.Length: 5.4<br />Species: virginica","Petal.Width: 1.8<br />Petal.Length: 5.1<br />Species: virginica"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"virginica","legendgroup":"virginica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":31.415525114155255},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.01999999999999999,2.6200000000000001],"tickmode":"array","ticktext":["0.0","0.5","1.0","1.5","2.0","2.5"],"tickvals":[0,0.5,1,1.4999999999999998,2,2.5],"categoryorder":"array","categoryarray":["0.0","0.5","1.0","1.5","2.0","2.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Petal.Width","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.70499999999999996,7.1950000000000003],"tickmode":"array","ticktext":["2","4","6"],"tickvals":[2,4,6],"categoryorder":"array","categoryarray":["2","4","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Petal.Length","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Species","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"5084e2f2d87":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"5084e2f2d87","visdat":{"5084e2f2d87":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>We first generated the plot using ggplot2 and stored it in an object ‘g’, which was rendered interactively with plotly. If you mouse over the plot, the values are highlighted. Want a closer look? You can also select an area on the chart to zoom in.</p>
</div>
<div id="shiny-apps" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Shiny Apps<a href="advanced-topics.html#shiny-apps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Recent developments in R made it easy to create interactive charts and even complex websites. Without any web development experience, I created a site entirely in R (iDEP <a href="http://ge-lab.org/idep/" class="uri">http://ge-lab.org/idep/</a>) to enable biologists to analyze genomic data on their own. My blog (<a href="http://gex.netlify.com" class="uri">http://gex.netlify.com</a>) is another RStudio creation.</p>
<div id="install-the-shiny-package" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Install the Shiny package<a href="advanced-topics.html#install-the-shiny-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To start your own magical journey, invoke Shiny by typing this in the console:</p>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb761-1"><a href="advanced-topics.html#cb761-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;shiny&quot;</span>)</span></code></pre></div>
</div>
<div id="create-a-shiny-web-app-is-a-piece-of-cake" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Create a Shiny web app is a piece of cake<a href="advanced-topics.html#create-a-shiny-web-app-is-a-piece-of-cake" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="images/img1201_shiny.png" width="60%" /></p>
<p>Start a new Shiny app by either using the shortcut above or navigating through <strong>File -&gt; New File -&gt; Shiny Web App</strong> from the RStudio main menu. Give your app a name, such as <em>test1</em>, and save it to your local PC. RStudio, being the helpful elf it is, provides a small, but functional sample app in a file named test1.app.R. Click on <strong>Run App</strong> on the top-right of the script window, a histogram will pop up. We can customize the histogram bins by moving the sliding bar, just like a DJ tweaking the soundboard.</p>
<p><img src="images/Ch7_Adv_top_10.PNG" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="lets-play" class="section level3 hasAnchor" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Let’s play!<a href="advanced-topics.html#lets-play" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can further customize the outputs by editing the code. In the app.R file, there are two <strong>functions</strong>: <em>ui()</em> and <em>server()</em> . The <em>ui()</em> defines the user interface, and <em>server()</em> specifies the logic.</p>
<ol style="list-style-type: lower-alpha">
<li>Personalize the color by changing the col = <strong>‘darkgray’</strong> in line 44 to your favorite color, such as <strong>‘green’, ‘red’</strong>, etc. For a rainbow effect, set it to col = <strong>rainbow(10)</strong> so that we can use ten colors on a rolling basis.</li>
</ol>
<p><img src="images/Ch7_Adv_top_11.PNG" width="80%" /><img src="images/Ch7_Adv_top_12.PNG" width="80%" /></p>
<p>After saving the correction, run the app again.</p>
<p><img src="images/Ch7_Adv_top_13.PNG" width="80%" /></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Switch the dataset. To replace the original dataset Old Faithful Geyser to a new dataset iris, we need to modify the columns and dataset specified on line 40. Meanwhile, by updating the content after <strong>titlePanel</strong> on line 16, we get a new title. See the hignlighted code in the following graphs.</li>
</ol>
<p><img src="images/Ch7_Adv_top_14_1.PNG" width="80%" /><img src="images/Ch7_Adv_top_14_2.PNG" width="80%" /><img src="images/Ch7_Adv_top_14.PNG" width="80%" /><img src="images/Ch7_Adv_top_15.PNG" width="80%" /></p>
<p>Save the changes and run the app again. Figure <a href="advanced-topics.html#fig:label16">7.5</a> is the histogram of iris’s Sepal length.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label16"></span>
<img src="images/Ch7_Adv_top_16.PNG" alt="Output of the Sepal length in the iris" width="80%" />
<p class="caption">
Figure 7.5: Output of the Sepal length in the iris
</p>
</div>
<ol start="3" style="list-style-type: lower-alpha">
<li>Adjust default bins. The default number of bins of 30, specified at line 25, is probably too big. Let’s reduce it to 12 by setting value = 12.</li>
</ol>
<p><img src="images/Ch7_Adv_top_17.PNG" width="80%" style="display: block; margin: auto;" /><img src="images/Ch7_Adv_top_18.PNG" width="80%" style="display: block; margin: auto;" /></p>
<p>Save and rerun the app, now we have the histogram with 12 bins by default.</p>
<p><img src="images/Ch7_Adv_top_19.PNG" width="80%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Add column selection. Would it be cool if the user can choose the variable from the output? Yes, it’s possible! We can change ‘Sepal.Length’ to other columns by assigning x to other variables. To make it, add a control widget by inserting this line of code after line 20: “selectInput(”cid”, “Column”, choices = colnames(iris)),“. <strong>Do not forget the comma at the very end! </strong> Remember, it is crucial!</li>
</ol>
<p><img src="images/Ch7_Adv_top_20.PNG" width="80%" /><img src="images/Ch7_Adv_top_21.PNG" width="80%" /></p>
<p>Save and run the app. A <strong>Column</strong> control widget presents above the <strong>Number of bins</strong>. You are now able to select any of the variable in iris dataset.</p>
<p><img src="images/Ch7_Adv_top_22.PNG" width="80%" /></p>
<p>But wait, the histogram does not change correspondingly. This is because we have not changed the code with respect to the histogram. Take a look at the <strong>server</strong> function, on line 44, the histogram function is given as <strong>hist(x,…)</strong>, where <strong>x &lt;- iris[, ‘Sepal.Length’]</strong>, specified on line 40. That’s why only the histogram of Sepal length is produced. To let the histogram change according to the selection of column, we replace <strong>x &lt;- iris[, ‘Sepal.Length’]</strong> with <strong>x &lt;- iris[, input$cid ]</strong> on the line 40. Note that the <strong>cid</strong> is consistent with the inserted code <strong>selectInput( “cid”,<span class="math inline">\(\cdots\)</span>)</strong> on line 20: “<strong>sidebarPanel(selectInput(”cid”, ”Column”, choices = colnames(iris)),</strong>”.</p>
<p><img src="images/Ch7_Adv_top_23.PNG" width="80%" /><img src="images/Ch7_Adv_top_24.PNG" width="80%" /></p>
<p>Save and rerun the code. Then select a variable from the <strong>Column</strong>, say <em>Petal.Width</em>, now, the histogram of Petal width shows up accordingly.</p>
<p><img src="images/Ch7_Adv_top_25.PNG" width="80%" style="display: block; margin: auto;" /></p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-421}</p>
</blockquote>
<blockquote>
<p>What happens when you choose the last Column of “Species” in the app?
Solve the issue by deleting the variable ‘Species’ from the data iris. Hint: Modify the code on line 20: <em>selectInput(“cid”, “Column”, choices = colnames(iris))</em>.
:::</p>
</blockquote>
<p>To modify the title, let’s define a main title as <em>titl &lt;- </em>, and then assign it to the option “main =___” in the hist() function.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-422}</p>
</blockquote>
<blockquote>
<p>Change the title from “Histogram of x” to “Histogram of __” where _ is the name of the selected variable like “Sepal.Length”. Complete the question by filling in the blanks. Your output should look like the Figure 7.6.</p>
<p>titl &lt;- paste(“Histogram of”, <strong>input$cid</strong>, sep = ” “)</p>
<p>hist(x, breaks = bins, col = ‘green’, border = ‘white’, main = _______)
:::</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-423"></span>
<img src="images/Ch7_Adv_top_27.png" alt="Histogram output" width="80%" />
<p class="caption">
Figure 7.6: Histogram output
</p>
</div>
</blockquote>
<ol start="5" style="list-style-type: lower-alpha">
<li>Enhance your app with a more complex feature. Let’s add an approximation normal distribution line by replacing the function <strong>hist(x, breaks = bins, col = ‘green’, border = ‘white’)</strong> with the code below:</li>
</ol>
<div class="sourceCode" id="cb762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb762-1"><a href="advanced-topics.html#cb762-1" tabindex="-1"></a>      h <span class="ot">&lt;-</span> <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="fu">rainbow</span>(<span class="dv">10</span>), <span class="at">border =</span> <span class="st">&#39;white&#39;</span>)</span>
<span id="cb762-2"><a href="advanced-topics.html#cb762-2" tabindex="-1"></a>      yfit <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(bins, <span class="at">mean =</span> <span class="fu">mean</span>(x), <span class="at">sd =</span> <span class="fu">sd</span>(x)) </span>
<span id="cb762-3"><a href="advanced-topics.html#cb762-3" tabindex="-1"></a>      yfit <span class="ot">&lt;-</span> yfit <span class="sc">*</span>  <span class="fu">diff</span>( h<span class="sc">$</span>mids[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]) <span class="sc">*</span> <span class="fu">length</span>(x) </span>
<span id="cb762-4"><a href="advanced-topics.html#cb762-4" tabindex="-1"></a>      <span class="fu">lines</span>(bins, yfit, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p>The output should mirror Figure <a href="advanced-topics.html#fig:label28">7.7</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label28"></span>
<img src="images/Ch7_Adv_top_28.png" alt="Output of adding an approximation normal distribution curve" width="80%" />
<p class="caption">
Figure 7.7: Output of adding an approximation normal distribution curve
</p>
</div>
<blockquote>
<p>::: {.exercise #unnamed-chunk-425}</p>
</blockquote>
<blockquote>
<p>Fill in the blanks to solve the error message when selecting <strong>Species</strong> in the <strong>Column</strong> in this app by plotting a pie chart instead. Your pie chart should be similar to Figure 7.8.</p>
<p>Hint steps:</p>
<p>1, Ensure the <strong>selectInput()</strong> line the same as its original with all columns selected.</p>
<p>2, Separate the variables into two groups, numeric variables (columns 1 through 4) for histogram and categorical variable (5th column) for pie plot.</p>
<p>3, Use ‘if()’ and ‘}else{’ to differentiate the groups.
:::</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-426"></span>
<img src="images/Ch7_Adv_top_29.png" alt="Pie chart output" width="80%" />
<p class="caption">
Figure 7.8: Pie chart output
</p>
</div>
</blockquote>
<div class="sourceCode" id="cb763"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb763-1"><a href="advanced-topics.html#cb763-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb763-2"><a href="advanced-topics.html#cb763-2" tabindex="-1"></a><span class="co"># Define UI for application that draws a histogram</span></span>
<span id="cb763-3"><a href="advanced-topics.html#cb763-3" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb763-4"><a href="advanced-topics.html#cb763-4" tabindex="-1"></a>   </span>
<span id="cb763-5"><a href="advanced-topics.html#cb763-5" tabindex="-1"></a>   <span class="co"># Application title</span></span>
<span id="cb763-6"><a href="advanced-topics.html#cb763-6" tabindex="-1"></a>   <span class="fu">titlePanel</span>(<span class="st">&quot;Interactive page for iris data&quot;</span>),</span>
<span id="cb763-7"><a href="advanced-topics.html#cb763-7" tabindex="-1"></a>   </span>
<span id="cb763-8"><a href="advanced-topics.html#cb763-8" tabindex="-1"></a>   <span class="co"># Sidebar with a slider input for number of bins </span></span>
<span id="cb763-9"><a href="advanced-topics.html#cb763-9" tabindex="-1"></a>   <span class="fu">sidebarLayout</span>(</span>
<span id="cb763-10"><a href="advanced-topics.html#cb763-10" tabindex="-1"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb763-11"><a href="advanced-topics.html#cb763-11" tabindex="-1"></a>        <span class="fu">selectInput</span>(<span class="st">&quot;cid&quot;</span>, <span class="st">&quot;Select the column&quot;</span>, <span class="at">choices =</span> ___________),</span>
<span id="cb763-12"><a href="advanced-topics.html#cb763-12" tabindex="-1"></a>         <span class="fu">sliderInput</span>(<span class="st">&quot;bins&quot;</span>,</span>
<span id="cb763-13"><a href="advanced-topics.html#cb763-13" tabindex="-1"></a>                     <span class="st">&quot;Number of bins:&quot;</span>,</span>
<span id="cb763-14"><a href="advanced-topics.html#cb763-14" tabindex="-1"></a>                     <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb763-15"><a href="advanced-topics.html#cb763-15" tabindex="-1"></a>                     <span class="at">max =</span> <span class="dv">50</span>,</span>
<span id="cb763-16"><a href="advanced-topics.html#cb763-16" tabindex="-1"></a>                     <span class="at">value =</span> <span class="dv">12</span>)</span>
<span id="cb763-17"><a href="advanced-topics.html#cb763-17" tabindex="-1"></a>      ),</span>
<span id="cb763-18"><a href="advanced-topics.html#cb763-18" tabindex="-1"></a>      </span>
<span id="cb763-19"><a href="advanced-topics.html#cb763-19" tabindex="-1"></a>      <span class="co"># Show a plot of the generated distribution</span></span>
<span id="cb763-20"><a href="advanced-topics.html#cb763-20" tabindex="-1"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb763-21"><a href="advanced-topics.html#cb763-21" tabindex="-1"></a>         <span class="fu">plotOutput</span>(<span class="st">&quot;Plot&quot;</span>)</span>
<span id="cb763-22"><a href="advanced-topics.html#cb763-22" tabindex="-1"></a>      ) </span>
<span id="cb763-23"><a href="advanced-topics.html#cb763-23" tabindex="-1"></a>   )</span>
<span id="cb763-24"><a href="advanced-topics.html#cb763-24" tabindex="-1"></a> )</span>
<span id="cb763-25"><a href="advanced-topics.html#cb763-25" tabindex="-1"></a></span>
<span id="cb763-26"><a href="advanced-topics.html#cb763-26" tabindex="-1"></a><span class="co"># Define server logic required to draw a histogram and pie plot</span></span>
<span id="cb763-27"><a href="advanced-topics.html#cb763-27" tabindex="-1"></a></span>
<span id="cb763-28"><a href="advanced-topics.html#cb763-28" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb763-29"><a href="advanced-topics.html#cb763-29" tabindex="-1"></a>   </span>
<span id="cb763-30"><a href="advanced-topics.html#cb763-30" tabindex="-1"></a>   output<span class="sc">$</span>Plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb763-31"><a href="advanced-topics.html#cb763-31" tabindex="-1"></a>     </span>
<span id="cb763-32"><a href="advanced-topics.html#cb763-32" tabindex="-1"></a>      x    <span class="ot">&lt;-</span> iris[, input<span class="sc">$</span>cid]</span>
<span id="cb763-33"><a href="advanced-topics.html#cb763-33" tabindex="-1"></a>      </span>
<span id="cb763-34"><a href="advanced-topics.html#cb763-34" tabindex="-1"></a>      <span class="co"># Draw the histogram with the specified number of bins for variable columns</span></span>
<span id="cb763-35"><a href="advanced-topics.html#cb763-35" tabindex="-1"></a>      <span class="fu">________</span> (input<span class="sc">$</span>cid <span class="sc">%in%</span> <span class="fu">colnames</span>(iris)[______]){</span>
<span id="cb763-36"><a href="advanced-topics.html#cb763-36" tabindex="-1"></a>      bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb763-37"><a href="advanced-topics.html#cb763-37" tabindex="-1"></a>      titl <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Histogram of&quot;</span>, input<span class="sc">$</span>cid, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb763-38"><a href="advanced-topics.html#cb763-38" tabindex="-1"></a>      <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">&#39;green&#39;</span>, <span class="at">border =</span> <span class="st">&#39;white&#39;</span>, <span class="at">main =</span> titl)</span>
<span id="cb763-39"><a href="advanced-topics.html#cb763-39" tabindex="-1"></a>      </span>
<span id="cb763-40"><a href="advanced-topics.html#cb763-40" tabindex="-1"></a>      <span class="co"># Draw the pie plot for categorical column Species</span></span>
<span id="cb763-41"><a href="advanced-topics.html#cb763-41" tabindex="-1"></a>        __________</span>
<span id="cb763-42"><a href="advanced-topics.html#cb763-42" tabindex="-1"></a>        count <span class="ot">&lt;-</span> <span class="fu">table</span>(x)</span>
<span id="cb763-43"><a href="advanced-topics.html#cb763-43" tabindex="-1"></a>        labl <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">names</span>(count), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, count, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb763-44"><a href="advanced-topics.html#cb763-44" tabindex="-1"></a>        titl <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Pie plot of&quot;</span>, input<span class="sc">$</span>cid, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb763-45"><a href="advanced-topics.html#cb763-45" tabindex="-1"></a>        <span class="fu">pie</span>(count, <span class="at">labels =</span> labl, <span class="at">main =</span> titl)</span>
<span id="cb763-46"><a href="advanced-topics.html#cb763-46" tabindex="-1"></a>      }</span>
<span id="cb763-47"><a href="advanced-topics.html#cb763-47" tabindex="-1"></a>   })</span>
<span id="cb763-48"><a href="advanced-topics.html#cb763-48" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="publish-your-app" class="section level3 hasAnchor" number="7.4.4">
<h3><span class="header-section-number">7.4.4</span> Publish your app<a href="advanced-topics.html#publish-your-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ready to share your magical Shiny app with the world? Just follow these steps to publish it online. If it’s your first time, fear not; It’s easier than baking a pie(and less messy)!</p>
<p>Step 1: Click the “Publish” button at the top-right of the window. Then choose “ShinyApps.io” in the Connect Account window as shown in the Figure <a href="advanced-topics.html#fig:label30">7.9</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label30"></span>
<img src="images/Ch7_Adv_top_30.png" alt="Connect Account" width="80%" />
<p class="caption">
Figure 7.9: Connect Account
</p>
</div>
<p>Step 2: Click “your account on ShinyApps” in the <strong>Connect ShinyApps.io Account</strong> window as shown in Figure <a href="advanced-topics.html#fig:label31">7.10</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label31"></span>
<img src="images/Ch7_Adv_top_31.png" alt="Connect ShinyApps.io Account" width="80%" />
<p class="caption">
Figure 7.10: Connect ShinyApps.io Account
</p>
</div>
<p>Step 3: In the <strong>Shinyapps.io by RStudio</strong> window, hit “Sign Up”.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label32"></span>
<img src="images/Ch7_Adv_top_32.png" alt="Sign up" width="80%" />
<p class="caption">
Figure 7.11: Sign up
</p>
</div>
<p>Step 4: Type your email, password and confirm password in the window as shown in <a href="advanced-topics.html#fig:label33">7.12</a>, then click “Sign Up”.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label33"></span>
<img src="images/Ch7_Adv_top_33.png" alt="Registration" width="80%" />
<p class="caption">
Figure 7.12: Registration
</p>
</div>
<p>Step 5: In the <strong>Account Setup</strong> window (Figure <a href="advanced-topics.html#fig:label34">7.13</a>), type an account name that you would like to use and click “Save”. Remember, everyone will have a unique account name. If the name is already taken (like “MyFirstShiny”), the border of the box will turn to red. You need to pick up another name and keep it cool. I named my account “stat415or515”.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label34"></span>
<img src="images/Ch7_Adv_top_34.png" alt="Account Setup" width="80%" />
<p class="caption">
Figure 7.13: Account Setup
</p>
</div>
<p>Step 6: A new window will pop up, showing you how to finish the final steps. Start by installing the package <strong>rsconnect</strong>. Then click the “Copy to clipboard” button in Figure <a href="advanced-topics.html#fig:label36">7.14</a>, and paste it into your console to authorize your account. Lastly, replace the path in Figure <a href="advanced-topics.html#fig:label37">7.15</a> with the path where your Shiny app is saved. Remember, the slash is <strong>forward</strong> not backward in the path. For example, my shiny app <em>IrisData.R</em> saved at ‘C:/Users/Documents/FirstShiny/’ is published with the following code:</p>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="advanced-topics.html#cb764-1" tabindex="-1"></a><span class="fu">library</span>(rsconnect)</span>
<span id="cb764-2"><a href="advanced-topics.html#cb764-2" tabindex="-1"></a>rsconnect<span class="sc">::</span><span class="fu">deployApp</span>(<span class="st">&#39;C:/Users/Documents/FirstShiny/IrisData&#39;</span>)</span></code></pre></div>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label36"></span>
<img src="images/Ch7_Adv_top_36.png" alt="Authorization steps" width="80%" />
<p class="caption">
Figure 7.14: Authorization steps
</p>
</div>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label37"></span>
<img src="images/Ch7_Adv_top_37.png" alt="Specify the path of your app" width="80%" />
<p class="caption">
Figure 7.15: Specify the path of your app
</p>
</div>
<p>Step 7: Find your app’s URL link at the bottom of Figure <a href="advanced-topics.html#fig:label38">7.16</a>. The link to my iris data is <a href="https://stat415or515.shinyapps.io/IrisData/">https://stat415or515.shinyapps.io/IrisData/</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:label38"></span>
<img src="images/Ch7_Adv_top_38.png" alt="Generate the link" width="80%" />
<p class="caption">
Figure 7.16: Generate the link
</p>
</div>
<p>Show off your creation by sending the URL of your data to your friends or your adviser. For more detailed instructions, check out these excellent tutorials:</p>
<p><a href="https://docs.rstudio.com/shinyapps.io/getting-started.html">https://docs.rstudio.com/shinyapps.io/getting-started.html</a></p>
<p><a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1">https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/</a></p>
<p>Looking for solutions to these exercises? They’re hiding out at GitHub:</p>
<p><a href="https://github.com/gexijin/teach/blob/master/app.R">https://github.com/gexijin/teach/blob/master/app.R</a></p>
</div>
</div>
<div id="define-your-own-function" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Define your own function<a href="advanced-topics.html#define-your-own-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Creating your own functions in R is like having a personal chef for your data – it cooks up exactly what you need, whenever you need it!</p>
<p>Take the following arithmetic function as a starter:</p>
<p><span class="math display">\[f(x)=1.57345 x^3+ x^2-2x+1\]</span></p>
<p>Sure, you can compute it manually:</p>
<div class="sourceCode" id="cb765"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb765-1"><a href="advanced-topics.html#cb765-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb765-2"><a href="advanced-topics.html#cb765-2" tabindex="-1"></a><span class="fl">1.57345</span> <span class="sc">*</span> x <span class="sc">^</span> <span class="dv">3</span> <span class="sc">+</span> x <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 212.6813</code></pre>
<p>This will work, but why go through the hassle every time? Let’s define our own function without repeating same code every time:</p>
<div class="sourceCode" id="cb767"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb767-1"><a href="advanced-topics.html#cb767-1" tabindex="-1"></a>myf <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {                           <span class="co"># Name the function myf</span></span>
<span id="cb767-2"><a href="advanced-topics.html#cb767-2" tabindex="-1"></a>       y <span class="ot">=</span> <span class="fl">1.57345</span> <span class="sc">*</span> x<span class="sc">^</span><span class="dv">3</span> <span class="sc">+</span> x<span class="sc">^</span><span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">1</span>     <span class="co"># Define the function</span></span>
<span id="cb767-3"><a href="advanced-topics.html#cb767-3" tabindex="-1"></a>       <span class="fu">return</span>(y)                               <span class="co"># Return the function result</span></span>
<span id="cb767-4"><a href="advanced-topics.html#cb767-4" tabindex="-1"></a>}</span></code></pre></div>
<p>Note that “{” and “}” signify the beginning and end of a block of code. <strong>“function”</strong> is the magic word, telling R that a function is going to be defined. At the end, the <strong>“return”</strong> statement reveals the desired result.</p>
<p>Now you can call the function easily:</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb768-1"><a href="advanced-topics.html#cb768-1" tabindex="-1"></a><span class="fu">myf</span>(<span class="dv">5</span>)     <span class="co"># Obtain the y value for x=5</span></span></code></pre></div>
<pre><code>## [1] 212.6813</code></pre>
<p>or</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="advanced-topics.html#cb770-1" tabindex="-1"></a><span class="fu">myf</span>(<span class="at">x =</span> <span class="dv">5</span>) </span></code></pre></div>
<pre><code>## [1] 212.6813</code></pre>
<p>It even works with vectors! For example:</p>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="advanced-topics.html#cb772-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span> <span class="dv">10</span> <span class="sc">:</span> <span class="dv">10</span>  <span class="co"># A vector with integer values from -10 to 10</span></span>
<span id="cb772-2"><a href="advanced-topics.html#cb772-2" tabindex="-1"></a><span class="fu">myf</span>(x)          <span class="co"># Apply the function myf() to x</span></span></code></pre></div>
<pre><code>##  [1] -1452.45000 -1047.04505  -724.60640  -475.69335  -290.86520  -160.68125
##  [7]   -75.70080   -26.48315    -3.58760     2.42655     1.00000     1.57345
## [13]    13.58760    46.48315   109.70080   212.68125   364.86520   575.69335
## [19]   854.60640  1211.04505  1654.45000</code></pre>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="advanced-topics.html#cb774-1" tabindex="-1"></a><span class="fu">plot</span>(x, <span class="fu">myf</span>(x)) <span class="co"># Plot the function</span></span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-434-1.png" width="672" /></p>
<p>Function can handle many different calculations beyond arithmetic functions. More than just numbers, it can take in one or more various data types and return a list of complex data objects.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-435}</p>
</blockquote>
<blockquote>
<p>Suppose f(x)= |x|+5x-6, where |x| means the absolute value of x.</p>
<ol style="list-style-type: lower-alpha">
<li>Write an R function to implement this arithmetic function.<br />
</li>
<li>Use this function to calculate f(-4.534).<br />
</li>
<li>Plot the function’s graph.<br />
:::</li>
</ol>
</blockquote>
<p>Now, let’s define a function to count even numbers in a vector.</p>
<div class="sourceCode" id="cb775"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb775-1"><a href="advanced-topics.html#cb775-1" tabindex="-1"></a><span class="co"># Count the number of even integers in vec</span></span>
<span id="cb775-2"><a href="advanced-topics.html#cb775-2" tabindex="-1"></a>evencount <span class="ot">&lt;-</span> <span class="cf">function</span>(vec) {</span>
<span id="cb775-3"><a href="advanced-topics.html#cb775-3" tabindex="-1"></a>  k <span class="ot">&lt;-</span> <span class="dv">0</span>                      <span class="co"># Assign 0 to a count variable k</span></span>
<span id="cb775-4"><a href="advanced-topics.html#cb775-4" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> vec) {            <span class="co"># Loop through all elements (represented by i) in vec</span></span>
<span id="cb775-5"><a href="advanced-topics.html#cb775-5" tabindex="-1"></a>                              <span class="co"># Values of i are actually vec[1],vec[2],...</span></span>
<span id="cb775-6"><a href="advanced-topics.html#cb775-6" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>)          <span class="co"># Test if i is an even or odd number</span></span>
<span id="cb775-7"><a href="advanced-topics.html#cb775-7" tabindex="-1"></a>                              <span class="co"># %% is the modulo operator</span></span>
<span id="cb775-8"><a href="advanced-topics.html#cb775-8" tabindex="-1"></a>      k <span class="ot">&lt;-</span> k <span class="sc">+</span> <span class="dv">1</span>              <span class="co"># Add to count if the number is even</span></span>
<span id="cb775-9"><a href="advanced-topics.html#cb775-9" tabindex="-1"></a>                            </span>
<span id="cb775-10"><a href="advanced-topics.html#cb775-10" tabindex="-1"></a>  }</span>
<span id="cb775-11"><a href="advanced-topics.html#cb775-11" tabindex="-1"></a>  <span class="fu">return</span>(k)                   <span class="co"># Return the count of even numbers</span></span>
<span id="cb775-12"><a href="advanced-topics.html#cb775-12" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="advanced-topics.html#cb776-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">14</span>, <span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">3</span>) <span class="co"># Define a new vector x</span></span>
<span id="cb776-2"><a href="advanced-topics.html#cb776-2" tabindex="-1"></a><span class="fu">evencount</span>(x)                     <span class="co"># Count even numbers in &#39;x&#39;</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>A variable is called local variable if it is only visible within a function. For instance, <em>k</em> and <em>vec</em> are local variables to the function <strong>evencount()</strong>. They disappear after the function returns. Trying to access them outside will leave you empty-handed:</p>
<div class="sourceCode" id="cb778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb778-1"><a href="advanced-topics.html#cb778-1" tabindex="-1"></a>k  <span class="co"># Poof!</span></span></code></pre></div>
<p>Error: object ‘k’ not found</p>
<div class="sourceCode" id="cb779"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb779-1"><a href="advanced-topics.html#cb779-1" tabindex="-1"></a>vec  <span class="co"># Gone with the wind!</span></span></code></pre></div>
<p>Error: object ‘vec’ not found</p>
<p>A variable is called global variable if it is defined outside of a function and is accessible within the function. Here is an example:</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="advanced-topics.html#cb780-1" tabindex="-1"></a>myfun.globle <span class="ot">&lt;-</span> <span class="cf">function</span> (x){</span>
<span id="cb780-2"><a href="advanced-topics.html#cb780-2" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb780-3"><a href="advanced-topics.html#cb780-3" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> y)</span>
<span id="cb780-4"><a href="advanced-topics.html#cb780-4" tabindex="-1"></a>}</span>
<span id="cb780-5"><a href="advanced-topics.html#cb780-5" tabindex="-1"></a><span class="fu">myfun.globle</span>(<span class="dv">8</span>)    <span class="co"># Calculate 8-2*y = 8-2*(1) = 6</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>y is a global variable here.</p>
<p>The function <em>myfun.globle2()</em> defined below returns the same value as above. But both x and y within the parentheses <em>(x, y=1)</em> in <em>function</em>() are local variables.</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb782-1"><a href="advanced-topics.html#cb782-1" tabindex="-1"></a>myfun.globle2 <span class="ot">&lt;-</span> <span class="cf">function</span> (x, <span class="at">y =</span> <span class="dv">1</span>){ <span class="co"># y is set as 1 within the function by default</span></span>
<span id="cb782-2"><a href="advanced-topics.html#cb782-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> y)</span>
<span id="cb782-3"><a href="advanced-topics.html#cb782-3" tabindex="-1"></a> }</span>
<span id="cb782-4"><a href="advanced-topics.html#cb782-4" tabindex="-1"></a><span class="fu">myfun.globle2</span>(<span class="dv">8</span>)    <span class="co"># Calculate 8-2*y = 8-2*(1) = 6</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-442}</p>
</blockquote>
<blockquote>
<p>Define a function which returns the count of all odd numbers in the vector x &lt;- 1:99.
:::</p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-443}</p>
</blockquote>
<blockquote>
<p>Create a function to count the values that are less than 0 for two vectors x=rnorm(50) and y=rnorm(5000), respectively. Then craft another function to calculate the proportion of such values for x and y respectively. Compare the calculated proportions with theoretical proportion 0.5, what conclusions can you make?
:::</p>
</blockquote>
<p>So, except basic R skills, now you go through advance topics like R Markdown, Tidyverse, Plotly, ShinyApp, and function. Each topic is like a magical spell; use them wisely and watch your data dance to your tunes!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-heart-attack-dataset-ii.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="state-dataset.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
