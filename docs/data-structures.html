<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data structures | Learn R through examples</title>
  <meta name="description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data structures | Learn R through examples" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  <meta name="github-repo" content="gexijin/learnR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data structures | Learn R through examples" />
  
  <meta name="twitter:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  

<meta name="author" content="Xijin Ge, Jianli Qi, and Rong Fan" />


<meta name="date" content="2023-10-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizing-the-iris-flower-data-set.html"/>
<link rel="next" href="importing-data-and-managing-files.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html"><i class="fa fa-check"></i><b>1</b> Step into R programming–the iris flower dataset</a>
<ul>
<li class="chapter" data-level="1.1" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting started</a></li>
<li class="chapter" data-level="1.2" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#the-proper-way-of-using-rstudio"><i class="fa fa-check"></i><b>1.2</b> The proper way of using RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#data-frames-contain-rows-and-columns-the-iris-flower-dataset"><i class="fa fa-check"></i><b>1.3</b> Data frames contain rows and columns: the iris flower dataset</a></li>
<li class="chapter" data-level="1.4" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#analyzing-one-set-of-numbers"><i class="fa fa-check"></i><b>1.4</b> Analyzing one set of numbers</a></li>
<li class="chapter" data-level="1.5" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#analyzing-a-categorical-variable"><i class="fa fa-check"></i><b>1.5</b> Analyzing a categorical variable</a></li>
<li class="chapter" data-level="1.6" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#the-relationship-between-two-numerical-variables"><i class="fa fa-check"></i><b>1.6</b> The relationship between two numerical variables</a></li>
<li class="chapter" data-level="1.7" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#testing-the-differences-between-two-groups"><i class="fa fa-check"></i><b>1.7</b> Testing the differences between two groups</a></li>
<li class="chapter" data-level="1.8" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#testing-the-difference-among-multiple-groups-anova"><i class="fa fa-check"></i><b>1.8</b> Testing the difference among multiple groups (ANOVA)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html"><i class="fa fa-check"></i><b>2</b> Visualizing the iris flower data set</a>
<ul>
<li class="chapter" data-level="2.1" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#basic-concepts-of-r-graphics"><i class="fa fa-check"></i><b>2.1</b> Basic concepts of R graphics</a></li>
<li class="chapter" data-level="2.2" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#scatter-plot-matrix"><i class="fa fa-check"></i><b>2.2</b> Scatter plot matrix</a></li>
<li class="chapter" data-level="2.3" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#star-and-segment-diagrams"><i class="fa fa-check"></i><b>2.3</b> Star and segment diagrams</a></li>
<li class="chapter" data-level="2.4" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#the-ggplot2-package-is-intuitive-and-powerful"><i class="fa fa-check"></i><b>2.4</b> The ggplot2 package is intuitive and powerful</a></li>
<li class="chapter" data-level="2.5" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#other-types-of-plots-with-ggplot2"><i class="fa fa-check"></i><b>2.5</b> Other types of plots with ggplot2</a></li>
<li class="chapter" data-level="2.6" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#hierarchical-clustering-and-heat-map"><i class="fa fa-check"></i><b>2.6</b> Hierarchical clustering and heat map</a></li>
<li class="chapter" data-level="2.7" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#principal-component-analysis-pca"><i class="fa fa-check"></i><b>2.7</b> Principal component analysis (PCA)</a></li>
<li class="chapter" data-level="2.8" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#classification-by-predicting-the-odds-of-binary-outcomes"><i class="fa fa-check"></i><b>2.8</b> Classification by predicting the odds of binary outcomes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-structures.html"><a href="data-structures.html#basic-concepts"><i class="fa fa-check"></i><b>3.1</b> Basic concepts</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-structures.html"><a href="data-structures.html#expressions"><i class="fa fa-check"></i><b>3.1.1</b> Expressions</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-structures.html"><a href="data-structures.html#logical-values"><i class="fa fa-check"></i><b>3.1.2</b> Logical Values</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-structures.html"><a href="data-structures.html#variables"><i class="fa fa-check"></i><b>3.1.3</b> Variables</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-structures.html"><a href="data-structures.html#functions"><i class="fa fa-check"></i><b>3.1.4</b> Functions</a></li>
<li class="chapter" data-level="3.1.5" data-path="data-structures.html"><a href="data-structures.html#looking-for-help-and-example-code"><i class="fa fa-check"></i><b>3.1.5</b> Looking for help and example Code</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-structures.html"><a href="data-structures.html#data-structures-1"><i class="fa fa-check"></i><b>3.2</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>3.2.1</b> Vectors</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>3.2.2</b> Matrices</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>3.2.3</b> Data Frames</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-structures.html"><a href="data-structures.html#strings-and-string-vectors"><i class="fa fa-check"></i><b>3.2.4</b> Strings and string vectors</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.2.5</b> Lists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html"><i class="fa fa-check"></i><b>4</b> Importing data and managing files</a>
<ul>
<li class="chapter" data-level="4.1" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#project-oriented-workflow"><i class="fa fa-check"></i><b>4.1</b> Project-oriented workflow</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#create-a-project-in-a-new-folder"><i class="fa fa-check"></i><b>4.1.1</b> Create a project in a new folder</a></li>
<li class="chapter" data-level="4.1.2" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#create-a-script-file-and-comment"><i class="fa fa-check"></i><b>4.1.2</b> Create a script file and comment (!)</a></li>
<li class="chapter" data-level="4.1.3" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#copy-data-files-to-the-new-directory"><i class="fa fa-check"></i><b>4.1.3</b> Copy data files to the new directory</a></li>
<li class="chapter" data-level="4.1.4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#import-data-files"><i class="fa fa-check"></i><b>4.1.4</b> Import data files</a></li>
<li class="chapter" data-level="4.1.5" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#check-and-convert-data-types"><i class="fa fa-check"></i><b>4.1.5</b> Check and convert data types</a></li>
<li class="chapter" data-level="4.1.6" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#close-a-project-when-you-are-done"><i class="fa fa-check"></i><b>4.1.6</b> Close a project when you are done</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#reading-files-directly-using-read.table"><i class="fa fa-check"></i><b>4.2</b> Reading files directly using read.table</a></li>
<li class="chapter" data-level="4.3" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#general-procedure-to-read-data-into-r"><i class="fa fa-check"></i><b>4.3</b> General procedure to read data into R:</a></li>
<li class="chapter" data-level="4.4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#enter-data-manually"><i class="fa fa-check"></i><b>4.4</b> Enter data manually</a></li>
<li class="chapter" data-level="4.5" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#data-manipulation-in-a-data-frame"><i class="fa fa-check"></i><b>4.5</b> Data manipulation in a data frame</a></li>
<li class="chapter" data-level="4.6" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#data-transformation-using-the-dplyr"><i class="fa fa-check"></i><b>4.6</b> Data transformation using the dplyr</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html"><i class="fa fa-check"></i><b>5</b> The heart attack data set (I)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#begin-your-analysis-by-examining-each-column-separately"><i class="fa fa-check"></i><b>5.1</b> Begin your analysis by examining each column separately</a></li>
<li class="chapter" data-level="5.2" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#possible-correlation-between-two-numeric-columns"><i class="fa fa-check"></i><b>5.2</b> Possible correlation between two numeric columns?</a></li>
<li class="chapter" data-level="5.3" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-categorical-variables"><i class="fa fa-check"></i><b>5.3</b> Associations between categorical variables?</a></li>
<li class="chapter" data-level="5.4" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-a-categorical-and-a-numeric-variables"><i class="fa fa-check"></i><b>5.4</b> Associations between a categorical and a numeric variables?</a></li>
<li class="chapter" data-level="5.5" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-multiple-columns"><i class="fa fa-check"></i><b>5.5</b> Associations between multiple columns?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html"><i class="fa fa-check"></i><b>6</b> The heart attack dataset (II)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#scatter-plot-in-ggplot2"><i class="fa fa-check"></i><b>6.1</b> Scatter plot in ggplot2</a></li>
<li class="chapter" data-level="6.2" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>6.2</b> Histograms and density plots</a></li>
<li class="chapter" data-level="6.3" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#box-plots-and-violin-plots"><i class="fa fa-check"></i><b>6.3</b> Box plots and Violin plots</a></li>
<li class="chapter" data-level="6.4" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#bar-plot-with-error-bars"><i class="fa fa-check"></i><b>6.4</b> Bar plot with error bars</a></li>
<li class="chapter" data-level="6.5" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#statistical-models-are-easy-interpretations-and-verifications-are-not"><i class="fa fa-check"></i><b>6.5</b> Statistical models are easy; interpretations and verifications are not!</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>7</b> Advanced topics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="advanced-topics.html"><a href="advanced-topics.html#introduction-to-r-markdown"><i class="fa fa-check"></i><b>7.1</b> Introduction to R Markdown</a></li>
<li class="chapter" data-level="7.2" data-path="advanced-topics.html"><a href="advanced-topics.html#tidyverse"><i class="fa fa-check"></i><b>7.2</b> Tidyverse</a></li>
<li class="chapter" data-level="7.3" data-path="advanced-topics.html"><a href="advanced-topics.html#interactive-plots-made-easy-with-plotly"><i class="fa fa-check"></i><b>7.3</b> Interactive plots made easy with Plotly</a></li>
<li class="chapter" data-level="7.4" data-path="advanced-topics.html"><a href="advanced-topics.html#shiny-apps"><i class="fa fa-check"></i><b>7.4</b> Shiny Apps</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="advanced-topics.html"><a href="advanced-topics.html#install-the-shiny-package-by-typing-this-in-the-console."><i class="fa fa-check"></i><b>7.4.1</b> Install the Shiny package by typing this in the console.</a></li>
<li class="chapter" data-level="7.4.2" data-path="advanced-topics.html"><a href="advanced-topics.html#create-a-shiny-web-app-is-a-piece-of-cake"><i class="fa fa-check"></i><b>7.4.2</b> Create a Shiny web app is a piece of cake</a></li>
<li class="chapter" data-level="7.4.3" data-path="advanced-topics.html"><a href="advanced-topics.html#lets-play"><i class="fa fa-check"></i><b>7.4.3</b> Let’s play!</a></li>
<li class="chapter" data-level="7.4.4" data-path="advanced-topics.html"><a href="advanced-topics.html#publish-your-app"><i class="fa fa-check"></i><b>7.4.4</b> Publish your app</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="advanced-topics.html"><a href="advanced-topics.html#define-your-own-function"><i class="fa fa-check"></i><b>7.5</b> Define your own function</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="the-state-dataset.html"><a href="the-state-dataset.html"><i class="fa fa-check"></i><b>8</b> The state dataset</a>
<ul>
<li class="chapter" data-level="8.1" data-path="the-state-dataset.html"><a href="the-state-dataset.html#reading-in-and-manipulating-data"><i class="fa fa-check"></i><b>8.1</b> Reading in and manipulating data</a></li>
<li class="chapter" data-level="8.2" data-path="the-state-dataset.html"><a href="the-state-dataset.html#visualizing-data"><i class="fa fa-check"></i><b>8.2</b> Visualizing data</a></li>
<li class="chapter" data-level="8.3" data-path="the-state-dataset.html"><a href="the-state-dataset.html#analyzing-the-relationship-among-variables"><i class="fa fa-check"></i><b>8.3</b> Analyzing the relationship among variables</a></li>
<li class="chapter" data-level="8.4" data-path="the-state-dataset.html"><a href="the-state-dataset.html#the-whole-picture-of-the-data-set"><i class="fa fa-check"></i><b>8.4</b> The whole picture of the data set</a></li>
<li class="chapter" data-level="8.5" data-path="the-state-dataset.html"><a href="the-state-dataset.html#linear-model-analysis"><i class="fa fa-check"></i><b>8.5</b> Linear model analysis</a></li>
<li class="chapter" data-level="8.6" data-path="the-state-dataset.html"><a href="the-state-dataset.html#conclusion"><i class="fa fa-check"></i><b>8.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html"><i class="fa fa-check"></i><b>9</b> The game sales dataset</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#reading-in-data-and-manage-data"><i class="fa fa-check"></i><b>9.1</b> Reading in data and manage data</a></li>
<li class="chapter" data-level="9.2" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#visualization-of-categorical-variables"><i class="fa fa-check"></i><b>9.2</b> Visualization of categorical variables</a></li>
<li class="chapter" data-level="9.3" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#correlation-among-numeric-variables"><i class="fa fa-check"></i><b>9.3</b> Correlation among numeric variables</a></li>
<li class="chapter" data-level="9.4" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#analysis-of-score-and-count"><i class="fa fa-check"></i><b>9.4</b> Analysis of score and count</a></li>
<li class="chapter" data-level="9.5" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#analysis-of-sales"><i class="fa fa-check"></i><b>9.5</b> Analysis of sales</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-year.release"><i class="fa fa-check"></i><b>9.5.1</b> By Year.Release</a></li>
<li class="chapter" data-level="9.5.2" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-region"><i class="fa fa-check"></i><b>9.5.2</b> By Region</a></li>
<li class="chapter" data-level="9.5.3" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-rating"><i class="fa fa-check"></i><b>9.5.3</b> By Rating</a></li>
<li class="chapter" data-level="9.5.4" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-genre"><i class="fa fa-check"></i><b>9.5.4</b> By Genre</a></li>
<li class="chapter" data-level="9.5.5" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-score"><i class="fa fa-check"></i><b>9.5.5</b> by Score</a></li>
<li class="chapter" data-level="9.5.6" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-rating-genre-critic-score"><i class="fa fa-check"></i><b>9.5.6</b> By Rating &amp; Genre &amp; Critic score</a></li>
<li class="chapter" data-level="9.5.7" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-platform"><i class="fa fa-check"></i><b>9.5.7</b> By Platform</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#effect-of-platform-type-to-priciple-components"><i class="fa fa-check"></i><b>9.6</b> Effect of platform type to priciple components</a></li>
<li class="chapter" data-level="9.7" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#models-for-global-sales"><i class="fa fa-check"></i><b>9.7</b> Models for global sales</a></li>
<li class="chapter" data-level="9.8" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#conclusion-1"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html"><i class="fa fa-check"></i><b>10</b> The messy salary data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#read-in-and-clean-data"><i class="fa fa-check"></i><b>10.1</b> Read in and clean data</a></li>
<li class="chapter" data-level="10.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#information-about-the-variables"><i class="fa fa-check"></i><b>10.2</b> Information about the variables</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#income-and-age"><i class="fa fa-check"></i><b>10.2.1</b> Income and age</a></li>
<li class="chapter" data-level="10.2.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-group"><i class="fa fa-check"></i><b>10.2.2</b> Ethnic group</a></li>
<li class="chapter" data-level="10.2.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#sex"><i class="fa fa-check"></i><b>10.2.3</b> Sex</a></li>
<li class="chapter" data-level="10.2.4" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#union-descreption"><i class="fa fa-check"></i><b>10.2.4</b> Union descreption</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#analysis-of-gross-income"><i class="fa fa-check"></i><b>10.3</b> Analysis of gross income</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#age"><i class="fa fa-check"></i><b>10.3.1</b> Age</a></li>
<li class="chapter" data-level="10.3.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#sex-1"><i class="fa fa-check"></i><b>10.3.2</b> Sex</a></li>
<li class="chapter" data-level="10.3.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-group-1"><i class="fa fa-check"></i><b>10.3.3</b> Ethnic Group</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#analysis-of-gross-income-type"><i class="fa fa-check"></i><b>10.4</b> Analysis of gross income type</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#gross-type"><i class="fa fa-check"></i><b>10.4.1</b> Gross Type</a></li>
<li class="chapter" data-level="10.4.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-and-sex-and-age"><i class="fa fa-check"></i><b>10.4.2</b> Ethnic and Sex and age</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#lm-and-anova-analysis"><i class="fa fa-check"></i><b>10.5</b> LM and ANOVA analysis</a></li>
<li class="chapter" data-level="10.6" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#conclusion-2"><i class="fa fa-check"></i><b>10.6</b> Conclusion</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learn R through examples</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data structures<a href="data-structures.html#data-structures" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Learning objectives:</p>
<ul>
<li>Basic concepts of R programming: functions and data objects</li>
<li>Looking for help documents within R and using Google</li>
<li>Common data objects: scalars, vectors, lists, data frames, and matrices</li>
</ul>
<p>R scripts mostly consist of function calls and data. There are many different types of data objects. Common <strong>data structures</strong> in R include <strong>scalars, vectors, factors, matrices, factors, data frames</strong>, and <strong>lists</strong>. These data structures can contain one or more individual data elements of several types, namely <strong>numeric</strong> (2.5), <strong>character</strong> (“Go Jacks”), or <strong>logical</strong> (TRUE or FALSE).</p>
<div id="basic-concepts" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Basic concepts<a href="data-structures.html#basic-concepts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="expressions" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Expressions<a href="data-structures.html#expressions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Type anything at the prompt, and R will evaluate it and print the answer.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-structures.html#cb116-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>There’s your result, <strong>2</strong>. It’s printed on the console right after your entry.</p>
<p>Type the string <strong>“Go Jacks”</strong>. (Don’t forget the quotes!)</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-structures.html#cb118-1" tabindex="-1"></a><span class="st">&quot;Go Jacks&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;Go Jacks&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-87}</p>
</blockquote>
<blockquote>
<p>Now try multiplying 45.6 by 78.9.
:::</p>
</blockquote>
</div>
<div id="logical-values" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Logical Values<a href="data-structures.html#logical-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some expressions return a “logical value” that take the value of either <strong>TRUE</strong> or <strong>FALSE</strong>. Many programming languages refer to these as “Boolean” values. Let’s try typing an expression that gives us a logical value:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-structures.html#cb120-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>And another logical value.:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-structures.html#cb122-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Note that you need a double-equal sign to check whether two values are equal - a single-equal sign won’t work.</p>
</div>
<div id="variables" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Variables<a href="data-structures.html#variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As in other programming languages, you can store a value into a variable to access it later. Type <strong>x = 42</strong> to store a value in <strong>x</strong>. x is a <strong>scalar that contains only one data element</strong>.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data-structures.html#cb124-1" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">42</span></span></code></pre></div>
<p>You can also use the following. This is a conventional, safer way to assign values.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-structures.html#cb125-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">42</span></span></code></pre></div>
<p>This is the recommended way of assignment, according to the <a href="https://google.github.io/styleguide/Rguide.xml">Google R style Guide.</a> But <code>x = 42</code> works fine in the vast majority of the times.</p>
<p>x can now be used in expressions in place of the original result. Try dividing <strong>x</strong> by <strong>2</strong> (
‘<strong>/</strong>’ is the division operator), and other calculations.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data-structures.html#cb126-1" tabindex="-1"></a>x <span class="sc">/</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data-structures.html#cb128-1" tabindex="-1"></a><span class="fu">log</span>(x)</span></code></pre></div>
<pre><code>## [1] 3.73767</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-structures.html#cb130-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 1764</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data-structures.html#cb132-1" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code></pre></div>
<pre><code>## [1] 6.480741</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data-structures.html#cb134-1" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>You can re-assign any value to a variable at any time. Try assigning <strong>“Go Jacks!”</strong> to <strong>x</strong>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data-structures.html#cb136-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;Go Jacks!&quot;</span></span></code></pre></div>
<p>You can print the value of a variable at any time just by typing its name in the console. Try printing the current value of x.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data-structures.html#cb137-1" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;Go Jacks!&quot;</code></pre>
<p>Now try assigning the <strong>TRUE</strong> logical value to <strong>x</strong>.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="data-structures.html#cb139-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code></pre></div>
<p>You can store multiple values in a variable or object. That is called a <strong>vector</strong>, which is explained later. An object can also contain a table with rows and columns, like an Excel spreadsheet, as a <strong>matrix</strong>, or <strong>data frame</strong>. These are explained in the next section.</p>
</div>
<div id="functions" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Functions<a href="data-structures.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Functions are fundamental building blocks of R. Most of the times when we run R commands, we are calling and executing functions. You call a function by typing its name, followed by one or more arguments to that function in parenthesis. Let’s try using the <strong>sum</strong> function, to add up a few numbers. For example:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data-structures.html#cb140-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>The following code shows how to assign the result of a function to a new variable:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data-structures.html#cb142-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb142-2"><a href="data-structures.html#cb142-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>Some arguments have “names”. For example, to repeat a value 3 times, you would call the <strong>rep</strong> function and provide its <strong>times</strong> argument:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data-structures.html#cb144-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="st">&quot;Yo ho!&quot;</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Yo ho!&quot; &quot;Yo ho!&quot; &quot;Yo ho!&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-99}</p>
</blockquote>
<blockquote>
<p>Suppose a vector is defined as x &lt;- c(12, 56, 31, -5, 7).<br />
a. Calculate the mean of all elements in x and assign it to <em>y</em>.<br />
b. Square each element in x and assign the results to a new vector <em>z</em>.<br />
:::</p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-100}</p>
</blockquote>
<blockquote>
<p>Use Google to find functions which set and get the current working directory in R, respectively.
:::</p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-101}</p>
</blockquote>
<blockquote>
<p>Use Google to find the function which lists all the files in the current working folder in R.
:::</p>
</blockquote>
<p>Often we want to re-use a chunk of code. The most efficient way is to wrap these code as a function, clearly define what the input and the output. Tested and documented R functions are often available as R packages. You can also define your own functions, which will be explained later.</p>
</div>
<div id="looking-for-help-and-example-code" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Looking for help and example Code<a href="data-structures.html#looking-for-help-and-example-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="data-structures.html#cb146-1" tabindex="-1"></a>? sum </span></code></pre></div>
<p>A document will pop up in the Help Window. See the Figure <a href="data-structures.html#fig:ch3-1">3.1</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3-1"></span>
<img src="images/Ch3_1.png" alt="Help in formation on the sum function." width="60%" />
<p class="caption">
Figure 3.1: Help in formation on the sum function.
</p>
</div>
<p>At the bottom of the page is some example code. See the Figure <a href="data-structures.html#fig:ch3-2">3.2</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3-2"></span>
<img src="images/Ch3_2.png" alt="Examples of sum code" width="60%" />
<p class="caption">
Figure 3.2: Examples of sum code
</p>
</div>
<p>The quickest way to learn an R function is to run the example codes and see the input and output. You can easily copy, paste, and twist the example code to do your analysis.</p>
<p><strong>example()</strong> brings up examples of usage for the given function. Try the examples for the min function:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data-structures.html#cb147-1" tabindex="-1"></a><span class="fu">example</span>(min)</span></code></pre></div>
<pre><code>## 
## min&gt; require(stats); require(graphics)
## 
## min&gt;  min(5:1, pi) #-&gt; one number
## [1] 1
## 
## min&gt; pmin(5:1, pi) #-&gt;  5  numbers
## [1] 3.141593 3.141593 3.000000 2.000000 1.000000
## 
## min&gt; x &lt;- sort(rnorm(100));  cH &lt;- 1.35
## 
## min&gt; pmin(cH, quantile(x)) # no names
## [1] -3.51913285 -0.78037729  0.03076838  0.88038368  1.35000000
## 
## min&gt; pmin(quantile(x), cH) # has names
##          0%         25%         50%         75%        100% 
## -3.51913285 -0.78037729  0.03076838  0.88038368  1.35000000 
## 
## min&gt; plot(x, pmin(cH, pmax(-cH, x)), type = &quot;b&quot;, main =  &quot;Huber&#39;s function&quot;)</code></pre>
<pre><code>## 
## min&gt; cut01 &lt;- function(x) pmax(pmin(x, 1), 0)
## 
## min&gt; curve(      x^2 - 1/4, -1.4, 1.5, col = 2)</code></pre>
<pre><code>## 
## min&gt; curve(cut01(x^2 - 1/4), col = &quot;blue&quot;, add = TRUE, n = 500)
## 
## min&gt; ## pmax(), pmin() preserve attributes of *first* argument
## min&gt; D &lt;- diag(x = (3:1)/4) ; n0 &lt;- numeric()
## 
## min&gt; stopifnot(identical(D,  cut01(D) ),
## min+           identical(n0, cut01(n0)),
## min+           identical(n0, cut01(NULL)),
## min+           identical(n0, pmax(3:1, n0, 2)),
## min+           identical(n0, pmax(n0, 4)))</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data-structures.html#cb151-1" tabindex="-1"></a><span class="fu">min</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">1</span>, pi)  <span class="co"># -&gt; one number</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Example commands and plots will show up automatically by typing Return in RStudio.
In R, you need to click on the plots.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data-structures.html#cb153-1" tabindex="-1"></a><span class="fu">example</span>(boxplot)  <span class="co"># bring example of boxplot</span></span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-105-1.png" width="672" /></p>
<p>I found a lot of help information about R through Google. Google tolerate typos, grammar errors, and different notations. Also, most (99 %) of your questions have been asked and answered on various forums. Many R gurus answered a ton of questions on web sites like** <a href="stackoverflow.com">stackoverflow.com</a>**, with example codes! I also use Google as a reference.</p>
<p>It is important to add comments to your code. Everything after the “#” will be ignored by R when running. We often recycle and re-purpose our codes.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="data-structures.html#cb154-1" tabindex="-1"></a><span class="fu">max</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)  <span class="co"># return the maximum value of a vector</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="data-structures-1" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data structures<a href="data-structures.html#data-structures-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="vectors" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Vectors<a href="data-structures.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A vector is an object that holds a sequence of values of the same type. A vector’s values can be numbers, strings, logical values, or any other type, as long as they’re all the same type. They can come from a column of a data frame. if we have a vector x:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-structures.html#cb156-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb156-2"><a href="data-structures.html#cb156-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  5  2 22 11  5</code></pre>
<p>Here <strong>c</strong> stands for <em>concatenate</em>, do not use it as a variable name. It is as special as you!</p>
<p>Vectors can not hold values with different modes (types). Try mixing modes and see what happens:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="data-structures.html#cb158-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">TRUE</span>, <span class="st">&quot;three&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;     &quot;TRUE&quot;  &quot;three&quot;</code></pre>
<p>All the values were converted to a single mode (characters) so that the vector can hold them all. To hold diverse types of values, you will need a <strong>list</strong>, which is explained later in this chapter.</p>
<p>If you need a vector with a sequence of numbers you can create it with <strong>start:end</strong> notation. This is often used in loops and operations on the indices of vectors etc. Let’s make a vector with values from 5 through 9:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="data-structures.html#cb160-1" tabindex="-1"></a><span class="dv">5</span><span class="sc">:</span><span class="dv">9</span></span></code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p>A more versatile way to make sequences is to call the <strong>seq</strong> function. Let’s do the same thing with <strong>seq</strong>:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-structures.html#cb162-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5</span>, <span class="at">to =</span> <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p>seq also allows you to use increments other than 1. Try it with steps of 0.5:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="data-structures.html#cb164-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">by =</span> .<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 5.0 5.5 6.0 6.5 7.0 7.5 8.0 8.5 9.0</code></pre>
<p>Create a sequence from 5 to 9 with length 15:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-structures.html#cb166-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">length =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] 5.000000 5.285714 5.571429 5.857143 6.142857 6.428571 6.714286 7.000000
##  [9] 7.285714 7.571429 7.857143 8.142857 8.428571 8.714286 9.000000</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-113}</p>
</blockquote>
<blockquote>
<p>Compute 1+2+3… +1000 with one line of R code. Hint: examine the example code for sum( ) function in the R help document.
:::</p>
</blockquote>
<div id="vectors-operations" class="section level4 hasAnchor" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Vectors operations<a href="data-structures.html#vectors-operations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First let’s find out what is the 4th element of our vector x &lt;- c(5, 2, 22, 11, 5), or the elements from 2 to 4.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-structures.html#cb168-1" tabindex="-1"></a>x[<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-structures.html#cb170-1" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>If you define the vector as y,</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-structures.html#cb172-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<p>No result is returned but you “captured” the result in a new vector, which holds 3 numbers. You can type y and hit enter to see the results. Or do some computing with it.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data-structures.html#cb173-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]; y</span></code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>This does exactly the same in one line. A semicolon separates multiple commands.</p>
<p>Now if we want to know the number of elements in the vector.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data-structures.html#cb175-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>It’s also easy to know about the maximum, minimum, sum, mean and median individually or together. We can get standard deviation too.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data-structures.html#cb177-1" tabindex="-1"></a><span class="fu">max</span>(x)</span></code></pre></div>
<pre><code>## [1] 22</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data-structures.html#cb179-1" tabindex="-1"></a><span class="fu">min</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data-structures.html#cb181-1" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 45</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-structures.html#cb183-1" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-structures.html#cb185-1" tabindex="-1"></a><span class="fu">median</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-structures.html#cb187-1" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##       2       5       5       9      11      22</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data-structures.html#cb189-1" tabindex="-1"></a><span class="fu">sd</span>(x)</span></code></pre></div>
<pre><code>## [1] 7.968689</code></pre>
<p>rank() function ranks the elements. Ties are shown as the average of these ranks. While sort() will sort from the smallest to the biggest, decreasing = T will make it sort from the biggest to the smallest.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data-structures.html#cb191-1" tabindex="-1"></a><span class="fu">rank</span>(x)</span></code></pre></div>
<pre><code>## [1] 2.5 1.0 5.0 4.0 2.5</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="data-structures.html#cb193-1" tabindex="-1"></a><span class="fu">sort</span>(x)</span></code></pre></div>
<pre><code>## [1]  2  5  5 11 22</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data-structures.html#cb195-1" tabindex="-1"></a><span class="fu">sort</span>(x, <span class="at">decreasing =</span> T)</span></code></pre></div>
<pre><code>## [1] 22 11  5  5  2</code></pre>
<p>diff() lag and iterate the differences of vector x.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="data-structures.html#cb197-1" tabindex="-1"></a><span class="fu">diff</span>(x)</span></code></pre></div>
<pre><code>## [1]  -3  20 -11  -6</code></pre>
<p>rev() will reverse the position of the elements in the vector.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="data-structures.html#cb199-1" tabindex="-1"></a><span class="fu">rev</span>(x)</span></code></pre></div>
<pre><code>## [1]  5 11 22  2  5</code></pre>
<p>Operations are performed element by element. Same for log, sqrt, x^2, etc. They return vectors too.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="data-structures.html#cb201-1" tabindex="-1"></a><span class="fu">log</span>(x)</span></code></pre></div>
<pre><code>## [1] 1.6094379 0.6931472 3.0910425 2.3978953 1.6094379</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data-structures.html#cb203-1" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code></pre></div>
<pre><code>## [1] 2.236068 1.414214 4.690416 3.316625 2.236068</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="data-structures.html#cb205-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  25   4 484 121  25</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="data-structures.html#cb207-1" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span>x <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 11  5 45 23 11</code></pre>
<p>If we don’t want the second element and save it as y:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="data-structures.html#cb209-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb209-2"><a href="data-structures.html#cb209-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1]  5 22 11  5</code></pre>
<p>Add an element 100 to the vector x between the second and the third element:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="data-structures.html#cb211-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)     </span>
<span id="cb211-2"><a href="data-structures.html#cb211-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(x[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="dv">100</span>, x[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] )  <span class="co">#add an element 100 to x between elements 8 and 9</span></span>
<span id="cb211-3"><a href="data-structures.html#cb211-3" tabindex="-1"></a>x                          <span class="co">#The value 100 is added to the previous vector x </span></span></code></pre></div>
<pre><code>## [1]   5   2 100  22  11   5</code></pre>
<p>Length of the new created x is:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="data-structures.html#cb213-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>To add a new element to the end, we can use the two commands below, they generate same result.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="data-structures.html#cb215-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>) </span>
<span id="cb215-2"><a href="data-structures.html#cb215-2" tabindex="-1"></a><span class="fu">c</span>(x, <span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1]  5  2 22 11  5  7</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="data-structures.html#cb217-1" tabindex="-1"></a><span class="fu">append</span>(x, <span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1]  5  2 22 11  5  7</code></pre>
<p>Create an empty vector y:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="data-structures.html#cb219-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb219-2"><a href="data-structures.html#cb219-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="data-structures.html#cb221-1" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Sometimes we are interested in unique elements:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="data-structures.html#cb223-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>) </span>
<span id="cb223-2"><a href="data-structures.html#cb223-2" tabindex="-1"></a><span class="fu">unique</span>(x)</span></code></pre></div>
<pre><code>## [1]  5  2 22 11</code></pre>
<p>And the frequencies of the unique elements:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="data-structures.html#cb225-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb225-2"><a href="data-structures.html#cb225-2" tabindex="-1"></a><span class="fu">table</span>(x)</span></code></pre></div>
<pre><code>## x
##  2  5 11 22 
##  1  2  1  1</code></pre>
<p>If we are interested in the index of the maximum or minimum:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="data-structures.html#cb227-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb227-2"><a href="data-structures.html#cb227-2" tabindex="-1"></a><span class="fu">which.max</span>(x)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="data-structures.html#cb229-1" tabindex="-1"></a><span class="fu">which.min</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Or we need to look for the location of a special value:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="data-structures.html#cb231-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb231-2"><a href="data-structures.html#cb231-2" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">==</span> <span class="dv">11</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Or more complicated, we want to find the locations where <span class="math inline">\(x^2&gt;100\)</span>:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="data-structures.html#cb233-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb233-2"><a href="data-structures.html#cb233-2" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  25   4 484 121  25</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="data-structures.html#cb235-1" tabindex="-1"></a><span class="fu">which</span> (x<span class="sc">^</span><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<p>We can randomly select some elements from the vector. Run the following code more than once, do you always get the same results? The answer is “No”. Because the 3 elements are randomly selected.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="data-structures.html#cb237-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb237-2"><a href="data-structures.html#cb237-2" tabindex="-1"></a><span class="fu">sample</span>(x, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1]  5 22  5</code></pre>
<p>Elements in the vector can have names. Type “x” in the command window to see the difference.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="data-structures.html#cb239-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb239-2"><a href="data-structures.html#cb239-2" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;David&quot;</span>, <span class="st">&quot;Beck&quot;</span>, <span class="st">&quot;Zach&quot;</span>, <span class="st">&quot;Amy&quot;</span>, <span class="st">&quot;John&quot;</span>)</span>
<span id="cb239-3"><a href="data-structures.html#cb239-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## David  Beck  Zach   Amy  John 
##     5     2    22    11     5</code></pre>
<p>Now we can refer to the elements by their names.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="data-structures.html#cb241-1" tabindex="-1"></a>x[<span class="st">&quot;Amy&quot;</span>]</span></code></pre></div>
<pre><code>## Amy 
##  11</code></pre>
<p>The <em>any()</em> and <em>all()</em> functions produce logical values. They return if any of all of their arguments are TRUE.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="data-structures.html#cb243-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb243-2"><a href="data-structures.html#cb243-2" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="data-structures.html#cb245-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb245-2"><a href="data-structures.html#cb245-2" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="data-structures.html#cb247-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb247-2"><a href="data-structures.html#cb247-2" tabindex="-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="data-structures.html#cb249-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb249-2"><a href="data-structures.html#cb249-2" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="data-structures.html#cb251-1" tabindex="-1"></a>x<span class="sc">&gt;</span><span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<p>If we want to get a subset from a vector, there are multiple methods can be used.Here are some examples:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="data-structures.html#cb253-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb253-2"><a href="data-structures.html#cb253-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] NA  2 -4 NA  9 -1  5</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="data-structures.html#cb255-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[x <span class="sc">&lt;</span> <span class="dv">0</span>]</span>
<span id="cb255-2"><a href="data-structures.html#cb255-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] NA -4 NA -1</code></pre>
<p>There are annoying NAs in the vectors x and y. We can remove the NAs by using <strong>is.na()</strong> function.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="data-structures.html#cb257-1" tabindex="-1"></a>y<span class="ot">&lt;-</span>y[<span class="sc">!</span><span class="fu">is.na</span>(y)]   <span class="co">#Remove all NAs in y. Or equivalently, keep all NOT NAs in y. </span></span>
<span id="cb257-2"><a href="data-structures.html#cb257-2" tabindex="-1"></a>                  <span class="co"># The exclamation &#39;!&#39; in front of is.na() means NOT.</span></span>
<span id="cb257-3"><a href="data-structures.html#cb257-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] -4 -1</code></pre>
<p>Now the updated variable y contains only numerical values. All NAs have been removed. If we want to assign the new vector to a different variable, we can use the code below.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="data-structures.html#cb259-1" tabindex="-1"></a>z<span class="ot">&lt;-</span>y[<span class="sc">!</span><span class="fu">is.na</span>(y)]   <span class="co"># Assign the new vector without NAs to z.</span></span>
<span id="cb259-2"><a href="data-structures.html#cb259-2" tabindex="-1"></a>z                 <span class="co"># Print the new variable. </span></span></code></pre></div>
<pre><code>## [1] -4 -1</code></pre>
<p>We can also use the <em>subset()</em> function to get a “clean” data without NAs. For example:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="data-structures.html#cb261-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb261-2"><a href="data-structures.html#cb261-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">subset</span>(x, x <span class="sc">&lt;</span> <span class="dv">0</span>)</span>
<span id="cb261-3"><a href="data-structures.html#cb261-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] -4 -1</code></pre>
<p>Let’s talk more about the function <strong>is.na()</strong> which checks if a vector contains NA of not. Note that the result is a vector holding logical values. Do we have missing value in the vectors x and z?</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="data-structures.html#cb263-1" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>Sometimes, when working with sample data, a given value isn’t available. But it’s not a good idea to just throw those values out. R has a value that explicitly indicates a sample was not available: <strong>NA</strong>. Many functions that work with vectors treat this value specially.
For our x vector, try to get the sum of its values, and see what the result is:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="data-structures.html#cb265-1" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>The sum is considered “not available” by default because one of the vector’s values is <strong>NA</strong>. This is the responsible thing to do; R won’t just blithely add up the numbers without warning you about the incomplete data. We can explicitly tell <strong>sum</strong> (and many other functions) to remove <strong>NA</strong> values before they do their calculations, however.</p>
<p>Bring up documentation for the <strong>sum</strong> function:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="data-structures.html#cb267-1" tabindex="-1"></a>? sum</span></code></pre></div>
<p>As you see in the documentation, <strong>sum</strong> can take an optional named argument, <strong>na.rm</strong>. It’s set to <strong>FALSE</strong> by default, but if you set it to <strong>TRUE</strong>, all <strong>NA</strong> arguments will be removed from the vector before the calculation is performed. In other words, we can use the argument <strong>na.rm = T</strong> or <strong>na.rm = TRUE</strong> to ignore all NAs during calculations. For example:</p>
<p>Try calling <strong>sum</strong> again, with <strong>na.rm</strong> parameter set to <strong>TRUE</strong>:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="data-structures.html#cb268-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb268-2"><a href="data-structures.html#cb268-2" tabindex="-1"></a><span class="fu">sum</span>(x)                <span class="co"># The NAs are involved during the calculation.</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="data-structures.html#cb270-1" tabindex="-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># All NAs are ignored during the calculation.</span></span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-152}</p>
</blockquote>
<blockquote>
<p>Suppose a vector var1 &lt;- c(NA, 334, 566, 319, NA, -307).</p>
<ol style="list-style-type: lower-alpha">
<li>Obtain a new vector var2 which removes all NAs from var1.</li>
<li>Using the argument na.rm to calculate the mean of var1. Make sure you ignore all NAs.
:::</li>
</ol>
</blockquote>
<p>Let’s using examples to show the differences between NULL and NA.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="data-structures.html#cb272-1" tabindex="-1"></a><span class="co"># build up a vector of numbers greater than 10 in vector vec.x</span></span>
<span id="cb272-2"><a href="data-structures.html#cb272-2" tabindex="-1"></a>vec.x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">0</span>, <span class="dv">9</span>)</span>
<span id="cb272-3"><a href="data-structures.html#cb272-3" tabindex="-1"></a>z1 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb272-4"><a href="data-structures.html#cb272-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> vec.x) {</span>
<span id="cb272-5"><a href="data-structures.html#cb272-5" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">10</span>) z1 <span class="ot">&lt;-</span> <span class="fu">c</span>(z1, i)</span>
<span id="cb272-6"><a href="data-structures.html#cb272-6" tabindex="-1"></a>}</span>
<span id="cb272-7"><a href="data-structures.html#cb272-7" tabindex="-1"></a>z1</span></code></pre></div>
<pre><code>## [1] 40 11</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="data-structures.html#cb274-1" tabindex="-1"></a><span class="fu">length</span>(z1)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="data-structures.html#cb276-1" tabindex="-1"></a><span class="co"># build up a vector of numbers greater than 10 in vector vec.x</span></span>
<span id="cb276-2"><a href="data-structures.html#cb276-2" tabindex="-1"></a>vec.x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">0</span>, <span class="dv">9</span>)</span>
<span id="cb276-3"><a href="data-structures.html#cb276-3" tabindex="-1"></a>z2 <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb276-4"><a href="data-structures.html#cb276-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> vec.x) {</span>
<span id="cb276-5"><a href="data-structures.html#cb276-5" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">10</span>) z2 <span class="ot">&lt;-</span> <span class="fu">c</span>(z2, i)</span>
<span id="cb276-6"><a href="data-structures.html#cb276-6" tabindex="-1"></a>}</span>
<span id="cb276-7"><a href="data-structures.html#cb276-7" tabindex="-1"></a>z2</span></code></pre></div>
<pre><code>## [1] NA 40 11</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="data-structures.html#cb278-1" tabindex="-1"></a><span class="fu">length</span>(z2)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Comparing the length of z1 and z2, we know the NULL is counted as nonexistent, but the NA is counted as a missing value.</p>
<p>Let’s do some operations related to vectors. Firstly, we start from the operation between a vector and a scalar.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="data-structures.html#cb280-1" tabindex="-1"></a><span class="co"># Operation between x and a scalar</span></span>
<span id="cb280-2"><a href="data-structures.html#cb280-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb280-3"><a href="data-structures.html#cb280-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb280-4"><a href="data-structures.html#cb280-4" tabindex="-1"></a>x<span class="sc">+</span>y</span></code></pre></div>
<pre><code>## [1]  2  5  9 10 11</code></pre>
<p>As you can see, 1 is added to each element in x. The operation is equivalent to:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="data-structures.html#cb282-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb282-2"><a href="data-structures.html#cb282-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb282-3"><a href="data-structures.html#cb282-3" tabindex="-1"></a>x<span class="sc">+</span>y</span></code></pre></div>
<pre><code>## [1]  2  5  9 10 11</code></pre>
<p>The operation between vectors with the same length is element-wise. For example:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="data-structures.html#cb284-1" tabindex="-1"></a><span class="co"># two vectors with the same length</span></span>
<span id="cb284-2"><a href="data-structures.html#cb284-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb284-3"><a href="data-structures.html#cb284-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">15</span>)</span>
<span id="cb284-4"><a href="data-structures.html#cb284-4" tabindex="-1"></a>x<span class="sc">+</span>y</span></code></pre></div>
<pre><code>## [1]  2  6  8 12 25</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="data-structures.html#cb286-1" tabindex="-1"></a>x<span class="sc">*</span>y</span></code></pre></div>
<pre><code>## [1]   1   8   0  27 150</code></pre>
<p>If vectors have different length, then R will automatically <em>recycle</em> the shorter one, until it has the same length as the longer one. For example:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="data-structures.html#cb288-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb288-2"><a href="data-structures.html#cb288-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb288-3"><a href="data-structures.html#cb288-3" tabindex="-1"></a>x<span class="sc">+</span>y</span></code></pre></div>
<pre><code>## [1]  2  6  9 11 11</code></pre>
<p>y was <em>recycled</em>. In fact the real operation is showed below:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-structures.html#cb290-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb290-2"><a href="data-structures.html#cb290-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb290-3"><a href="data-structures.html#cb290-3" tabindex="-1"></a>x<span class="sc">+</span>y</span></code></pre></div>
<pre><code>## [1]  2  6  9 11 11</code></pre>
<p><em>ifelse()</em> function allows us to do conditional element selection. The usage is <em>ifelse(test, yes, no)</em>. The yes or no depends on the test is true or false. Here are two examples.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-structures.html#cb292-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb292-2"><a href="data-structures.html#cb292-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&#39;Positive&#39;</span>, <span class="st">&#39;Negative&#39;</span>)</span>
<span id="cb292-3"><a href="data-structures.html#cb292-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] &quot;Positive&quot; &quot;Negative&quot; &quot;Positive&quot; &quot;Negative&quot; &quot;Negative&quot; &quot;Positive&quot;</code></pre>
<p>In this example, the element in y is either ‘positive’ or ‘negative’. It depends on x greater than 0 or less than 0.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-structures.html#cb294-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="dv">6</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb294-2"><a href="data-structures.html#cb294-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">ifelse</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="fu">abs</span>(x), <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">1</span>) </span>
<span id="cb294-3"><a href="data-structures.html#cb294-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 7 9 6 3 2</code></pre>
<p>In this example, if an element in x is less than 0, then take the absolute value of the element. Otherwise, multiply the element by 2 then add 1.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-165}</p>
</blockquote>
<blockquote>
<p>Using sample selection function randomly select 10 integers from 1 to 100. Create a vector y which satisfies the following conditions: if an selected integer is an even number, then y returns ‘even’, otherwise y returns ‘odd’.
:::</p>
</blockquote>
<p>If we have two vectors and try to compare them with each other, we can use the match() function. It returns the positions of the first matches of its first argument in its second. For example:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-structures.html#cb296-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">3</span>)</span>
<span id="cb296-2"><a href="data-structures.html#cb296-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">11</span>, <span class="dv">8</span>)</span>
<span id="cb296-3"><a href="data-structures.html#cb296-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">match</span>(y, x)</span>
<span id="cb296-4"><a href="data-structures.html#cb296-4" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1]  1  4 NA</code></pre>
<p>The elements 5 and 8 in y locates at the first and fourth position of x respectively. The function ignores the other 5 which locates at the second position of x. The last element 8 in y is not found in x which returns an “NA”.</p>
</div>
<div id="an-example-usage-of-vectors" class="section level4 hasAnchor" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> An example usage of vectors<a href="data-structures.html#an-example-usage-of-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once upon a time, Tom, Jerry, and Mickey went fishing and they caught 7, 3, and 9 fishes, respectively. This information can be stored in a vector, like this:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-structures.html#cb298-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] 7 3 9</code></pre>
<p>The <strong>c()</strong> function creates a new vector by combining a set of values. If we want to continue to use the vector, we hold it in an object and give it a name:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="data-structures.html#cb300-1" tabindex="-1"></a>fishes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb300-2"><a href="data-structures.html#cb300-2" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>## [1] 7 3 9</code></pre>
<p><strong>fishes</strong> is a vector with 3 data elements. There are many functions that operate on vectors. You can plot the vector:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="data-structures.html#cb302-1" tabindex="-1"></a><span class="fu">barplot</span>(fishes)  <span class="co"># see figure 3.3A</span></span></code></pre></div>
<p>You can compute the total:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="data-structures.html#cb303-1" tabindex="-1"></a><span class="fu">sum</span>(fishes)</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
<p>We can access the individual elements by indices:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="data-structures.html#cb305-1" tabindex="-1"></a>fishes[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-172}</p>
</blockquote>
<blockquote>
<p>Did Mickey catch more fishes than Tom and Jerry combined? Write R code to verify this statement using the <strong>fishes</strong> vector and return a TRUE or FALSE value.
:::</p>
</blockquote>
<p>Jerry protested that the ¼ inch long fish he caught and released per fishing rules was not counted properly. We can change the values in the 2nd element directly by:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="data-structures.html#cb307-1" tabindex="-1"></a>fishes[<span class="dv">2</span>] <span class="ot">&lt;-</span> fishes[<span class="dv">2</span>] <span class="sc">+</span> <span class="dv">1</span> </span></code></pre></div>
<p>On the left side, we take the current value of the 2nd element, which is 3, and add an 1 to it. The result (4) is assigned back to the 2nd element itself. As a result, the 2nd element is increased by 1. This is not a math equation, but a value assignment operation. More rigorously, we should write this as fishes[2] <strong>&lt;-</strong> fishes[2] + 1</p>
<p>We can also directly overwrite the values.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="data-structures.html#cb308-1" tabindex="-1"></a>fishes[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb308-2"><a href="data-structures.html#cb308-2" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>## [1] 7 4 9</code></pre>
<p>They started a camp fire, and each ate 1 fish for dinner. Now the fishes left:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="data-structures.html#cb310-1" tabindex="-1"></a>fishes2 <span class="ot">&lt;-</span> fishes <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb310-2"><a href="data-structures.html#cb310-2" tabindex="-1"></a>fishes2</span></code></pre></div>
<pre><code>## [1] 6 3 8</code></pre>
<p>Most arithmetic operations work just as well on vectors as they do on single values. R subtracts 1 from each individual element. If you add a scalar (a single value) to a vector, the scalar will be added to each value in the vector, returning a new vector with the results.</p>
<p>While they are sleeping in their camping site, a fox stole 3 fishes from Jerry’s bucket, and 4 fishes from Mickey’s bucket. How many left?</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="data-structures.html#cb312-1" tabindex="-1"></a>stolen <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>)  <span class="co"># a new vector</span></span>
<span id="cb312-2"><a href="data-structures.html#cb312-2" tabindex="-1"></a>fishes2 <span class="sc">-</span> stolen</span></code></pre></div>
<pre><code>## [1] 6 0 4</code></pre>
<p>If you add or subtract two vectors of the same length, R will take the corresponding values from each vector and add or subtract them. The 0 is necessary to keep the vector length the same.</p>
<p>Proud of himself, Mickey wanted to make a 5ft x 5ft poster to show he is the best fisherman. Knowing that <strong>a picture is worth a thousand words</strong>, he learned R and started plotting. He absolutely needs his names on the plots. The data elements in a vector can have names or labels.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-structures.html#cb314-1" tabindex="-1"></a><span class="fu">names</span>(fishes) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Jerry&quot;</span>, <span class="st">&quot;Mickey&quot;</span>)</span></code></pre></div>
<p>The right side is a vector, holding 3 character values. These values are assigned as the names of the 3 elements in the fishes vector. names is a built-in function. Our vector looks like:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="data-structures.html#cb315-1" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>##    Tom  Jerry Mickey 
##      7      4      9</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="data-structures.html#cb317-1" tabindex="-1"></a><span class="fu">barplot</span>(fishes)   <span class="co"># see figure 3.3B</span></span></code></pre></div>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:6-1"></span>
<img src="images/img0601_fish.png" alt="Simple Bar plot" width="80%" />
<p class="caption">
Figure 3.3: Simple Bar plot
</p>
</div>
<p>Assigning names for a vector also enables us to use labels to access each element. Try getting the value for Jerry:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="data-structures.html#cb318-1" tabindex="-1"></a>fishes[<span class="st">&quot;Jerry&quot;</span>]</span></code></pre></div>
<pre><code>## Jerry 
##     4</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-180}</p>
</blockquote>
<blockquote>
<p>Using the name rather than the index in the vector fisher, assign a character ‘Ten’ to <strong>Tom</strong>.
:::</p>
</blockquote>
<p>Tom proposes that their goal for their next fishing trip is to double their catches.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="data-structures.html#cb320-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> fishes</span></code></pre></div>
<pre><code>##    Tom  Jerry Mickey 
##     14      8     18</code></pre>
<p>Hopelessly optimistic, Jerry proposed that next time each should “square” their catches, so that together they may feed the entire school.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="data-structures.html#cb322-1" tabindex="-1"></a><span class="fu">sum</span>(fishes <span class="sc">^</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 146</code></pre>
<p>Note that two operations are nested. You can obviously do it in two steps.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-183}</p>
</blockquote>
<blockquote>
<p>Create a vector representing the prices of groceries, bread $2.5, milk $3.1, jam $5.3, beer $9.1. And create a bar plot to represent this information.
:::</p>
</blockquote>
</div>
<div id="scatter-plots-of-two-vectors" class="section level4 hasAnchor" number="3.2.1.3">
<h4><span class="header-section-number">3.2.1.3</span> Scatter Plots of two vectors<a href="data-structures.html#scatter-plots-of-two-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <strong>plot</strong> function takes two vectors, one for X values and one for Y values, and draws a graph of them. Let’s draw a graph showing the relationship of numbers and their sines.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="data-structures.html#cb324-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="fl">0.1</span>)</span>
<span id="cb324-2"><a href="data-structures.html#cb324-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x)</span></code></pre></div>
<p>Then simply call plot with your two vectors:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="data-structures.html#cb325-1" tabindex="-1"></a><span class="fu">plot</span>(x, y)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
<p>Great job! Notice on the graph that values from the first argument (x) are used for the horizontal axis, and values from the second (y) for the vertical.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-186}</p>
</blockquote>
<blockquote>
<p>Create a vector with 21 integers from -10 to 10, and store it in the x variable. Then create a scatter plot of x^2 against x.
:::</p>
</blockquote>
</div>
</div>
<div id="matrices" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Matrices<a href="data-structures.html#matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>A matrix</strong> is a two-dimensional data structure in R programming. Internally, a matrix is also a vector, but with two additional attributes: the number of rows and the number of columns. A matrix has rows and columns, but it can only contain one type of values, i.e. numbers, characters, or logical values.</p>
<p>We can create a matrix by using <em>rbind</em> or <em>cbind</em> function. <em>rbind</em> combine all rows.
Here are two examples:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="data-structures.html#cb326-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">15</span>)) <span class="co"># combine vectors by row</span></span>
<span id="cb326-2"><a href="data-structures.html#cb326-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    5
## [2,]   10   13   15</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="data-structures.html#cb328-1" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">15</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>)) <span class="co"># combine vectors by column</span></span>
<span id="cb328-2"><a href="data-structures.html#cb328-2" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3   10    3
## [2,]    4   13    2
## [3,]    5   15    1</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="data-structures.html#cb330-1" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">rbind</span>(m,n)      <span class="co">#combine two matrices m and n by row</span></span>
<span id="cb330-2"><a href="data-structures.html#cb330-2" tabindex="-1"></a>s</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    5
## [2,]   10   13   15
## [3,]    3   10    3
## [4,]    4   13    2
## [5,]    5   15    1</code></pre>
<p>To use <em>rbind()</em> combining matrices by row, the matrices must have the same number of columns. Similar to <em>cbind()</em>, the matrices must have same number of rows.</p>
<p>We can also create a matrix by using the <em>matrix()</em> function:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="data-structures.html#cb332-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb332-2"><a href="data-structures.html#cb332-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<p>The argument <em>seq()</em> create a sequence from 1 to 12, <em>nrow()</em> define the number of rows in the matrix, <em>ncol()</em> define the number of columns in the matrix. We don’t have to give both <em>nrow()</em> and <em>ncol()</em> since if one is provided, the other is inferred from the length of the data.</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="data-structures.html#cb334-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb334-2"><a href="data-structures.html#cb334-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<p>As we can see that, the matrix is filled in column-wise by default. If you want to fill a matrix by row-wise, add the <em>byrow = TRUE</em> to the argument:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="data-structures.html#cb336-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)    <span class="co"># fill matrix row-wise</span></span>
<span id="cb336-2"><a href="data-structures.html#cb336-2" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9
## [4,]   10   11   12</code></pre>
<p>The following code will create an empty matrix w:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="data-structures.html#cb338-1" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb338-2"><a href="data-structures.html#cb338-2" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   NA   NA   NA
## [2,]   NA   NA   NA
## [3,]   NA   NA   NA
## [4,]   NA   NA   NA</code></pre>
<p>We can assign values to the matrix. For example, let’s assign the value 3 to the position at first row and first column and value 100 to the position of the second row and third column:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="data-structures.html#cb340-1" tabindex="-1"></a>w[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb340-2"><a href="data-structures.html#cb340-2" tabindex="-1"></a>w[<span class="dv">2</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb340-3"><a href="data-structures.html#cb340-3" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3   NA   NA
## [2,]   NA   NA  100
## [3,]   NA   NA   NA
## [4,]   NA   NA   NA</code></pre>
<p>We can also create a matrix from a vector by setting its dimension using function <em>dim()</em>.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="data-structures.html#cb342-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">76</span>)</span>
<span id="cb342-2"><a href="data-structures.html#cb342-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  5  6  9  8 10 21 15 76</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="data-structures.html#cb344-1" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="data-structures.html#cb346-1" tabindex="-1"></a><span class="fu">dim</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb346-2"><a href="data-structures.html#cb346-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   21
## [2,]    5    8   15
## [3,]    6   10   76</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="data-structures.html#cb348-1" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>We can convert a non-matrix data set to a matrix using <em>as.matrix()</em> function. Take the data <em>iris</em> as an example.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="data-structures.html#cb350-1" tabindex="-1"></a>subset.iris <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb350-2"><a href="data-structures.html#cb350-2" tabindex="-1"></a><span class="fu">class</span>(subset.iris)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>The data structure of <em>subset.iris</em> is a data frame. The function <em>as.matrix</em> will transfer a data frame to a matrix.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="data-structures.html#cb352-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(subset.iris)</span>
<span id="cb352-2"><a href="data-structures.html#cb352-2" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>Various matrix operation can be applied in R. For example:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="data-structures.html#cb354-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb354-2"><a href="data-structures.html#cb354-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="data-structures.html#cb356-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span>                         <span class="co">#Squared each element in x</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   25
## [2,]    4   16   36</code></pre>
<p>You can transform the matrix if you want, for the convenience of view and analysis.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="data-structures.html#cb358-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">t</span>(x)                <span class="co"># transpose of x</span></span>
<span id="cb358-2"><a href="data-structures.html#cb358-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="data-structures.html#cb360-1" tabindex="-1"></a>x <span class="sc">%*%</span> y                  <span class="co"># Matrix Multiplication</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   35   44
## [2,]   44   56</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="data-structures.html#cb362-1" tabindex="-1"></a>x <span class="sc">-</span> y                   <span class="co"># Matrix subtraction</span></span></code></pre></div>
<p>Error in x - y : non-conformable arrays</p>
<p>The error reminders us that the matrices for subtraction must have same dimensions.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="data-structures.html#cb363-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>)    </span>
<span id="cb363-2"><a href="data-structures.html#cb363-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    1    1
## [2,]    1    1    1</code></pre>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="data-structures.html#cb365-1" tabindex="-1"></a>x <span class="sc">-</span> y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    2    4
## [2,]    1    3    5</code></pre>
<p>We can produce a new matrix by each element is doubled and added 5</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="data-structures.html#cb367-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb367-2"><a href="data-structures.html#cb367-2" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    7   11   15
## [2,]    9   13   17</code></pre>
<p>We can also get a logical matrix using logical code like:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="data-structures.html#cb369-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">34</span>, <span class="dv">51</span>, <span class="dv">27</span>, <span class="dv">26</span>, <span class="dv">10</span>), <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb369-2"><a href="data-structures.html#cb369-2" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">20</span></span></code></pre></div>
<pre><code>##       [,1]  [,2]
## [1,] FALSE  TRUE
## [2,]  TRUE  TRUE
## [3,]  TRUE FALSE</code></pre>
<p>We can extract all <em>TRUE</em> results from x by using <em>x[x&gt;20]</em>.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="data-structures.html#cb371-1" tabindex="-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">20</span>]</span></code></pre></div>
<pre><code>## [1] 34 51 27 26</code></pre>
<p>Similar we can define a vector with logical values, then apply it to x to get all TRUE values.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="data-structures.html#cb373-1" tabindex="-1"></a>log.vau <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb373-2"><a href="data-structures.html#cb373-2" tabindex="-1"></a>x[log.vau]</span></code></pre></div>
<pre><code>## [1] 34 51 27 26</code></pre>
<p>Remember matrix is a vector, and filled by column-wise. Therefore the vector with logical values applies to x by column-wise order.</p>
<p>Since matrix is a vector with two dimensions, all operations for vectors also apply to matrix. For example:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="data-structures.html#cb375-1" tabindex="-1"></a>x[<span class="dv">1</span>, ]                         <span class="co"># Get the first row of x</span></span></code></pre></div>
<pre><code>## [1] 12 27</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="data-structures.html#cb377-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(iris[, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])   <span class="co">#Take out the first 4 columns of iris and convert it to matrix.  </span></span>
<span id="cb377-2"><a href="data-structures.html#cb377-2" tabindex="-1"></a>c <span class="ot">&lt;-</span> a[<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]             <span class="co"># Extract a subset</span></span>
<span id="cb377-3"><a href="data-structures.html#cb377-3" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>##      Sepal.Width Petal.Length Petal.Width
## [1,]         3.6          1.4         0.2
## [2,]         3.9          1.7         0.4
## [3,]         3.4          1.4         0.3
## [4,]         3.4          1.5         0.2
## [5,]         2.9          1.4         0.2
## [6,]         3.1          1.5         0.1</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="data-structures.html#cb379-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb379-2"><a href="data-structures.html#cb379-2" tabindex="-1"></a>c[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ] <span class="ot">&lt;-</span> x                 <span class="co"># Replace the first two rows of c with x</span></span>
<span id="cb379-3"><a href="data-structures.html#cb379-3" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>##      Sepal.Width Petal.Length Petal.Width
## [1,]         1.0          3.0         5.0
## [2,]         2.0          4.0         6.0
## [3,]         3.4          1.4         0.3
## [4,]         3.4          1.5         0.2
## [5,]         2.9          1.4         0.2
## [6,]         3.1          1.5         0.1</code></pre>
<p>Now if we want to know the mean and sum of these rows and columns, try <em>rowMeans()</em>, <em>colMeans()</em>, <em>rowSums()</em>, <em>colSums()</em>.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="data-structures.html#cb381-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb381-2"><a href="data-structures.html#cb381-2" tabindex="-1"></a><span class="fu">rowMeans</span>(x)</span></code></pre></div>
<pre><code>##     1     2     3     4     5     6     7     8     9    10 
## 2.550 2.375 2.350 2.350 2.550 2.850 2.425 2.525 2.225 2.400</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="data-structures.html#cb383-1" tabindex="-1"></a><span class="fu">colMeans</span>(x)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##         4.86         3.31         1.45         0.22</code></pre>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="data-structures.html#cb385-1" tabindex="-1"></a><span class="fu">rowSums</span>(x)</span></code></pre></div>
<pre><code>##    1    2    3    4    5    6    7    8    9   10 
## 10.2  9.5  9.4  9.4 10.2 11.4  9.7 10.1  8.9  9.6</code></pre>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="data-structures.html#cb387-1" tabindex="-1"></a><span class="fu">colSums</span>(x)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##         48.6         33.1         14.5          2.2</code></pre>
<p>Here we are computing the standard deviation by columns, using <em>apply()</em> function.The second argument “1” or “2” in <em>apply()</em> represents the function applies to rows or columns.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="data-structures.html#cb389-1" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, sd) <span class="co"># Calculate the standard deviation of each column in x </span></span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##   0.29135698   0.30713732   0.10801234   0.07888106</code></pre>
<p>Or median by rows, using 1 for rows.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="data-structures.html#cb391-1" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">1</span>, median)  <span class="co"># Calculate the median of each row in x </span></span></code></pre></div>
<pre><code>##    1    2    3    4    5    6    7    8    9   10 
## 2.45 2.20 2.25 2.30 2.50 2.80 2.40 2.45 2.15 2.30</code></pre>
<p>Heat map is my favorite type of graph for visualizing a large matrix data.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="data-structures.html#cb393-1" tabindex="-1"></a><span class="fu">heatmap</span>(x, <span class="at">scale =</span> <span class="st">&quot;column&quot;</span>, <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">5</span>))</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-221-1.png" width="672" /></p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-222}</p>
</blockquote>
<blockquote>
<p>Let <em>subset.iris &lt;- as.matrix(iris[1:10, 1:4])</em>, Using apply function to calculate the mean of <em>subset.iris</em> by column.
:::</p>
</blockquote>
<p><strong>Example:</strong>
Define a function to find the positions of minimal value in each column of <em>subset.iris &lt;- as.matrix(iris[1:10, 1:4])</em>.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="data-structures.html#cb394-1" tabindex="-1"></a>find.min.posi <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb394-2"><a href="data-structures.html#cb394-2" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="cf">function</span>(xcol){</span>
<span id="cb394-3"><a href="data-structures.html#cb394-3" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">which.min</span>(xcol))</span>
<span id="cb394-4"><a href="data-structures.html#cb394-4" tabindex="-1"></a>  }</span>
<span id="cb394-5"><a href="data-structures.html#cb394-5" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, y))</span>
<span id="cb394-6"><a href="data-structures.html#cb394-6" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="data-structures.html#cb395-1" tabindex="-1"></a>subset.iris <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb395-2"><a href="data-structures.html#cb395-2" tabindex="-1"></a>subset.iris</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1           5.1         3.5          1.4         0.2
## 2           4.9         3.0          1.4         0.2
## 3           4.7         3.2          1.3         0.2
## 4           4.6         3.1          1.5         0.2
## 5           5.0         3.6          1.4         0.2
## 6           5.4         3.9          1.7         0.4
## 7           4.6         3.4          1.4         0.3
## 8           5.0         3.4          1.5         0.2
## 9           4.4         2.9          1.4         0.2
## 10          4.9         3.1          1.5         0.1</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="data-structures.html#cb397-1" tabindex="-1"></a><span class="fu">find.min.posi</span>(subset.iris)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##            9            9            3           10</code></pre>
<p>As you can see that the minimal value for Sepal.Length is 4.4 which locates at the 9th row. The minimal value locates at the 9th, 3rd and 10th row for Sepal.Width, Petal.Length and Petal.Width respectively.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-226}</p>
</blockquote>
<blockquote>
<p>Let <em>subset.iris.2 &lt;- as.matrix(iris[, 1:4])</em>, fill blanks in the <em>find.max</em> function defined below to find the maximal value in each column of <em>subset.iris.2</em>.</p>
<p>find.max &lt;- function(x){<br />
y &lt;- function(xcol){<br />
return(_________)<br />
}<br />
return(_______(x, ____, y))<br />
}</p>
<p>________(subset.iris.2)<br />
:::</p>
</blockquote>
<p>To make a matrix more easily readable, we can use functions <em>colnames()</em> and <em>rownames()</em> to assign names to the columns and rows of the matrix. For example:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="data-structures.html#cb399-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>))</span>
<span id="cb399-2"><a href="data-structures.html#cb399-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="data-structures.html#cb401-1" tabindex="-1"></a><span class="fu">colnames</span>(y) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;First.Col&#39;</span>, <span class="st">&#39;Second.Col&#39;</span>, <span class="st">&#39;Third.Col&#39;</span>)</span>
<span id="cb401-2"><a href="data-structures.html#cb401-2" tabindex="-1"></a><span class="fu">row.names</span>(y) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;odd.number&#39;</span>, <span class="st">&#39;even.number&#39;</span>)</span>
<span id="cb401-3"><a href="data-structures.html#cb401-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##             First.Col Second.Col Third.Col
## odd.number          1          3         5
## even.number         2          4         6</code></pre>
<p>Another interesting application of the matrix is the manipulation of images. You may have heard a pixel matrix which represents “picture elements”. They are small little dots making up images. Each image is a matrix with thousands or even millions of pixels. Each pixel can only be one color at a time. If we have a gray-scale image, the brightness of color for each pixel is determined by the value assigned to it. In other words, the pixel value is a single number that represents the brightness of the pixel. For example, if the color value 0.2941 is assigned to a pixel which locates 3rd row and 4th column, then the dot at the 3rd row and the 4th column is pretty dark. The range of the colors from black to white correspond to the scale varies from 0% to 100%.</p>
<p>Sometimes we need to blur images or add mosaic to a picture for various purposes. Let’s use one example to demonstrate how to add mosaic to a gray-scale image.</p>
<p><strong>Example: Add mosaic to Einstein image</strong></p>
<p>Firstly, let’s read a gray-scale image of Einstein into R and view the image.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="data-structures.html#cb403-1" tabindex="-1"></a><span class="fu">library</span>(pixmap)</span>
<span id="cb403-2"><a href="data-structures.html#cb403-2" tabindex="-1"></a>EINSTEIN <span class="ot">&lt;-</span> <span class="fu">read.pnm</span>(<span class="st">&quot;images/EINSTEIN.pgm&quot;</span>, <span class="at">cellres =</span> <span class="dv">1</span>)</span>
<span id="cb403-3"><a href="data-structures.html#cb403-3" tabindex="-1"></a><span class="fu">plot</span>(EINSTEIN)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-229-1.png" width="672" /></p>
<p>Then let us look at structure of this image:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="data-structures.html#cb404-1" tabindex="-1"></a><span class="fu">str</span>(EINSTEIN)</span></code></pre></div>
<pre><code>## Formal class &#39;pixmapGrey&#39; [package &quot;pixmap&quot;] with 6 slots
##   ..@ grey    : num [1:512, 1:512] 0.596 0.541 0.522 0.529 0.561 ...
##   ..@ channels: chr &quot;grey&quot;
##   ..@ size    : int [1:2] 512 512
##   ..@ cellres : num [1:2] 1 1
##   ..@ bbox    : num [1:4] 0 0 512 512
##   ..@ bbcent  : logi FALSE</code></pre>
<p>Here we get a new class which is S4 type. We don’t go into depth for this time. One fact we need to pay attention is that we must use “@” instead of “$” sign to designate the components.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="data-structures.html#cb406-1" tabindex="-1"></a><span class="fu">class</span>(EINSTEIN<span class="sc">@</span> grey)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>The class of <em>EINSTEIN@ grey</em> is a matrix. The output <em>..@ grey : num [1:512, 1:512]</em> shows that the dimension of matrix is 512*512. The values “0.596 0.541 0.522 0.529 0.561 …” represent the brightness values in the matrix. For example, the value of the pixel at the 3rd row and the 4th column is 0.2941176 as shown below:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="data-structures.html#cb408-1" tabindex="-1"></a>EINSTEIN<span class="sc">@</span> grey[<span class="dv">3</span>,<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 0.2941176</code></pre>
<p>If we change the value 0.2941176 to 0 by <em>EINSTEIN@ grey[3,4] &lt;- 0</em>, then that pixel will become pure black. If we assign a random number between 0 to 1 to the value, then the color in the pixel will be randomly assigned based on the random number. Using this idea, we define a mosaic function which will be used to blur the image.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="data-structures.html#cb410-1" tabindex="-1"></a>mosaic.plot <span class="ot">&lt;-</span> <span class="cf">function</span>(image, yrange, xrange){</span>
<span id="cb410-2"><a href="data-structures.html#cb410-2" tabindex="-1"></a>  length.y <span class="ot">&lt;-</span> <span class="fu">length</span>(yrange)</span>
<span id="cb410-3"><a href="data-structures.html#cb410-3" tabindex="-1"></a>  length.x <span class="ot">&lt;-</span> <span class="fu">length</span>(xrange)</span>
<span id="cb410-4"><a href="data-structures.html#cb410-4" tabindex="-1"></a>  image2 <span class="ot">&lt;-</span> image</span>
<span id="cb410-5"><a href="data-structures.html#cb410-5" tabindex="-1"></a>  whitenoise <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> length.y, <span class="at">ncol =</span> length.x, <span class="fu">runif</span>(length.y <span class="sc">*</span> length.x))</span>
<span id="cb410-6"><a href="data-structures.html#cb410-6" tabindex="-1"></a>  image2<span class="sc">@</span>grey[yrange, xrange] <span class="ot">&lt;-</span> whitenoise</span>
<span id="cb410-7"><a href="data-structures.html#cb410-7" tabindex="-1"></a>  <span class="fu">return</span>(image2)</span>
<span id="cb410-8"><a href="data-structures.html#cb410-8" tabindex="-1"></a>}</span></code></pre></div>
<p>The argument <em>image</em> is the original image, <em>yrange</em> is the range of rows that you want to blur, <em>xrange</em> is the range of columns that you want to blur. The <em>xrange</em> and <em>yrange</em> construct the mosaic region. Since we don’t want to change the original image, therefore we copy the original image to image2. The <em>whitenoise</em> creates a matrix filled with random numbers following a uniform distribution. The dimensions of <em>whitenoise</em> are determined by the mosaic region. Replace the values in the original image that you want to blur <em><a href="mailto:image2@grey" class="email">image2@grey</a>[yrange,xrange]</em> by the <em>whitenoise</em> matrix.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="data-structures.html#cb411-1" tabindex="-1"></a>EINSTEIN.mosaic <span class="ot">&lt;-</span> <span class="fu">mosaic.plot</span>(EINSTEIN, <span class="dv">175</span><span class="sc">:</span><span class="dv">249</span>, <span class="dv">118</span><span class="sc">:</span><span class="dv">295</span>)</span>
<span id="cb411-2"><a href="data-structures.html#cb411-2" tabindex="-1"></a><span class="fu">plot</span>(EINSTEIN.mosaic)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-234-1.png" width="672" /></p>
<p>Here, we take <em>yrange=175:249</em> and <em>xrange=118:295</em> to select a sub-matrix from 175th row to 249th row, and 118th column to 295th column. This sub-matrix stores the color values of Einstein’ eyes region. The sub-matrix is replaced by whitenoise matrix. Therefore the image near the eyes region is replaced by image of random dots.</p>
<p>The function <em>locator()</em> allows us to find the relevant rows and columns. Type <strong>locator()</strong> in the <em>Console</em> window, then R will wait for you to click a point within an image. Click <em>esc</em> on your keyboard to exit the function, then the function will return the coordinates of that point in the <em>Console</em> window. If you click more points once, then the function will return all coordinates of these points sorted by your clicking order. You must be careful about the y-coordinate. The row numbers in <em>pixmap</em> objects increase from the top of the image to the bottom, therefore you need to opposite the y-coordinate by subtracting them from the number of rows in the original image. For example, the y-coordinates that I obtained from <em>locator()</em> function are 337 and 263. After subtracting them from 512, I got 175 and 249. They are the yrange used in the mosaic function.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-235}</p>
</blockquote>
<blockquote>
<p>Using the <em>mosaic.plot()</em> function to blur the image of mona_lisa.pgm by adding mosaic to her eyes region. Your output should look like the graph below.
:::</p>
<p><img src="book_files/figure-html/unnamed-chunk-236-1.png" width="672" /></p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-237}</p>
</blockquote>
<blockquote>
<p>Fill in blanks of the following function so that the eyes region of Mona Lisa is covered by pure color, not mosaic.<br />
mosaic.plot.2 &lt;- function(picture, yrange, xrange, degree){<br />
length.y &lt;- _______(yrange)<br />
length.x &lt;- length(______)<br />
pic2 &lt;- picture<br />
pic2@____[_______,_______] &lt;- degree<br />
return(pic2)<br />
}<br />
Setting the degree=0, 0.5 and 1 respectively, plot the images of Mona Lisa that eyes region are covered by pure colors.
:::</p>
</blockquote>
</div>
<div id="data-frames" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Data Frames<a href="data-structures.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Similar to a matrix, a data frame is a two-dimensional array-like structure. But it differs from the matrix in that the mode of each column could be different. In fact, a data frame is a special case of a two-dimensional list. The data set <em>iris</em> that we analyzed before is a data frame.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="data-structures.html#cb412-1" tabindex="-1"></a><span class="fu">class</span>(iris)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="data-structures.html#cb414-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>There are some properties of a data frame. Firstly, the mode for each column in a data frame can be of numeric, factor or character. Such as the class of Sepal.Length is numeric, and the class of Species is factor.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="data-structures.html#cb416-1" tabindex="-1"></a><span class="fu">class</span>(iris<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="data-structures.html#cb418-1" tabindex="-1"></a><span class="fu">class</span>(iris<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>Secondly, the column names must be non-empty. Usually, the columns represent various variables in a statistical problem. There are 5 column names or variables in the <em>iris</em> data set, they are Sepal.Length, Sepal.Width, Petal.Length, Petal.Width, and Species respectively.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="data-structures.html#cb420-1" tabindex="-1"></a><span class="fu">colnames</span>(iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<p>Thirdly, each column should contain the same number of data items. In other words, each variable contains the same observations.</p>
<p>Fourthly, the row names are unique. If they are not pre-named, the indices “1”, “2”, “3”, <span class="math inline">\(\cdots\)</span>, “n” will be assigned to each row, where “n” is the length of a row or the number of observations. For example, there are 150 observations for each variable in the <em>iris</em> data, the rows names are shown below:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="data-structures.html#cb422-1" tabindex="-1"></a><span class="fu">rownames</span>(iris)</span></code></pre></div>
<pre><code>##   [1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   &quot;10&quot;  &quot;11&quot;  &quot;12&quot; 
##  [13] &quot;13&quot;  &quot;14&quot;  &quot;15&quot;  &quot;16&quot;  &quot;17&quot;  &quot;18&quot;  &quot;19&quot;  &quot;20&quot;  &quot;21&quot;  &quot;22&quot;  &quot;23&quot;  &quot;24&quot; 
##  [25] &quot;25&quot;  &quot;26&quot;  &quot;27&quot;  &quot;28&quot;  &quot;29&quot;  &quot;30&quot;  &quot;31&quot;  &quot;32&quot;  &quot;33&quot;  &quot;34&quot;  &quot;35&quot;  &quot;36&quot; 
##  [37] &quot;37&quot;  &quot;38&quot;  &quot;39&quot;  &quot;40&quot;  &quot;41&quot;  &quot;42&quot;  &quot;43&quot;  &quot;44&quot;  &quot;45&quot;  &quot;46&quot;  &quot;47&quot;  &quot;48&quot; 
##  [49] &quot;49&quot;  &quot;50&quot;  &quot;51&quot;  &quot;52&quot;  &quot;53&quot;  &quot;54&quot;  &quot;55&quot;  &quot;56&quot;  &quot;57&quot;  &quot;58&quot;  &quot;59&quot;  &quot;60&quot; 
##  [61] &quot;61&quot;  &quot;62&quot;  &quot;63&quot;  &quot;64&quot;  &quot;65&quot;  &quot;66&quot;  &quot;67&quot;  &quot;68&quot;  &quot;69&quot;  &quot;70&quot;  &quot;71&quot;  &quot;72&quot; 
##  [73] &quot;73&quot;  &quot;74&quot;  &quot;75&quot;  &quot;76&quot;  &quot;77&quot;  &quot;78&quot;  &quot;79&quot;  &quot;80&quot;  &quot;81&quot;  &quot;82&quot;  &quot;83&quot;  &quot;84&quot; 
##  [85] &quot;85&quot;  &quot;86&quot;  &quot;87&quot;  &quot;88&quot;  &quot;89&quot;  &quot;90&quot;  &quot;91&quot;  &quot;92&quot;  &quot;93&quot;  &quot;94&quot;  &quot;95&quot;  &quot;96&quot; 
##  [97] &quot;97&quot;  &quot;98&quot;  &quot;99&quot;  &quot;100&quot; &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot; &quot;106&quot; &quot;107&quot; &quot;108&quot;
## [109] &quot;109&quot; &quot;110&quot; &quot;111&quot; &quot;112&quot; &quot;113&quot; &quot;114&quot; &quot;115&quot; &quot;116&quot; &quot;117&quot; &quot;118&quot; &quot;119&quot; &quot;120&quot;
## [121] &quot;121&quot; &quot;122&quot; &quot;123&quot; &quot;124&quot; &quot;125&quot; &quot;126&quot; &quot;127&quot; &quot;128&quot; &quot;129&quot; &quot;130&quot; &quot;131&quot; &quot;132&quot;
## [133] &quot;133&quot; &quot;134&quot; &quot;135&quot; &quot;136&quot; &quot;137&quot; &quot;138&quot; &quot;139&quot; &quot;140&quot; &quot;141&quot; &quot;142&quot; &quot;143&quot; &quot;144&quot;
## [145] &quot;145&quot; &quot;146&quot; &quot;147&quot; &quot;148&quot; &quot;149&quot; &quot;150&quot;</code></pre>
<p>We can create a data frame by using function <em>data.frame()</em> to combine vectors. For example:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="data-structures.html#cb424-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>)</span>
<span id="cb424-2"><a href="data-structures.html#cb424-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">32</span>, <span class="dv">13</span>, <span class="dv">89</span>)</span>
<span id="cb424-3"><a href="data-structures.html#cb424-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;TRUE&quot;</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="st">&quot;TRUE&quot;</span>)</span>
<span id="cb424-4"><a href="data-structures.html#cb424-4" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, y, z)</span>
<span id="cb424-5"><a href="data-structures.html#cb424-5" tabindex="-1"></a>df1</span></code></pre></div>
<p><img src="images/img0300_CharacterToFactor.png" style="display: block; margin: auto;" /></p>
<p>As you can see in the output, the <em>&lt;fctr&gt;</em> underneath the x means that the class of x has been changed from a character to a factor. So does the z. We can check the change by the <em>class()</em> function:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="data-structures.html#cb425-1" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="data-structures.html#cb427-1" tabindex="-1"></a><span class="fu">class</span>(df1<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>To keep the class of x unchanged after becoming a component of a data frame, we need an argument <em>stringsAsFactors = FALSE</em> in the <em>data.frame()</em> function.</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="data-structures.html#cb429-1" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, y, z, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb429-2"><a href="data-structures.html#cb429-2" tabindex="-1"></a>df2</span></code></pre></div>
<pre><code>##   x  y     z
## 1 A 41  TRUE
## 2 B 32 FALSE
## 3 C 13 FALSE
## 4 D 89  TRUE</code></pre>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="data-structures.html#cb431-1" tabindex="-1"></a><span class="fu">class</span>(df2<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-246}</p>
</blockquote>
<blockquote>
<p>What is the class of the R built-in data set <em>mtcars</em>? Show the function that you used to check the class.
:::</p>
</blockquote>
<p>Once data is read in as a <strong>data frame</strong>, these are many commands you can use to analyze it.</p>
<p>Read in data frame x:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="data-structures.html#cb433-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris</span></code></pre></div>
<p>Using summary() we can get descriptive statistics of each column.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="data-structures.html#cb434-1" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50  
##                 
##                 
## </code></pre>
<p>head() and tail() functions show the fist and last few rows.</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="data-structures.html#cb436-1" tabindex="-1"></a><span class="fu">head</span>(x)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="data-structures.html#cb438-1" tabindex="-1"></a><span class="fu">tail</span>(x)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p>If we want to know both number of rows and number of columns of the data frame:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="data-structures.html#cb440-1" tabindex="-1"></a><span class="fu">dim</span>(x)</span></code></pre></div>
<pre><code>## [1] 150   5</code></pre>
<p>We can just get number of rows or number of columns separately:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="data-structures.html#cb442-1" tabindex="-1"></a><span class="fu">nrow</span>(x)</span></code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="data-structures.html#cb444-1" tabindex="-1"></a><span class="fu">ncol</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>str() is a very useful function, which shows data types for all columns.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="data-structures.html#cb446-1" tabindex="-1"></a><span class="fu">str</span>(x)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Like matrix, we can select one element in a data frame. Let’s select the element in the second row and third column:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="data-structures.html#cb448-1" tabindex="-1"></a>x[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1.4</code></pre>
<p>Also we can subtract a subset data frame from x. For example, let’s select the columns 2 to 4 and rows 1 to 10:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="data-structures.html#cb450-1" tabindex="-1"></a>x[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##    Sepal.Width Petal.Length Petal.Width
## 1          3.5          1.4         0.2
## 2          3.0          1.4         0.2
## 3          3.2          1.3         0.2
## 4          3.1          1.5         0.2
## 5          3.6          1.4         0.2
## 6          3.9          1.7         0.4
## 7          3.4          1.4         0.3
## 8          3.4          1.5         0.2
## 9          2.9          1.4         0.2
## 10         3.1          1.5         0.1</code></pre>
<p>We can view the first column:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="data-structures.html#cb452-1" tabindex="-1"></a>x[, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
## [145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>Using the data frame name x followed with column name has the same effect.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="data-structures.html#cb454-1" tabindex="-1"></a>x<span class="sc">$</span>Sepal.Length</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
## [145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>The argument <em>drop=FALSE</em> will keep a one-column vector as a data frame. For example:</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="data-structures.html#cb456-1" tabindex="-1"></a><span class="fu">class</span>(x[, <span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="data-structures.html#cb458-1" tabindex="-1"></a><span class="fu">class</span>(x[, <span class="dv">1</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>If we need to know the average Sepal Length, we use mean() function. By the way, expressions can be nested.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="data-structures.html#cb460-1" tabindex="-1"></a><span class="fu">mean</span>(x<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>It’s very common to select a subset of data by certain column. The “==”, “&gt;”, and “&lt;” are logical operations and the “=” is an equality sign for assigning value. Let’s select a subset which contains only the species of setosa:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="data-structures.html#cb462-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">subset</span>(x, Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb462-2"><a href="data-structures.html#cb462-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Similar we can obtain a subset that the length of sepal are greater than 7.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="data-structures.html#cb464-1" tabindex="-1"></a><span class="fu">subset</span>(x, Sepal.Length <span class="sc">&gt;</span> <span class="dv">7</span>)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 103          7.1         3.0          5.9         2.1 virginica
## 106          7.6         3.0          6.6         2.1 virginica
## 108          7.3         2.9          6.3         1.8 virginica
## 110          7.2         3.6          6.1         2.5 virginica
## 118          7.7         3.8          6.7         2.2 virginica
## 119          7.7         2.6          6.9         2.3 virginica
## 123          7.7         2.8          6.7         2.0 virginica
## 126          7.2         3.2          6.0         1.8 virginica
## 130          7.2         3.0          5.8         1.6 virginica
## 131          7.4         2.8          6.1         1.9 virginica
## 132          7.9         3.8          6.4         2.0 virginica
## 136          7.7         3.0          6.1         2.3 virginica</code></pre>
<p>If there are more than one conditions are applied to the data, we use <em>&amp;</em> to connect the conditions. For example, we want to select a subset which contains only the species of virginica, and the sepals are more than 7cm long. We also want to remove the length of petal from the data:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="data-structures.html#cb466-1" tabindex="-1"></a>x<span class="fl">.3</span>conds <span class="ot">&lt;-</span> x[x<span class="sc">$</span>Sepal.Length<span class="sc">&gt;</span><span class="dv">7</span> <span class="sc">&amp;</span> x<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>, <span class="sc">-</span><span class="dv">3</span>]       <span class="co"># -3 means removing the 3rd column from x.</span></span></code></pre></div>
<blockquote>
<p>::: {.exercise #unnamed-chunk-262}</p>
</blockquote>
<blockquote>
<p>For data set <em>mtcars</em>, select a subset which satisfies that the <em>cyl</em> is 6 and <em>mpg</em> greater than 21.2. The subset should not include the variable <em>carb</em>.
:::</p>
</blockquote>
<p>We can add a new column named “id” to the data frame x, which goes from 1 to 150. Function <em>head()</em> is used to view the first 6 rows of the new data set.</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="data-structures.html#cb467-1" tabindex="-1"></a>x.id <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>), x)</span>
<span id="cb467-2"><a href="data-structures.html#cb467-2" tabindex="-1"></a><span class="fu">head</span>(x.id)</span></code></pre></div>
<pre><code>##   id Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1  1          5.1         3.5          1.4         0.2  setosa
## 2  2          4.9         3.0          1.4         0.2  setosa
## 3  3          4.7         3.2          1.3         0.2  setosa
## 4  4          4.6         3.1          1.5         0.2  setosa
## 5  5          5.0         3.6          1.4         0.2  setosa
## 6  6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Add another column of random numbers y to x.id.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="data-structures.html#cb469-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">150</span>)</span>
<span id="cb469-2"><a href="data-structures.html#cb469-2" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(y, x.id)</span>
<span id="cb469-3"><a href="data-structures.html#cb469-3" tabindex="-1"></a><span class="fu">head</span>(x2)</span></code></pre></div>
<pre><code>##             y id Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1  0.60971215  1          5.1         3.5          1.4         0.2  setosa
## 2  1.69702577  2          4.9         3.0          1.4         0.2  setosa
## 3 -0.40573906  3          4.7         3.2          1.3         0.2  setosa
## 4  0.31255966  4          4.6         3.1          1.5         0.2  setosa
## 5  2.84509289  5          5.0         3.6          1.4         0.2  setosa
## 6  0.03782243  6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Similar as cbind(), rbind() is for adding another exist row or rows with same length of columns. Now we use tail() to examine the result.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="data-structures.html#cb471-1" tabindex="-1"></a>newRow <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="st">&quot;setosa&quot;</span>, <span class="dv">151</span>)</span>
<span id="cb471-2"><a href="data-structures.html#cb471-2" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(x, newRow)</span></code></pre></div>
<pre><code>## Warning in rbind(deparse.level, ...): number of columns of result, 5, is not a
## multiple of vector length 6 of arg 2</code></pre>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="data-structures.html#cb473-1" tabindex="-1"></a><span class="fu">tail</span>(x3)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 146          6.7           3          5.2         2.3 virginica
## 147          6.3         2.5            5         1.9 virginica
## 148          6.5           3          5.2           2 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9           3          5.1         1.8 virginica
## 151            1           1            1           1    setosa</code></pre>
<p>We can sort the data frame by a certain column. For example, we need to sort by the first column in ascending, or to sort the second column in descending order.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="data-structures.html#cb475-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="fu">order</span>(x[, <span class="dv">1</span>]), ]</span>
<span id="cb475-2"><a href="data-structures.html#cb475-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 14          4.3         3.0          1.1         0.1  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 39          4.4         3.0          1.3         0.2  setosa
## 43          4.4         3.2          1.3         0.2  setosa
## 42          4.5         2.3          1.3         0.3  setosa
## 4           4.6         3.1          1.5         0.2  setosa</code></pre>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="data-structures.html#cb477-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="fu">rev</span>(<span class="fu">order</span>(x[, <span class="dv">2</span>])), ]</span>
<span id="cb477-2"><a href="data-structures.html#cb477-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 16          5.7         4.4          1.5         0.4  setosa
## 34          5.5         4.2          1.4         0.2  setosa
## 33          5.2         4.1          1.5         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 6           5.4         3.9          1.7         0.4  setosa</code></pre>
<p>We can view sepal length by species using boxplot.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="data-structures.html#cb479-1" tabindex="-1"></a><span class="fu">boxplot</span>(Sepal.Length <span class="sc">~</span> Species, x)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-267-1.png" width="672" /></p>
<p>We can obtain summary statistics by category. Let’s calculate the mean of the variables by species:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="data-structures.html#cb480-1" tabindex="-1"></a><span class="fu">aggregate</span>(. <span class="sc">~</span> Species, x, mean)</span></code></pre></div>
<pre><code>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     setosa        5.006       3.428        1.462       0.246
## 2 versicolor        5.936       2.770        4.260       1.326
## 3  virginica        6.588       2.974        5.552       2.026</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-269}</p>
</blockquote>
<blockquote>
<p>Use <em>aggregate()</em> function to calculate the median of the variables: <em>mpg</em>, <em>disp</em>, <em>hp</em>, and <em>wt</em> across the number of cylinders <em>cyl</em> in the <em>mtcars</em> data set.
:::</p>
</blockquote>
<p>It is easier to conduct statistical analysis after organizing data as a data frame. Analysis of variance, or ANOVA tests whether sepal length has significant difference among species.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="data-structures.html#cb482-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">aov</span>(Sepal.Length <span class="sc">~</span> Species, iris)</span>
<span id="cb482-2"><a href="data-structures.html#cb482-2" tabindex="-1"></a><span class="fu">summary</span>(m)</span></code></pre></div>
<pre><code>##              Df Sum Sq Mean Sq F value Pr(&gt;F)    
## Species       2  63.21  31.606   119.3 &lt;2e-16 ***
## Residuals   147  38.96   0.265                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The p-value is close to 0, therefore we reject the null hypothesis and conclude that the length of sepal among three species are not same.</p>
<p>We can use the <em>sapply()</em> function to do the ANOVA test for all of the 4 numeric variables across the species.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="data-structures.html#cb484-1" tabindex="-1"></a>aov.fun <span class="ot">&lt;-</span> <span class="cf">function</span>(temx){</span>
<span id="cb484-2"><a href="data-structures.html#cb484-2" tabindex="-1"></a>  m1 <span class="ot">&lt;-</span> <span class="fu">aov</span>(temx <span class="sc">~</span> iris<span class="sc">$</span>Species)</span>
<span id="cb484-3"><a href="data-structures.html#cb484-3" tabindex="-1"></a>  <span class="fu">summary</span>(m1)</span>
<span id="cb484-4"><a href="data-structures.html#cb484-4" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="data-structures.html#cb485-1" tabindex="-1"></a>nvar <span class="ot">&lt;-</span> iris[<span class="sc">-</span><span class="dv">5</span>]  <span class="co"># Remove the variable Species which lies at the 5th column in the data set.</span></span>
<span id="cb485-2"><a href="data-structures.html#cb485-2" tabindex="-1"></a>da <span class="ot">&lt;-</span> <span class="fu">sapply</span>(nvar, aov.fun)   <span class="co"># Apply the aov.fun() function to each of the variable in the data set nvar. </span></span>
<span id="cb485-3"><a href="data-structures.html#cb485-3" tabindex="-1"></a>da</span></code></pre></div>
<pre><code>## $Sepal.Length
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 63.212  31.606  119.26 &lt; 2.2e-16 ***
## Residuals    147 38.956   0.265                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## $Sepal.Width
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 11.345  5.6725   49.16 &lt; 2.2e-16 ***
## Residuals    147 16.962  0.1154                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## $Petal.Length
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 437.10 218.551  1180.2 &lt; 2.2e-16 ***
## Residuals    147  27.22   0.185                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## $Petal.Width
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 80.413  40.207  960.01 &lt; 2.2e-16 ***
## Residuals    147  6.157   0.042                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Regression analysis use linear model(lm) to analyze the relationship of these columns. Here we use sepal length as a function of sepal width and petal length plus error.</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="data-structures.html#cb487-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sepal.Length <span class="sc">~</span> Sepal.Width <span class="sc">+</span> Petal.Length, x)</span>
<span id="cb487-2"><a href="data-structures.html#cb487-2" tabindex="-1"></a><span class="fu">summary</span>(m)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Sepal.Length ~ Sepal.Width + Petal.Length, data = x)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.96159 -0.23489  0.00077  0.21453  0.78557 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   2.24914    0.24797    9.07 7.04e-16 ***
## Sepal.Width   0.59552    0.06933    8.59 1.16e-14 ***
## Petal.Length  0.47192    0.01712   27.57  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3333 on 147 degrees of freedom
## Multiple R-squared:  0.8402, Adjusted R-squared:  0.838 
## F-statistic: 386.4 on 2 and 147 DF,  p-value: &lt; 2.2e-16</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-274}</p>
</blockquote>
<blockquote>
<p>Test if the variables <em>mpg</em>, <em>disp</em>, <em>hp</em>, <em>wt</em> and <em>qsec</em> have significant difference across the three cyl in the R build data set <em>mtcars</em>. Fill the blanks and interpret your conclusion based on the p-values.</p>
<p>aov.fun.car &lt;- function(temx){<br />
m2 &lt;- ________(________ ~ _________$______)<br />
summary(________)<br />
}<br />
sub.car &lt;- mtcars[, ___________]<br />
aov.car &lt;- ___________(_________, __________)<br />
____________<br />
:::</p>
</blockquote>
<p>We can merge two data frames by the function <em>merge()</em>. Here are some examples:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="data-structures.html#cb489-1" tabindex="-1"></a>dfmg1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">V1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>), <span class="at">V2 =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">80</span>, <span class="dv">70</span>, <span class="dv">60</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb489-2"><a href="data-structures.html#cb489-2" tabindex="-1"></a>dfmg1</span></code></pre></div>
<pre><code>##   V1 V2
## 1  A 90
## 2  B 80
## 3  C 70
## 4  D 60</code></pre>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="data-structures.html#cb491-1" tabindex="-1"></a>dfmg2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">V1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">W2 =</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">85</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb491-2"><a href="data-structures.html#cb491-2" tabindex="-1"></a>dfmg2</span></code></pre></div>
<pre><code>##   V1 W2
## 1  A 95
## 2  C 85</code></pre>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="data-structures.html#cb493-1" tabindex="-1"></a><span class="fu">merge</span>(dfmg1, dfmg2)</span></code></pre></div>
<pre><code>##   V1 V2 W2
## 1  A 90 95
## 2  C 70 85</code></pre>
<p>Here the two data frames dfmg1 and dfmg2 have the same variable V1. After merging the two data frames, the rows with common elements “A” and “C” in both V1’s are selected. If two columns contain similar information, but they have different names in different data frames, then we can use <em>by.x</em> and <em>by.y</em> arguments to merge them. Let <em>by.x=</em> and <em>by.y=</em> specify the variable names in the first and second data frame respectively. See the example below.</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="data-structures.html#cb495-1" tabindex="-1"></a>dfmg3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">W1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">W2 =</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">85</span>, <span class="dv">65</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb495-2"><a href="data-structures.html#cb495-2" tabindex="-1"></a>dfmg3</span></code></pre></div>
<pre><code>##   W1 W2
## 1  A 95
## 2  F 85
## 3  C 65</code></pre>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="data-structures.html#cb497-1" tabindex="-1"></a><span class="fu">merge</span>(dfmg1, dfmg3, <span class="at">by.x=</span><span class="st">&quot;V1&quot;</span>, <span class="at">by.y=</span><span class="st">&quot;W1&quot;</span>)</span></code></pre></div>
<pre><code>##   V1 V2 W2
## 1  A 90 95
## 2  C 70 65</code></pre>
<p>We use data.frame() function to define a new data frame with 100 rows and two columns, <em>ids</em> and <em>rand</em>.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="data-structures.html#cb499-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">rand =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb499-2"><a href="data-structures.html#cb499-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##   id         rand
## 1  1  0.718407061
## 2  2  0.005022071
## 3  3  0.090572549
## 4  4  1.045520545
## 5  5 -1.950618528
## 6  6 -0.006623570</code></pre>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="data-structures.html#cb501-1" tabindex="-1"></a><span class="fu">tail</span>(y)</span></code></pre></div>
<pre><code>##      id       rand
## 95   95 -0.3591386
## 96   96 -0.4786300
## 97   97  1.5757145
## 98   98 -0.7294851
## 99   99 -2.1757465
## 100 100  0.5880886</code></pre>
<p>Now we merge two data frames x and y by a common column named <strong>id</strong>. Note the new data frame z has only 100 rows. We can also merge data frames by row names too.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="data-structures.html#cb503-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris</span>
<span id="cb503-2"><a href="data-structures.html#cb503-2" tabindex="-1"></a>x<span class="sc">$</span>id <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>)</span>
<span id="cb503-3"><a href="data-structures.html#cb503-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">merge</span>(x, y, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb503-4"><a href="data-structures.html#cb503-4" tabindex="-1"></a><span class="fu">head</span>(z)</span></code></pre></div>
<pre><code>##   id Sepal.Length Sepal.Width Petal.Length Petal.Width Species         rand
## 1  1          5.1         3.5          1.4         0.2  setosa  0.718407061
## 2  2          4.9         3.0          1.4         0.2  setosa  0.005022071
## 3  3          4.7         3.2          1.3         0.2  setosa  0.090572549
## 4  4          4.6         3.1          1.5         0.2  setosa  1.045520545
## 5  5          5.0         3.6          1.4         0.2  setosa -1.950618528
## 6  6          5.4         3.9          1.7         0.4  setosa -0.006623570</code></pre>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="data-structures.html#cb505-1" tabindex="-1"></a><span class="fu">tail</span>(z)</span></code></pre></div>
<pre><code>##      id Sepal.Length Sepal.Width Petal.Length Petal.Width    Species       rand
## 95   95          5.6         2.7          4.2         1.3 versicolor -0.3591386
## 96   96          5.7         3.0          4.2         1.2 versicolor -0.4786300
## 97   97          5.7         2.9          4.2         1.3 versicolor  1.5757145
## 98   98          6.2         2.9          4.3         1.3 versicolor -0.7294851
## 99   99          5.1         2.5          3.0         1.1 versicolor -2.1757465
## 100 100          5.7         2.8          4.1         1.3 versicolor  0.5880886</code></pre>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="data-structures.html#cb507-1" tabindex="-1"></a><span class="fu">summary</span>(z)</span></code></pre></div>
<pre><code>##        id          Sepal.Length    Sepal.Width     Petal.Length  
##  Min.   :  1.00   Min.   :4.300   Min.   :2.000   Min.   :1.000  
##  1st Qu.: 25.75   1st Qu.:5.000   1st Qu.:2.800   1st Qu.:1.500  
##  Median : 50.50   Median :5.400   Median :3.050   Median :2.450  
##  Mean   : 50.50   Mean   :5.471   Mean   :3.099   Mean   :2.861  
##  3rd Qu.: 75.25   3rd Qu.:5.900   3rd Qu.:3.400   3rd Qu.:4.325  
##  Max.   :100.00   Max.   :7.000   Max.   :4.400   Max.   :5.100  
##   Petal.Width          Species        rand         
##  Min.   :0.100   setosa    :50   Min.   :-2.17575  
##  1st Qu.:0.200   versicolor:50   1st Qu.:-0.54966  
##  Median :0.800   virginica : 0   Median :-0.03642  
##  Mean   :0.786                   Mean   : 0.01371  
##  3rd Qu.:1.300                   3rd Qu.: 0.59332  
##  Max.   :1.800                   Max.   : 2.45981</code></pre>
</div>
<div id="strings-and-string-vectors" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Strings and string vectors<a href="data-structures.html#strings-and-string-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We encounter text data sometimes. Plus, we also have row and column names. We can easily manipulate these string objects.</p>
<p>Define a <strong>string</strong> x: “R is cool”</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="data-structures.html#cb509-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;R is cool&quot;</span></span></code></pre></div>
<p>If we want to know the number of character of the string:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="data-structures.html#cb510-1" tabindex="-1"></a><span class="fu">nchar</span>(x)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>We can concatenate strings. By default, a space is added.</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="data-structures.html#cb512-1" tabindex="-1"></a><span class="fu">paste</span>(x, <span class="st">&quot;!!&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;R is cool !!&quot;</code></pre>
<p>If we want to extract sub-string from position of 6 and 9:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="data-structures.html#cb514-1" tabindex="-1"></a><span class="fu">substr</span>(x, <span class="dv">6</span>, <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] &quot;cool&quot;</code></pre>
<p>Split string into a list which is separated by space:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="data-structures.html#cb516-1" tabindex="-1"></a><span class="fu">strsplit</span>(x, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;R&quot;    &quot;is&quot;   &quot;cool&quot;</code></pre>
<p>Find pattern “R” and replace with “Tim”:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="data-structures.html#cb518-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;R&quot;</span>, <span class="st">&quot;Tim&quot;</span>, x)</span></code></pre></div>
<pre><code>## [1] &quot;Tim is cool&quot;</code></pre>
<p>Or remove space followed by anything:</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="data-structures.html#cb520-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot; .*&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;</code></pre>
<p>We can search for pattern like “is” in the string.</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="data-structures.html#cb522-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;is&quot;</span>, x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We can also convert the whole string into low case or upper case by “tolower” or “toupper” function.</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="data-structures.html#cb524-1" tabindex="-1"></a><span class="fu">tolower</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;r is cool&quot;</code></pre>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="data-structures.html#cb526-1" tabindex="-1"></a><span class="fu">toupper</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;R IS COOL&quot;</code></pre>
<p>A <strong>string vector</strong> can hold many strings. This can be a column of names or IDs in a table.
First let’s define a character vector <strong>x &lt;- c(“ab”, “cde”, “d”, “ab”)</strong>.</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="data-structures.html#cb528-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;cde&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;ab&quot;</span>) </span></code></pre></div>
<p>We can use all commands about vector for our string vector, such as 2nd element in vector:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="data-structures.html#cb529-1" tabindex="-1"></a>x[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;cde&quot;</code></pre>
<p>Number of strings in the vector:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="data-structures.html#cb531-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Unique elements:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="data-structures.html#cb533-1" tabindex="-1"></a><span class="fu">unique</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;ab&quot;  &quot;cde&quot; &quot;d&quot;</code></pre>
<p>Now we are interested in the duplicated element in the string vector. Is there any duplicated element in the vector?</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="data-structures.html#cb535-1" tabindex="-1"></a><span class="fu">duplicated</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>The last element is duplicated.</p>
<p>If we want to know the number of characters in each of the element:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="data-structures.html#cb537-1" tabindex="-1"></a><span class="fu">nchar</span>(x)</span></code></pre></div>
<pre><code>## [1] 2 3 1 2</code></pre>
<p>We can also unite two vectors x and y if we define another vector y first:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="data-structures.html#cb539-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;e&quot;</span>)</span>
<span id="cb539-2"><a href="data-structures.html#cb539-2" tabindex="-1"></a><span class="fu">union</span>(x, y)</span></code></pre></div>
<pre><code>## [1] &quot;ab&quot;  &quot;cde&quot; &quot;d&quot;   &quot;e&quot;</code></pre>
<p>Is there intercept among these two sets of strings?</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="data-structures.html#cb541-1" tabindex="-1"></a><span class="fu">intersect</span>(x, y)</span></code></pre></div>
<pre><code>## [1] &quot;ab&quot;</code></pre>
<p>We can add something like “Q” to each element:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="data-structures.html#cb543-1" tabindex="-1"></a><span class="fu">paste</span>(x, <span class="st">&quot;Q&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ab Q&quot;  &quot;cde Q&quot; &quot;d Q&quot;   &quot;ab Q&quot;</code></pre>
<p>To get rid of the space between these elements and “Q”, try paste0:</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="data-structures.html#cb545-1" tabindex="-1"></a><span class="fu">paste0</span>(x, <span class="st">&quot;Q&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;abQ&quot;  &quot;cdeQ&quot; &quot;dQ&quot;   &quot;abQ&quot;</code></pre>
<p>If we want to collapse multiple strings into one, which is joined by space:</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="data-structures.html#cb547-1" tabindex="-1"></a><span class="fu">paste</span>(x, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ab cde d ab&quot;</code></pre>
<p>Using these functions, we can achieve many things. For example, if we have a piece of DNA sequence:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="data-structures.html#cb549-1" tabindex="-1"></a>DNA <span class="ot">&lt;-</span> <span class="st">&quot;taaCCATTGtaaGAACATGGTTGTCcaaaCAAGATGCTAGT&quot;</span></span></code></pre></div>
<p>Note that I am using the assignment operator “&lt;-”, instead of “=”, which also works most of the times but it could be ambiguous. First we need to convert everything to upper case.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="data-structures.html#cb550-1" tabindex="-1"></a>DNA <span class="ot">&lt;-</span> <span class="fu">toupper</span>(DNA)</span></code></pre></div>
<p>Next, we want to cut this DNA into smaller pieces by looking for a certain pattern “ATG”. This type of thing happens in nature, as some enzymes cut DNA according to a certain pattern.</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="data-structures.html#cb551-1" tabindex="-1"></a>segs <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(DNA, <span class="st">&quot;ATG&quot;</span>)</span></code></pre></div>
<p>The result is contained in an object segs, which is a list. We need the unlist( ) function to convert list to a string vector.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="data-structures.html#cb552-1" tabindex="-1"></a>segs <span class="ot">&lt;-</span> <span class="fu">unlist</span>(segs)   </span>
<span id="cb552-2"><a href="data-structures.html#cb552-2" tabindex="-1"></a>segs  <span class="co"># a vector of strings</span></span></code></pre></div>
<pre><code>## [1] &quot;TAACCATTGTAAGAAC&quot; &quot;GTTGTCCAAACAAG&quot;   &quot;CTAGT&quot;</code></pre>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="data-structures.html#cb554-1" tabindex="-1"></a>segs[<span class="dv">1</span>]  <span class="co"># first segment</span></span></code></pre></div>
<pre><code>## [1] &quot;TAACCATTGTAAGAAC&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-303}</p>
</blockquote>
<blockquote>
<p>In the iris flower dataset iris, define a new column called FullName which contains the full species name by adding “Iris“ in front of species name. In other words, “setosa” should become “Iris setosa”, “virginica” would be “Iris virginica”, and “versicolor” needs to be “Iris versicolor”.
:::</p>
</blockquote>
<p>Some of the materials above have been inspired by <a href="http://tryr.codeschool.com/">http://tryr.codeschool.com/</a>, which contains more in-depth introduction.</p>
</div>
<div id="lists" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Lists<a href="data-structures.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All elements in vectors must be of same type. Overcomming this limitation, a list can combine objects of different types. Let’s start from creating a list:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="data-structures.html#cb556-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">5</span>, <span class="st">&quot;John Doe&quot;</span>, <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">7</span>), mean) <span class="co"># a list with 4 components</span></span>
<span id="cb556-2"><a href="data-structures.html#cb556-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [[1]]
## [1] 5
## 
## [[2]]
## [1] &quot;John Doe&quot;
## 
## [[3]]
## [1] 100   7
## 
## [[4]]
## function (x, ...) 
## UseMethod(&quot;mean&quot;)
## &lt;bytecode: 0x000002b136cbf708&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>There are 4 components in the list y. We can associate each components with a <em>tag</em>. We add tags “height”, “name”, “BP” and “fun” to the y.</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="data-structures.html#cb558-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">5</span>, <span class="at">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="at">BP =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">77</span>), <span class="at">fun =</span> mean)  </span>
<span id="cb558-2"><a href="data-structures.html#cb558-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $height
## [1] 5
## 
## $name
## [1] &quot;John Doe&quot;
## 
## $BP
## [1] 100  77
## 
## $fun
## function (x, ...) 
## UseMethod(&quot;mean&quot;)
## &lt;bytecode: 0x000002b136cbf708&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>Here is another example for creating a list:</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="data-structures.html#cb560-1" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">9</span>), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="co"># create a matrix</span></span>
<span id="cb560-2"><a href="data-structures.html#cb560-2" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">:</span> <span class="dv">1</span></span>
<span id="cb560-3"><a href="data-structures.html#cb560-3" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.4</span>, <span class="fl">5.1</span>, <span class="fl">9.0</span>, <span class="fl">4.4</span>)</span>
<span id="cb560-4"><a href="data-structures.html#cb560-4" tabindex="-1"></a>x4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;u&#39;</span>, <span class="st">&#39;v&#39;</span>, <span class="st">&#39;w&#39;</span>)</span>
<span id="cb560-5"><a href="data-structures.html#cb560-5" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(x1, x2, x3, x4)</span>
<span id="cb560-6"><a href="data-structures.html#cb560-6" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2] [,3]
## [1,]    4    5   10
## [2,]    2    6    9
## 
## [[2]]
## [1] 8 7 6 5 4 3 2 1
## 
## [[3]]
## [1] 2.4 5.1 9.0 4.4
## 
## [[4]]
## [1] &quot;u&quot; &quot;v&quot; &quot;w&quot;</code></pre>
<p>We can build a list by creating an empty list and assigning values to it.</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="data-structures.html#cb562-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">list</span>()         <span class="co">#Create an empty list</span></span>
<span id="cb562-2"><a href="data-structures.html#cb562-2" tabindex="-1"></a>v[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">9</span>), <span class="at">ncol =</span> <span class="dv">3</span>)  <span class="co"># Assign a matrix to v[[1]]</span></span>
<span id="cb562-3"><a href="data-structures.html#cb562-3" tabindex="-1"></a>v[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">:</span> <span class="dv">1</span>    <span class="co">#Assign a vector to v[[2]]</span></span>
<span id="cb562-4"><a href="data-structures.html#cb562-4" tabindex="-1"></a>v[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> x3       <span class="co">#Assign x3 to v[[3]] where x3 is defined as above</span></span>
<span id="cb562-5"><a href="data-structures.html#cb562-5" tabindex="-1"></a>v[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> x4       <span class="co">#Assign x4 to v[[4]] where x4 is defined as above</span></span>
<span id="cb562-6"><a href="data-structures.html#cb562-6" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2] [,3]
## [1,]    4    5   10
## [2,]    2    6    9
## 
## [[2]]
## [1] 8 7 6 5 4 3 2 1
## 
## [[3]]
## [1] 2.4 5.1 9.0 4.4
## 
## [[4]]
## [1] &quot;u&quot; &quot;v&quot; &quot;w&quot;</code></pre>
<p>We used different methods creating list z and v. The list v and z are identical because we assigned the same components for v and z.</p>
<p>There are several different ways to access the elements in a list. For example, to access the third component in y:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="data-structures.html#cb564-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">5</span>, <span class="at">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="at">BP =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">77</span>), <span class="at">fun =</span> mean)</span></code></pre></div>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="data-structures.html#cb565-1" tabindex="-1"></a>y[[<span class="dv">3</span>]]        <span class="co">#Specifing the number in a double square bracket</span></span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="data-structures.html#cb567-1" tabindex="-1"></a>y<span class="sc">$</span>BP          <span class="co">#Using $ sign</span></span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="data-structures.html#cb569-1" tabindex="-1"></a>y[[<span class="st">&quot;BP&quot;</span>]]     <span class="co">#Using the tag</span></span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<p>Note: we used <strong>double square bracket</strong> ‘[[]]’ to access the element in a list, which is different from using single square brake ‘[]’ in a vector. If we use a single square bracket in a list, we will get a sub-list. For example, y[3] returns a list, y[[3]] returns a numerical vector. Functions <em>class()</em> and <em>is.list</em> can be used to check the types.</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="data-structures.html#cb571-1" tabindex="-1"></a>y[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## $BP
## [1] 100  77</code></pre>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="data-structures.html#cb573-1" tabindex="-1"></a><span class="fu">class</span>(y[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="data-structures.html#cb575-1" tabindex="-1"></a><span class="fu">is.list</span>(y[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="data-structures.html#cb577-1" tabindex="-1"></a>y[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="data-structures.html#cb579-1" tabindex="-1"></a><span class="fu">class</span>(y[[<span class="dv">3</span>]])               <span class="co">#Get the class of y[[3]] </span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="data-structures.html#cb581-1" tabindex="-1"></a><span class="fu">is.list</span>(y[[<span class="dv">3</span>]])           <span class="co">#Check if y[[3]] is a list or not</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The forth component of y is <em>fun = mean</em>. There are no quotation marks around <em>mean</em>. The <em>class(y[[4]])</em> returns a function.</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="data-structures.html#cb583-1" tabindex="-1"></a><span class="fu">class</span>(y[[<span class="dv">4</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<p>This implies that y[[4]] is same as the <em>mean()</em> function. For example:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="data-structures.html#cb585-1" tabindex="-1"></a>y[[<span class="dv">4</span>]](<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))          <span class="co">#Get the mean of 1, 2, 3, 4, 5</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-316}</p>
</blockquote>
<blockquote>
<p>Access the second component in list1 by three ways as we introduced above. What is the type of list1[“Hobby”] and list1[[“Hobby”]] respectively?</p>
<p>list1 &lt;- list(Name = “Tom”, Hobby = “Fishing”, Num.fish = c(16, 27, 5))
:::</p>
</blockquote>
<p>Here are some examples for list operation:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="data-structures.html#cb587-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">5</span>, <span class="at">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="at">BP =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">77</span>), <span class="at">fun =</span> mean)</span>
<span id="cb587-2"><a href="data-structures.html#cb587-2" tabindex="-1"></a>y[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Mike&quot;</span>    <span class="co">#Change the 2nd component from &quot;John Doe&quot; to &quot;Mike&quot;</span></span>
<span id="cb587-3"><a href="data-structures.html#cb587-3" tabindex="-1"></a>y[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span>      <span class="co">#Delete the 4th component by setting it to NULL</span></span>
<span id="cb587-4"><a href="data-structures.html#cb587-4" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $height
## [1] 5
## 
## $name
## [1] &quot;Mike&quot;
## 
## $BP
## [1] 100  77</code></pre>
<p>The output shows that the name has been changed to Mike and the mean function is deleted. So far, the length of y is 3:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="data-structures.html#cb589-1" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>We can add the forth components to y using the following code:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="data-structures.html#cb591-1" tabindex="-1"></a>y<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;math&quot;</span>, <span class="st">&quot;art&quot;</span>) <span class="co">#Add a class component</span></span>
<span id="cb591-2"><a href="data-structures.html#cb591-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $height
## [1] 5
## 
## $name
## [1] &quot;Mike&quot;
## 
## $BP
## [1] 100  77
## 
## $class
## [1] &quot;math&quot; &quot;art&quot;</code></pre>
<p>If we have a vector of tags and a vector of corresponding values, we can associate the names and values into a list by creating an empty list and then fill it via assignment statements:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="data-structures.html#cb593-1" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">105</span>, <span class="dv">98</span>, <span class="dv">112</span>)</span>
<span id="cb593-2"><a href="data-structures.html#cb593-2" tabindex="-1"></a>seasons <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Spring&quot;</span>, <span class="st">&quot;Summer&quot;</span>, <span class="st">&quot;Fall&quot;</span>, <span class="st">&quot;Winter&quot;</span>)</span>
<span id="cb593-3"><a href="data-structures.html#cb593-3" tabindex="-1"></a>sale.tag <span class="ot">&lt;-</span> <span class="fu">list</span>()               <span class="co">#Create an empty list</span></span>
<span id="cb593-4"><a href="data-structures.html#cb593-4" tabindex="-1"></a>sale.tag[seasons] <span class="ot">&lt;-</span> sales</span>
<span id="cb593-5"><a href="data-structures.html#cb593-5" tabindex="-1"></a>sale.tag</span></code></pre></div>
<pre><code>## $Spring
## [1] 100
## 
## $Summer
## [1] 105
## 
## $Fall
## [1] 98
## 
## $Winter
## [1] 112</code></pre>
<p>Equivalently, we can associate the names and values by creating an empty list and then assign each component corresponding value or vector. For example.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="data-structures.html#cb595-1" tabindex="-1"></a>sale.tag <span class="ot">&lt;-</span> <span class="fu">list</span>()               <span class="co">#Create an empty list</span></span>
<span id="cb595-2"><a href="data-structures.html#cb595-2" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Spring&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb595-3"><a href="data-structures.html#cb595-3" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Summer&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">105</span></span>
<span id="cb595-4"><a href="data-structures.html#cb595-4" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Fall&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">98</span></span>
<span id="cb595-5"><a href="data-structures.html#cb595-5" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Winter&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">112</span></span>
<span id="cb595-6"><a href="data-structures.html#cb595-6" tabindex="-1"></a>sale.tag</span></code></pre></div>
<pre><code>## $Spring
## [1] 100
## 
## $Summer
## [1] 105
## 
## $Fall
## [1] 98
## 
## $Winter
## [1] 112</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-322}</p>
</blockquote>
<blockquote>
<p>Based on the data set of sale.tag, choose all correct answers from the following options A - F.<br />
A: sale.tag[[1]]<br />
B: sale.tag[[Spring]]<br />
C: sale.tag[[“Spring”]]<br />
D: sale.tag[“Spring”]<br />
E: sale.tag[1]<br />
F: sale.tag[Spring]</p>
<ol style="list-style-type: lower-alpha">
<li>Which options return a vector. Answer:___________<br />
</li>
<li>Which options return a list. Answer:___________<br />
</li>
<li>Which options return an error. Answer:___________<br />
:::</li>
</ol>
</blockquote>
<p>Suppose we want to calculate the mean of sales in the dataset sale.tag. Because basic statistical functions work on vectors but not on lists. The mean() does not work:
&gt; mean(sale.tag)<br />
[1] NA<br />
Warning message:<br />
In mean.default(sale.tag) :<br />
argument is not numeric or logical: returning NA</p>
<p>To calculate the mean, we need to use function <em>unlist()</em> to flatten the list into a vector.</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="data-structures.html#cb597-1" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">unlist</span>(sale.tag))</span></code></pre></div>
<pre><code>## [1] 103.75</code></pre>
<p>Similar to <em>apply()</em> function works on vectors, <em>lapply()</em> (for list apply) works on each component of lists. Here is an example:</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="data-structures.html#cb599-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>), <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb599-2"><a href="data-structures.html#cb599-2" tabindex="-1"></a>mean.x <span class="ot">&lt;-</span> <span class="fu">lapply</span>(x, mean)</span>
<span id="cb599-3"><a href="data-structures.html#cb599-3" tabindex="-1"></a>mean.x</span></code></pre></div>
<pre><code>## [[1]]
## [1] 20
## 
## [[2]]
## [1] 6</code></pre>
<p>The <em>mean.x</em> returns a list consisting of 20 and 6 which are means of components of x respectively.</p>
<p>When the list returned by <em>lapply()</em> could be simplified to a vector or matrix, we can use function <em>sapply()</em>. Let’s redo the previous example by <em>sapply()</em> function.</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="data-structures.html#cb601-1" tabindex="-1"></a>mean.x<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">sapply</span>(x, mean)</span>
<span id="cb601-2"><a href="data-structures.html#cb601-2" tabindex="-1"></a>mean.x<span class="fl">.2</span></span></code></pre></div>
<pre><code>## [1] 20  6</code></pre>
<p>We can double check the outputs by <em>class()</em> or <em>is.vector()</em> function:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="data-structures.html#cb603-1" tabindex="-1"></a><span class="fu">class</span>(mean.x)               </span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="data-structures.html#cb605-1" tabindex="-1"></a><span class="fu">class</span>(mean.x<span class="fl">.2</span>)             </span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="data-structures.html#cb607-1" tabindex="-1"></a><span class="fu">is.vector</span>(mean.x<span class="fl">.2</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Here is another example for <em>sapply()</em> function. Suppose we have NULL elements in a list.null. To remove the NULL element, apply <em>is.null</em> function to every element of the list.null. If the logical value is TRUE, i.e. the element is a NULL, then delete the element by setting NULL to it.</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="data-structures.html#cb609-1" tabindex="-1"></a>list.null <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;art&#39;</span>, <span class="cn">NULL</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>))</span>
<span id="cb609-2"><a href="data-structures.html#cb609-2" tabindex="-1"></a>list.null</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;art&quot;
## 
## [[2]]
## NULL
## 
## [[3]]
## [1] 2 4 6 8</code></pre>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="data-structures.html#cb611-1" tabindex="-1"></a>list.null[<span class="fu">sapply</span>(list.null, is.null)] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb611-2"><a href="data-structures.html#cb611-2" tabindex="-1"></a>list.null</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;art&quot;
## 
## [[2]]
## [1] 2 4 6 8</code></pre>
<p>For a small size data set, if we can locate the position of NULL element, we can easily remove the NULL element by setting NULL to that element. For example, we already know the second element of list.null is NULL, to remove this NULL element, we set a NULL to the second element:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="data-structures.html#cb613-1" tabindex="-1"></a>list.null <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;art&#39;</span>, <span class="cn">NULL</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>))</span>
<span id="cb613-2"><a href="data-structures.html#cb613-2" tabindex="-1"></a>list.null[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb613-3"><a href="data-structures.html#cb613-3" tabindex="-1"></a>list.null</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;art&quot;
## 
## [[2]]
## [1] 2 4 6 8</code></pre>
<p>But for large size of data set, we turn to the <em>sapply()</em> function to remove NULL elements.</p>
<p><strong>Example</strong>:
Suppose we have a list of customers who visited our store in the last 10 days. Some customers visited the store more than once. We want to find out on which days and the total number of days that each customer visited. The customer names are recorded by the order of the day they came:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="data-structures.html#cb615-1" tabindex="-1"></a>customer <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Brandon&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Daniel&quot;</span>, <span class="st">&quot;Grace&quot;</span>, <span class="st">&quot;Mary&quot;</span>, </span>
<span id="cb615-2"><a href="data-structures.html#cb615-2" tabindex="-1"></a>                 <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Grace&quot;</span>)</span></code></pre></div>
<p>Firstly, we define a function which returns all locations of the same elements in a list.</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="data-structures.html#cb616-1" tabindex="-1"></a>loc.names <span class="ot">&lt;-</span> <span class="cf">function</span>(f){</span>
<span id="cb616-2"><a href="data-structures.html#cb616-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">unlist</span>(f)                     <span class="co"># Flatten a list x into a vector y</span></span>
<span id="cb616-3"><a href="data-structures.html#cb616-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>()                        <span class="co"># Create an empty list</span></span>
<span id="cb616-4"><a href="data-structures.html#cb616-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(y)){        </span>
<span id="cb616-5"><a href="data-structures.html#cb616-5" tabindex="-1"></a>  c.name <span class="ot">&lt;-</span> y[i]                   <span class="co"># Assign the ith element to c.name. </span></span>
<span id="cb616-6"><a href="data-structures.html#cb616-6" tabindex="-1"></a>  x[[c.name]] <span class="ot">&lt;-</span> <span class="fu">c</span>(x[[c.name]], i)  <span class="co"># assign values to x[[c.name]]. c.name is the name of x.</span></span>
<span id="cb616-7"><a href="data-structures.html#cb616-7" tabindex="-1"></a>}</span>
<span id="cb616-8"><a href="data-structures.html#cb616-8" tabindex="-1"></a><span class="fu">return</span>(x)</span>
<span id="cb616-9"><a href="data-structures.html#cb616-9" tabindex="-1"></a>}</span></code></pre></div>
<p>Here the <em>f</em> will be replaced by your own list. In this example, <em>f</em> will be replaced by the list of customers when we apply the function.<br />
x &lt;- list () # create an empty list.<br />
In the <em>for</em> loop, i starts from 1 to the length of y. In our example, the length of y is the length of the list of customers: 10.<br />
<em>c.name &lt;- y[i]</em> assigns the i-th element in y to a new variable <em>c.name</em>. For example, if i=1, y[1] is the “Alex”, then <em>c.name = “Alex”</em>.</p>
<p><em>x[[c.name]] &lt;- c(x[[c.name]], i)</em> :
For i=1, we have <em>c.name &lt;- “Alex”</em>, then <em>x[[c.name]] = x[[“Alex”]] = NULL</em> since x starting from an empty list. Therefore c(x[[“Alex”]], i) = c(NULL, i) = i = 1. The value 1 will be assigned to x[[“Alex”]] by the code: <em>x[[“Alex”]] &lt;- c(x[[“Alex”]], i) = 1</em>. Now x is not an empty list, it is a list with 1 component:</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="data-structures.html#cb617-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb617-2"><a href="data-structures.html#cb617-2" tabindex="-1"></a>x[[<span class="st">&quot;Alex&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb617-3"><a href="data-structures.html#cb617-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## $Alex
## [1] 1</code></pre>
<p>For i=2, y[2] &lt;- “Brandon”, then similar to the case of i=1, we have <em>x[[“Brandon”]] &lt;- 1</em>:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="data-structures.html#cb619-1" tabindex="-1"></a>x[[<span class="st">&quot;Brandon&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb619-2"><a href="data-structures.html#cb619-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## $Alex
## [1] 1
## 
## $Brandon
## [1] 1</code></pre>
<p>For i=3, <em>y[3] &lt;- “Alex”</em>. We have met “Alex” once, which returned <em>x[[“Alex”]] &lt;- 1</em>. Now we meet “Alex” again, which means we are going to update <em>x[[“Alex”]]</em> by <em>x[[“Alex”]] &lt;- c(x[[“Alex”]], i) = c(1, i) = c(1, 3)</em>. The updated x is:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="data-structures.html#cb621-1" tabindex="-1"></a>x[[<span class="st">&quot;Alex&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb621-2"><a href="data-structures.html#cb621-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## $Alex
## [1] 1 3
## 
## $Brandon
## [1] 1</code></pre>
<p>The process will stop till i = length (y) = 10. The <em>loc.names()</em> function will return all locations of all names which are already stored in x.</p>
<p>Let’s find all days of customers who visited to our store.</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="data-structures.html#cb623-1" tabindex="-1"></a>customer <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Brandon&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Daniel&quot;</span>, <span class="st">&quot;Grace&quot;</span>, <span class="st">&quot;Mary&quot;</span>, </span>
<span id="cb623-2"><a href="data-structures.html#cb623-2" tabindex="-1"></a>                 <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Grace&quot;</span>)</span>
<span id="cb623-3"><a href="data-structures.html#cb623-3" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">loc.names</span>(customer)</span>
<span id="cb623-4"><a href="data-structures.html#cb623-4" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## $Alex
## [1] 1 3 8
## 
## $Brandon
## [1] 2
## 
## $Daniel
## [1] 4
## 
## $Grace
## [1]  5 10
## 
## $Mary
## [1] 6 7
## 
## $Tom
## [1] 9</code></pre>
<p>The output tells us that Alex visited our store at the first, third and eighth days, Brandon came on the second day, etc.</p>
<p>Then we use <em>sapply()</em> function to calculate the repeat times of each element.</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="data-structures.html#cb625-1" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(v1,length)     <span class="co"># Calculate the length of each component in v1</span></span>
<span id="cb625-2"><a href="data-structures.html#cb625-2" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>##    Alex Brandon  Daniel   Grace    Mary     Tom 
##       3       1       1       2       2       1</code></pre>
<p>You can sort the v2 by the number of days that they presented by function <em>sort()</em>:</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="data-structures.html#cb627-1" tabindex="-1"></a><span class="fu">sort</span>(v2, <span class="at">decreasing =</span> T)</span></code></pre></div>
<pre><code>##    Alex   Grace    Mary Brandon  Daniel     Tom 
##       3       2       2       1       1       1</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-337}</p>
</blockquote>
<blockquote>
<p>Fill blanks in the function <em>my.fun()</em> so that for a given list, the function returns
all locations of each element and sort the frequency of the elements in increasing order. Then apply <em>my.fun()</em> to a set of gender:<br />
F F M M M M I I F I F M I F M I I M I I F<br />
Where F, M and I represent Female, Male and Infant respectively.</p>
<p>my.fun &lt;- function(f){
y &lt;- unlist(f)<br />
x &lt;- ___________<br />
for (i in 1:____){<br />
g1 &lt;- y[i]<br />
x[[______]] &lt;- c(x[[____]],i)<br />
}
freq &lt;- _________(x, length)<br />
z &lt;- sort(________, decreasing = ____)<br />
lst &lt;- list(x, z)<br />
___________(lst)<br />
}<br />
gender &lt;- list( “F”, ________________________________, “F”)<br />
__________(gender)<br />
:::</p>
</blockquote>
<p>Many R functions, such as <em>t.test()</em>, returns results as a <strong>list</strong>, which contain a series of components, such as a p-value, a vector of residuals or coefficients, and even a matrix of data. A list is a natural way to represent this sort of thing as one big object that could be parsed.</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="data-structures.html#cb629-1" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)  <span class="co"># Create 100 random numbers following Normal Distribution</span></span>
<span id="cb629-2"><a href="data-structures.html#cb629-2" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb629-3"><a href="data-structures.html#cb629-3" tabindex="-1"></a>t.result <span class="ot">&lt;-</span> <span class="fu">t.test</span>(r1, r2) <span class="co"># Run the t test. Test if the mean of r1 and r2 are same.</span></span>
<span id="cb629-4"><a href="data-structures.html#cb629-4" tabindex="-1"></a><span class="fu">is.list</span>(t.result) <span class="co"># Check if the t.result is a list</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="data-structures.html#cb631-1" tabindex="-1"></a>t.result  <span class="co"># A list holds all components of t-test</span></span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  r1 and r2
## t = -1.5356, df = 191.44, p-value = 0.1263
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.46327578  0.05768808
## sample estimates:
##   mean of x   mean of y 
## -0.07434064  0.12845320</code></pre>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="data-structures.html#cb633-1" tabindex="-1"></a><span class="fu">names</span>(t.result) <span class="co"># Returns all tags of the t test result</span></span></code></pre></div>
<pre><code>##  [1] &quot;statistic&quot;   &quot;parameter&quot;   &quot;p.value&quot;     &quot;conf.int&quot;    &quot;estimate&quot;   
##  [6] &quot;null.value&quot;  &quot;stderr&quot;      &quot;alternative&quot; &quot;method&quot;      &quot;data.name&quot;</code></pre>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="data-structures.html#cb635-1" tabindex="-1"></a>t.result<span class="sc">$</span>p.value  <span class="co"># Retrieves  p-value for the test</span></span></code></pre></div>
<pre><code>## [1] 0.1262864</code></pre>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="data-structures.html#cb637-1" tabindex="-1"></a>t.result<span class="sc">$</span>estimate  <span class="co"># Returns mean of r1 and r2</span></span></code></pre></div>
<pre><code>##   mean of x   mean of y 
## -0.07434064  0.12845320</code></pre>
<p>The help page of t.test contains information about what types of values are returned and their names. Run the ?t.test to access the help page.</p>
<p>Let’s run a simulation using a loop. What we want to do is to generate two sets of 100 random numbers from the standard normal distribution with zero mean and unit standard deviation, then perform t-test and get the p-value. By repeating this process 500 times, we want to see the distribution of p-values and count how many times we get significant result with p &lt; 0.05.</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="data-structures.html#cb639-1" tabindex="-1"></a>pvalues <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">500</span>)  <span class="co"># define a vector containing 500 numbers, all equal to 1.</span></span>
<span id="cb639-2"><a href="data-structures.html#cb639-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>) {  <span class="co"># Loop: The values of i takes values from 1,2,3, …, 500</span></span>
<span id="cb639-3"><a href="data-structures.html#cb639-3" tabindex="-1"></a>     result <span class="ot">=</span> <span class="fu">t.test</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>), <span class="fu">rnorm</span>(<span class="dv">100</span>))    </span>
<span id="cb639-4"><a href="data-structures.html#cb639-4" tabindex="-1"></a>     pvalues[i] <span class="ot">=</span> result<span class="sc">$</span>p.value  <span class="co"># p-values are stored in the i-th element in the vector</span></span>
<span id="cb639-5"><a href="data-structures.html#cb639-5" tabindex="-1"></a>}  </span>
<span id="cb639-6"><a href="data-structures.html#cb639-6" tabindex="-1"></a><span class="fu">hist</span>(pvalues)  <span class="co"># Histogram of p-values</span></span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-339-1.png" width="672" /></p>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="data-structures.html#cb640-1" tabindex="-1"></a><span class="fu">summary</span>(pvalues)   </span></code></pre></div>
<pre><code>##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
## 0.0005109 0.2422735 0.5238229 0.5040090 0.7631251 0.9996281</code></pre>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="data-structures.html#cb642-1" tabindex="-1"></a><span class="fu">sum</span>(pvalues <span class="sc">&lt;</span> <span class="fl">0.05</span>)  <span class="co"># Number of p-value&#39;s which are less than 0.05. </span></span></code></pre></div>
<pre><code>## [1] 42</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizing-the-iris-flower-data-set.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importing-data-and-managing-files.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
