<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data structures | Learn R through examples</title>
  <meta name="description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data structures | Learn R through examples" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  <meta name="github-repo" content="gexijin/learnR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data structures | Learn R through examples" />
  
  <meta name="twitter:description" content="This is a draft of a book for learning data analysis with the R language. This book emphasizes hands activities. Comments and suggestions are welcome." />
  

<meta name="author" content="Xijin Ge, Jianli Qi, and Rong Fan" />


<meta name="date" content="2024-01-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizing-the-iris-flower-data-set.html"/>
<link rel="next" href="importing-data-and-managing-files.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html"><i class="fa fa-check"></i><b>1</b> Step into R programming:The iris flower dataset</a>
<ul>
<li class="chapter" data-level="1.1" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting started</a></li>
<li class="chapter" data-level="1.2" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#the-proper-way-of-using-rstudio"><i class="fa fa-check"></i><b>1.2</b> The proper way of using RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#data-frames-contain-rows-and-columns-the-iris-flower-dataset"><i class="fa fa-check"></i><b>1.3</b> Data frames contain rows and columns: the iris flower dataset</a></li>
<li class="chapter" data-level="1.4" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#analyzing-one-set-of-numbers"><i class="fa fa-check"></i><b>1.4</b> Analyzing one set of numbers</a></li>
<li class="chapter" data-level="1.5" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#analyzing-a-categorical-variable"><i class="fa fa-check"></i><b>1.5</b> Analyzing a categorical variable</a></li>
<li class="chapter" data-level="1.6" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#the-relationship-between-two-numerical-variables"><i class="fa fa-check"></i><b>1.6</b> The relationship between two numerical variables</a></li>
<li class="chapter" data-level="1.7" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#testing-the-differences-between-two-groups"><i class="fa fa-check"></i><b>1.7</b> Testing the differences between two groups</a></li>
<li class="chapter" data-level="1.8" data-path="step-into-r-programmingthe-iris-flower-dataset.html"><a href="step-into-r-programmingthe-iris-flower-dataset.html#testing-differences-among-multiple-groups-anova"><i class="fa fa-check"></i><b>1.8</b> Testing differences among multiple groups (ANOVA)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html"><i class="fa fa-check"></i><b>2</b> Visualizing the iris flower data set</a>
<ul>
<li class="chapter" data-level="2.1" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#basic-concepts-of-r-graphics"><i class="fa fa-check"></i><b>2.1</b> Basic concepts of R graphics</a></li>
<li class="chapter" data-level="2.2" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#scatter-plot-matrix"><i class="fa fa-check"></i><b>2.2</b> Scatter plot matrix</a></li>
<li class="chapter" data-level="2.3" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#star-and-segment-diagrams"><i class="fa fa-check"></i><b>2.3</b> Star and segment diagrams</a></li>
<li class="chapter" data-level="2.4" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#the-ggplot2-package-is-intuitive-and-powerful"><i class="fa fa-check"></i><b>2.4</b> The ggplot2 package is intuitive and powerful</a></li>
<li class="chapter" data-level="2.5" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#other-types-of-plots-with-ggplot2"><i class="fa fa-check"></i><b>2.5</b> Other types of plots with ggplot2</a></li>
<li class="chapter" data-level="2.6" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#hierarchical-clustering-and-heat-map"><i class="fa fa-check"></i><b>2.6</b> Hierarchical clustering and heat map</a></li>
<li class="chapter" data-level="2.7" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#principal-component-analysis-pca"><i class="fa fa-check"></i><b>2.7</b> Principal component analysis (PCA)</a></li>
<li class="chapter" data-level="2.8" data-path="visualizing-the-iris-flower-data-set.html"><a href="visualizing-the-iris-flower-data-set.html#logistic-regression-for-binary-outcomes-prediction"><i class="fa fa-check"></i><b>2.8</b> Logistic Regression for Binary Outcomes Prediction</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-structures.html"><a href="data-structures.html#basic-concepts"><i class="fa fa-check"></i><b>3.1</b> Basic concepts</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-structures.html"><a href="data-structures.html#expressions"><i class="fa fa-check"></i><b>3.1.1</b> Expressions</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-structures.html"><a href="data-structures.html#logical-values"><i class="fa fa-check"></i><b>3.1.2</b> Logical Values</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-structures.html"><a href="data-structures.html#variables"><i class="fa fa-check"></i><b>3.1.3</b> Variables</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-structures.html"><a href="data-structures.html#functions"><i class="fa fa-check"></i><b>3.1.4</b> Functions</a></li>
<li class="chapter" data-level="3.1.5" data-path="data-structures.html"><a href="data-structures.html#seeking-help-and-example-code"><i class="fa fa-check"></i><b>3.1.5</b> Seeking help and example Code</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-structures.html"><a href="data-structures.html#data-structures-1"><i class="fa fa-check"></i><b>3.2</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>3.2.1</b> Vectors</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>3.2.2</b> Matrices</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>3.2.3</b> Data Frames</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-structures.html"><a href="data-structures.html#strings-and-string-vectors"><i class="fa fa-check"></i><b>3.2.4</b> Strings and string vectors</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.2.5</b> Lists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html"><i class="fa fa-check"></i><b>4</b> Importing data and managing files</a>
<ul>
<li class="chapter" data-level="4.1" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#project-oriented-workflow"><i class="fa fa-check"></i><b>4.1</b> Project-oriented workflow</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#create-a-project-in-a-new-folder"><i class="fa fa-check"></i><b>4.1.1</b> Create a project in a new folder</a></li>
<li class="chapter" data-level="4.1.2" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#create-a-script-file-and-comment-please"><i class="fa fa-check"></i><b>4.1.2</b> Create a script file (and Comment, Please!)</a></li>
<li class="chapter" data-level="4.1.3" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#copy-data-files-to-the-new-directory"><i class="fa fa-check"></i><b>4.1.3</b> Copy data files to the new directory</a></li>
<li class="chapter" data-level="4.1.4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#import-data-files"><i class="fa fa-check"></i><b>4.1.4</b> Import data files</a></li>
<li class="chapter" data-level="4.1.5" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#check-and-convert-data-types"><i class="fa fa-check"></i><b>4.1.5</b> Check and convert data types</a></li>
<li class="chapter" data-level="4.1.6" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#close-a-project-when-you-are-done"><i class="fa fa-check"></i><b>4.1.6</b> Close a project when you are done</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#read-files-directly-using-read.table"><i class="fa fa-check"></i><b>4.2</b> Read files directly using read.table</a></li>
<li class="chapter" data-level="4.3" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#general-procedure-to-read-data-into-r"><i class="fa fa-check"></i><b>4.3</b> General procedure to read data into R:</a></li>
<li class="chapter" data-level="4.4" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#enter-data-manually"><i class="fa fa-check"></i><b>4.4</b> Enter data manually</a></li>
<li class="chapter" data-level="4.5" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#data-manipulation-in-a-data-frame"><i class="fa fa-check"></i><b>4.5</b> Data manipulation in a data frame</a></li>
<li class="chapter" data-level="4.6" data-path="importing-data-and-managing-files.html"><a href="importing-data-and-managing-files.html#data-transformation-using-the-dplyr"><i class="fa fa-check"></i><b>4.6</b> Data transformation using the dplyr</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html"><i class="fa fa-check"></i><b>5</b> The heart attack data set (I)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#begin-your-analysis-by-examining-each-column-individually"><i class="fa fa-check"></i><b>5.1</b> Begin your analysis by examining each column individually</a></li>
<li class="chapter" data-level="5.2" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#possible-correlation-between-two-numeric-columns"><i class="fa fa-check"></i><b>5.2</b> Possible correlation between two numeric columns</a></li>
<li class="chapter" data-level="5.3" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-categorical-variables"><i class="fa fa-check"></i><b>5.3</b> Associations between categorical variables</a></li>
<li class="chapter" data-level="5.4" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-a-categorical-and-a-numeric-variables"><i class="fa fa-check"></i><b>5.4</b> Associations between a categorical and a numeric variables</a></li>
<li class="chapter" data-level="5.5" data-path="the-heart-attack-data-set-i.html"><a href="the-heart-attack-data-set-i.html#associations-between-multiple-columns"><i class="fa fa-check"></i><b>5.5</b> Associations between multiple columns</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html"><i class="fa fa-check"></i><b>6</b> The heart attack dataset (II)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#scatter-plot-in-ggplot2"><i class="fa fa-check"></i><b>6.1</b> Scatter plot in ggplot2</a></li>
<li class="chapter" data-level="6.2" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>6.2</b> Histograms and density plots</a></li>
<li class="chapter" data-level="6.3" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#box-plots-and-violin-plots"><i class="fa fa-check"></i><b>6.3</b> Box plots and Violin plots</a></li>
<li class="chapter" data-level="6.4" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#bar-plot-with-error-bars"><i class="fa fa-check"></i><b>6.4</b> Bar plot with error bars</a></li>
<li class="chapter" data-level="6.5" data-path="the-heart-attack-dataset-ii.html"><a href="the-heart-attack-dataset-ii.html#statistical-models-easy-to-run-tricky-to-interpret"><i class="fa fa-check"></i><b>6.5</b> Statistical models: Easy to Run, tricky to interpret!</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>7</b> Advanced topics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="advanced-topics.html"><a href="advanced-topics.html#introduction-to-r-markdown"><i class="fa fa-check"></i><b>7.1</b> Introduction to R Markdown</a></li>
<li class="chapter" data-level="7.2" data-path="advanced-topics.html"><a href="advanced-topics.html#tidyverse"><i class="fa fa-check"></i><b>7.2</b> Tidyverse</a></li>
<li class="chapter" data-level="7.3" data-path="advanced-topics.html"><a href="advanced-topics.html#interactive-plots-made-easy-with-plotly"><i class="fa fa-check"></i><b>7.3</b> Interactive plots made easy with Plotly</a></li>
<li class="chapter" data-level="7.4" data-path="advanced-topics.html"><a href="advanced-topics.html#shiny-apps"><i class="fa fa-check"></i><b>7.4</b> Shiny Apps</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="advanced-topics.html"><a href="advanced-topics.html#install-the-shiny-package"><i class="fa fa-check"></i><b>7.4.1</b> Install the Shiny package</a></li>
<li class="chapter" data-level="7.4.2" data-path="advanced-topics.html"><a href="advanced-topics.html#create-a-shiny-web-app-is-a-piece-of-cake"><i class="fa fa-check"></i><b>7.4.2</b> Create a Shiny web app is a piece of cake</a></li>
<li class="chapter" data-level="7.4.3" data-path="advanced-topics.html"><a href="advanced-topics.html#lets-play"><i class="fa fa-check"></i><b>7.4.3</b> Let’s play!</a></li>
<li class="chapter" data-level="7.4.4" data-path="advanced-topics.html"><a href="advanced-topics.html#publish-your-app"><i class="fa fa-check"></i><b>7.4.4</b> Publish your app</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="advanced-topics.html"><a href="advanced-topics.html#define-your-own-function"><i class="fa fa-check"></i><b>7.5</b> Define your own function</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="state-dataset.html"><a href="state-dataset.html"><i class="fa fa-check"></i><b>8</b> State dataset</a>
<ul>
<li class="chapter" data-level="8.1" data-path="state-dataset.html"><a href="state-dataset.html#data-import-and-manipulation"><i class="fa fa-check"></i><b>8.1</b> Data Import and Manipulation</a></li>
<li class="chapter" data-level="8.2" data-path="state-dataset.html"><a href="state-dataset.html#visualizing-data"><i class="fa fa-check"></i><b>8.2</b> Visualizing data</a></li>
<li class="chapter" data-level="8.3" data-path="state-dataset.html"><a href="state-dataset.html#analyzing-the-relationship-among-variables"><i class="fa fa-check"></i><b>8.3</b> Analyzing the relationship among variables</a></li>
<li class="chapter" data-level="8.4" data-path="state-dataset.html"><a href="state-dataset.html#the-whole-picture-of-the-data-set"><i class="fa fa-check"></i><b>8.4</b> The whole picture of the data set</a></li>
<li class="chapter" data-level="8.5" data-path="state-dataset.html"><a href="state-dataset.html#linear-model-analysis"><i class="fa fa-check"></i><b>8.5</b> Linear model analysis</a></li>
<li class="chapter" data-level="8.6" data-path="state-dataset.html"><a href="state-dataset.html#conclusion"><i class="fa fa-check"></i><b>8.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html"><i class="fa fa-check"></i><b>9</b> The game sales dataset</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#reading-in-data-and-managing-the-dataset"><i class="fa fa-check"></i><b>9.1</b> Reading in data and managing the dataset</a></li>
<li class="chapter" data-level="9.2" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#visualization-of-categorical-variables"><i class="fa fa-check"></i><b>9.2</b> Visualization of categorical variables</a></li>
<li class="chapter" data-level="9.3" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#correlation-among-numeric-variables"><i class="fa fa-check"></i><b>9.3</b> Correlation among numeric variables</a></li>
<li class="chapter" data-level="9.4" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#analysis-of-score-and-count"><i class="fa fa-check"></i><b>9.4</b> Analysis of score and count</a></li>
<li class="chapter" data-level="9.5" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#analysis-of-sales"><i class="fa fa-check"></i><b>9.5</b> Analysis of sales</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-year.release"><i class="fa fa-check"></i><b>9.5.1</b> By Year.Release</a></li>
<li class="chapter" data-level="9.5.2" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-region"><i class="fa fa-check"></i><b>9.5.2</b> By Region</a></li>
<li class="chapter" data-level="9.5.3" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-rating"><i class="fa fa-check"></i><b>9.5.3</b> By Rating</a></li>
<li class="chapter" data-level="9.5.4" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-genre"><i class="fa fa-check"></i><b>9.5.4</b> By Genre</a></li>
<li class="chapter" data-level="9.5.5" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-score"><i class="fa fa-check"></i><b>9.5.5</b> by Score</a></li>
<li class="chapter" data-level="9.5.6" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-rating-genre-critic-score"><i class="fa fa-check"></i><b>9.5.6</b> By Rating &amp; Genre &amp; Critic score</a></li>
<li class="chapter" data-level="9.5.7" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#by-platform"><i class="fa fa-check"></i><b>9.5.7</b> By Platform</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#effect-of-platform-type-on-principle-components"><i class="fa fa-check"></i><b>9.6</b> Effect of platform type on principle components</a></li>
<li class="chapter" data-level="9.7" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#models-for-global-sales"><i class="fa fa-check"></i><b>9.7</b> Models for global sales</a></li>
<li class="chapter" data-level="9.8" data-path="the-game-sales-dataset.html"><a href="the-game-sales-dataset.html#conclusion-1"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html"><i class="fa fa-check"></i><b>10</b> The messy salary data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#data-preparation-and-cleaning"><i class="fa fa-check"></i><b>10.1</b> Data Preparation and Cleaning</a></li>
<li class="chapter" data-level="10.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#variable-analysis"><i class="fa fa-check"></i><b>10.2</b> Variable Analysis</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#income-and-age"><i class="fa fa-check"></i><b>10.2.1</b> Income and age</a></li>
<li class="chapter" data-level="10.2.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-group"><i class="fa fa-check"></i><b>10.2.2</b> Ethnic group</a></li>
<li class="chapter" data-level="10.2.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#sex"><i class="fa fa-check"></i><b>10.2.3</b> Sex</a></li>
<li class="chapter" data-level="10.2.4" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#union-descreption"><i class="fa fa-check"></i><b>10.2.4</b> Union descreption</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#analysis-of-gross-income"><i class="fa fa-check"></i><b>10.3</b> Analysis of gross income</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#age"><i class="fa fa-check"></i><b>10.3.1</b> Age</a></li>
<li class="chapter" data-level="10.3.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#sex-1"><i class="fa fa-check"></i><b>10.3.2</b> Sex</a></li>
<li class="chapter" data-level="10.3.3" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#ethnic-group-1"><i class="fa fa-check"></i><b>10.3.3</b> Ethnic Group</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#analysis-of-gross-income-types"><i class="fa fa-check"></i><b>10.4</b> Analysis of gross income types</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#defining-gross-income-types"><i class="fa fa-check"></i><b>10.4.1</b> Defining Gross income types</a></li>
<li class="chapter" data-level="10.4.2" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#the-intersection-of-ethnic-sex-and-age"><i class="fa fa-check"></i><b>10.4.2</b> The Intersection of Ethnic, Sex and age</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#lm-and-anova-analysis"><i class="fa fa-check"></i><b>10.5</b> LM and ANOVA analysis</a></li>
<li class="chapter" data-level="10.6" data-path="the-messy-salary-data.html"><a href="the-messy-salary-data.html#conclusion-2"><i class="fa fa-check"></i><b>10.6</b> Conclusion</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learn R through examples</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data structures<a href="data-structures.html#data-structures" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Learning objectives:</p>
<ul>
<li>Understand basic concepts of R programming, including functions and data objects.</li>
<li>Learn to seek help within R and utilize Google for programming queries.</li>
<li>Get familiar with common data objects such as scalars, vectors, lists, data frames, and matrices.</li>
</ul>
<p>R scripts are a mix of function calls and data handling. There’s a buffet of <strong>data structures</strong> in R, including <strong>scalars, vectors, factors, matrices, factors, data frames</strong>, and <strong>lists</strong>. These structures can store one or more individual data elements of various types, such as <strong>numeric</strong> (e.g. 2.5), <strong>character</strong> (e.g. “Go Jacks”), or <strong>logical</strong> (e.e. TRUE or FALSE).</p>
<div id="basic-concepts" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Basic concepts<a href="data-structures.html#basic-concepts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="expressions" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Expressions<a href="data-structures.html#expressions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, just type a command and watch the magic happen! For instance:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-structures.html#cb116-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span> </span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Here’s your result, ‘2’. It’s printed on the console right after your entry.</p>
<p>Now enter the string <strong>“Go Jacks”</strong>. (quotes are a must!)</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-structures.html#cb118-1" tabindex="-1"></a><span class="st">&quot;Go Jacks&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;Go Jacks&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-88}</p>
</blockquote>
<blockquote>
<p>Multiply 45.6 by 78.9 and see what R computes.
:::</p>
</blockquote>
</div>
<div id="logical-values" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Logical Values<a href="data-structures.html#logical-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R can yield logical values <strong>TRUE</strong> or <strong>FALSE</strong> , known as “Boolean” values in many languages. Let’s try an expression that gives us a logical value:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-structures.html#cb120-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">4</span> <span class="co"># Result in TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>And another logical value:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-structures.html#cb122-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">5</span> <span class="co"># Spoiler: It&#39;s FALSE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Note that you need a double-equal sign to check whether two values are equal - a single-equal sign won’t work.</p>
</div>
<div id="variables" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Variables<a href="data-structures.html#variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can store values in variables for future use, just like in other languages. Type <strong>x = 42</strong> to keep 42 in <strong>x</strong>. x is a <strong>scalar that contains only one data element</strong>.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data-structures.html#cb124-1" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">42</span></span></code></pre></div>
<p>Alternatively, use this conventional and safer syntax for assignment:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-structures.html#cb125-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">42</span> </span></code></pre></div>
<p>This is the recommended way of assignment, according to the <a href="https://google.github.io/styleguide/Rguide.xml">Google R style Guide</a>, although <code>x = 42</code> generally works fine.</p>
<p>Once assigned, x is ready for action. Have fun with x to divide, log, square, or use it in a logical operation.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data-structures.html#cb126-1" tabindex="-1"></a>x <span class="sc">/</span> <span class="dv">2</span> <span class="co"># Division</span></span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data-structures.html#cb128-1" tabindex="-1"></a><span class="fu">log</span>(x) <span class="co"># Logarithm</span></span></code></pre></div>
<pre><code>## [1] 3.73767</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-structures.html#cb130-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span>  <span class="co"># Squaring</span></span></code></pre></div>
<pre><code>## [1] 1764</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data-structures.html#cb132-1" tabindex="-1"></a><span class="fu">sqrt</span>(x)  <span class="co"># Square root</span></span></code></pre></div>
<pre><code>## [1] 6.480741</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data-structures.html#cb134-1" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">1</span>  <span class="co"># Logical comparison</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>You can re-assign any value to a variable at any time. Try assigning <strong>“Go Jacks!”</strong> to <strong>x</strong>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data-structures.html#cb136-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;Go Jacks!&quot;</span> <span class="co"># Now, x is a cheerleader.</span></span></code></pre></div>
<p>To peek into the variable’s value, just type its name:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data-structures.html#cb137-1" tabindex="-1"></a>x </span></code></pre></div>
<pre><code>## [1] &quot;Go Jacks!&quot;</code></pre>
<p>Switching to a logical value? No problem! Assign <strong>TRUE</strong> to <strong>x</strong>:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="data-structures.html#cb139-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code></pre></div>
<p>You can store multiple values in a variable or object called <strong>vector</strong>, or <strong>matrix</strong> and <strong>data frame</strong>, which are tables with rows and columns, like an Excel spreadsheet. These will be explained later.</p>
</div>
<div id="functions" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Functions<a href="data-structures.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Functions are fundamental building blocks of R. Most of the times when we run R commands, we are calling and executing functions. You can call a function by its name, followed by one or more arguments in parenthesis. Let’s use the <strong>sum</strong> function to add up a few numbers:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data-structures.html#cb140-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>Save a function’s result to a variable:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data-structures.html#cb142-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb142-2"><a href="data-structures.html#cb142-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>Some arguments have “names”. For example, to repeat a value 3 times, you would call the <strong>rep</strong> function and provide it to <strong>times</strong> argument:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data-structures.html#cb144-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="st">&quot;Yo ho!&quot;</span>, <span class="at">times =</span> <span class="dv">3</span>) <span class="co"># # Three cheers from R!</span></span></code></pre></div>
<pre><code>## [1] &quot;Yo ho!&quot; &quot;Yo ho!&quot; &quot;Yo ho!&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-100}</p>
</blockquote>
<blockquote>
<p>For vector x &lt;- c(12, 56, 31, -5, 7):<br />
a. Calculate the mean of all elements in x and assign it to <em>y</em>.<br />
b. Square each element in x and assign the results to a new vector <em>z</em>.<br />
:::</p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-101}</p>
</blockquote>
<blockquote>
<p>Use Google to find functions for setting and getting the current working directory, respectively.
:::</p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-102}</p>
</blockquote>
<blockquote>
<p>Discover the function that lists all the files in the current working folder.
:::</p>
</blockquote>
<p>Reusing code efficiently can be achieved by wrapping it in a function, clearly defining the input and the output. Tested and documented R functions are often available as R packages. You can also define your own functions, which will be discussed later.</p>
</div>
<div id="seeking-help-and-example-code" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Seeking help and example Code<a href="data-structures.html#seeking-help-and-example-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To find help in R, use the help command. For instance, to learn about the sum function, type:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="data-structures.html#cb146-1" tabindex="-1"></a>? sum </span></code></pre></div>
<p>A helpful document will pop up in the Help Window. See the Figure <a href="data-structures.html#fig:ch3-1">3.1</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3-1"></span>
<img src="images/Ch3_1.png" alt="Help formation on the ‘sum’ function." width="60%" />
<p class="caption">
Figure 3.1: Help formation on the ‘sum’ function.
</p>
</div>
<p>Scroll to the bottom of the help page to find example code, as shown in Figure <a href="data-structures.html#fig:ch3-2">3.2</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ch3-2"></span>
<img src="images/Ch3_2.png" alt="Code examples using ‘sum’ function." width="60%" />
<p class="caption">
Figure 3.2: Code examples using ‘sum’ function.
</p>
</div>
<p>The quickest way to grasp an R function is by playing around with these example codes, observing the inputs and outputs. Feel free to copy, paste, and modify these examples for your analysis needs.</p>
<p><strong>example()</strong> brings up usage examples for the given function. Try it for the ‘min’ function:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data-structures.html#cb147-1" tabindex="-1"></a><span class="fu">example</span>(min)</span></code></pre></div>
<pre><code>## 
## min&gt; require(stats); require(graphics)
## 
## min&gt;  min(5:1, pi) #-&gt; one number
## [1] 1
## 
## min&gt; pmin(5:1, pi) #-&gt;  5  numbers
## [1] 3.141593 3.141593 3.000000 2.000000 1.000000
## 
## min&gt; x &lt;- sort(rnorm(100));  cH &lt;- 1.35
## 
## min&gt; pmin(cH, quantile(x)) # no names
## [1] -2.21172654 -0.84536856  0.02474012  0.91307143  1.35000000
## 
## min&gt; pmin(quantile(x), cH) # has names
##          0%         25%         50%         75%        100% 
## -2.21172654 -0.84536856  0.02474012  0.91307143  1.35000000 
## 
## min&gt; plot(x, pmin(cH, pmax(-cH, x)), type = &quot;b&quot;, main =  &quot;Huber&#39;s function&quot;)</code></pre>
<pre><code>## 
## min&gt; cut01 &lt;- function(x) pmax(pmin(x, 1), 0)
## 
## min&gt; curve(      x^2 - 1/4, -1.4, 1.5, col = 2)</code></pre>
<pre><code>## 
## min&gt; curve(cut01(x^2 - 1/4), col = &quot;blue&quot;, add = TRUE, n = 500)
## 
## min&gt; ## pmax(), pmin() preserve attributes of *first* argument
## min&gt; D &lt;- diag(x = (3:1)/4) ; n0 &lt;- numeric()
## 
## min&gt; stopifnot(identical(D,  cut01(D) ),
## min+           identical(n0, cut01(n0)),
## min+           identical(n0, cut01(NULL)),
## min+           identical(n0, pmax(3:1, n0, 2)),
## min+           identical(n0, pmax(n0, 4)))</code></pre>
<p>Here’s a quick demonstration:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data-structures.html#cb151-1" tabindex="-1"></a><span class="fu">min</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">1</span>, pi)  <span class="co"># Return a single number</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Example commands and plots will show up automatically by pressing ‘Return’ in RStudio. In R, you’ll need to manually click on the plots to view them.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data-structures.html#cb153-1" tabindex="-1"></a><span class="fu">example</span>(boxplot)  <span class="co"># Show example of boxplot</span></span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-106-1.png" width="672" /></p>
<p>Google is a surprisingly patient teacher for R-related queries, forgiving typos, grammar errors, and different notations. Most of your questions (99 %) have been asked and answered on various forums. Many R gurus share their wisdom on web sites like** <a href="stackoverflow.com">stackoverflow.com</a>**, providing answers with example codes! You can also use Google as a reference.</p>
<p>Remember, it is important to add comments to your code. Everything after the “#” will be ignored by R during execution. Since we often recycle and re-purpose our codes, these comments are our breadcrumbs through the forest of code, helping us remember our intentions.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="data-structures.html#cb154-1" tabindex="-1"></a><span class="fu">max</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)  <span class="co"># Return the maximum value of a vector</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="data-structures-1" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data structures<a href="data-structures.html#data-structures-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="vectors" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Vectors<a href="data-structures.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A vector is an object that holds a sequence of values of the same type, such as numbers, strings, logical values, or any other type, as long as they’re all the same type. They can come from a column of a data frame too. Here’s how you create a vector x:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-structures.html#cb156-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb156-2"><a href="data-structures.html#cb156-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  5  2 22 11  5</code></pre>
<p>The <strong>c</strong> here stands for <em>concatenate</em>. Treat it with respect and avoid using it as a variable name; it’s much too valuable for that!</p>
<p>Vectors can not contain values with different modes (types). Try a motley crew with mixing modes and see what happens:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="data-structures.html#cb158-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">TRUE</span>, <span class="st">&quot;three&quot;</span>)  <span class="co"># Converts all elements to characters</span></span></code></pre></div>
<pre><code>## [1] &quot;1&quot;     &quot;TRUE&quot;  &quot;three&quot;</code></pre>
<p>The result? All values get converted to ‘characters’, the universal diplomat of data types, to coexist peacefully in the vector. To hold diverse types of values, you will need a <strong>list</strong>, which is explained later in this chapter.</p>
<p>For a vector with a sequence of numbers, use <strong>start:end</strong> notation, which is often used in loops and operations on the indices of vectors, etc. Let’s create a vector with values from 5 through 9:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="data-structures.html#cb160-1" tabindex="-1"></a><span class="dv">5</span><span class="sc">:</span><span class="dv">9</span> </span></code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p>The <strong>seq</strong> function offers more flexibility for creating sequences. Here is the basic seq():</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-structures.html#cb162-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5</span>, <span class="at">to =</span> <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p><strong>seq</strong> also allows you to use increments other than 1. Try it with step of 0.5:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="data-structures.html#cb164-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">by =</span> .<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 5.0 5.5 6.0 6.5 7.0 7.5 8.0 8.5 9.0</code></pre>
<p>Create a sequence from 5 to 9 with length 15:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-structures.html#cb166-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">5</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">length =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] 5.000000 5.285714 5.571429 5.857143 6.142857 6.428571 6.714286 7.000000
##  [9] 7.285714 7.571429 7.857143 8.142857 8.428571 8.714286 9.000000</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-114}</p>
</blockquote>
<blockquote>
<p>Compute 1+2+3… +1000 using single line of R code. Hint: check the example code for sum( ) function in the R help document.
:::</p>
</blockquote>
<div id="vectors-operations" class="section level4 hasAnchor" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Vectors operations<a href="data-structures.html#vectors-operations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First let’s find out the 4th element of our vector x &lt;- c(5, 2, 22, 11, 5), or the elements from 2 to 4.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-structures.html#cb168-1" tabindex="-1"></a>x[<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-structures.html#cb170-1" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>Creat a new vector y from a segment of x:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-structures.html#cb172-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<p>No result is returned but you “captured” the result in a new vector y, which holds 3 numbers. You can type y and hit ‘enter’ to see the results.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data-structures.html#cb173-1" tabindex="-1"></a>y <span class="co"># Meet y</span></span></code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>Or, combine creation and revelation in one magical line. A semicolon separates multiple commands.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data-structures.html#cb175-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]; y  <span class="co"># Voila!</span></span></code></pre></div>
<pre><code>## [1]  2 22 11</code></pre>
<p>Now discover the vector length:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data-structures.html#cb177-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>It’s also easy to know basic statistics about the vector such as maximum, minimum, sum, mean and median, individually or together. And standard deviation too.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data-structures.html#cb179-1" tabindex="-1"></a><span class="fu">max</span>(x)</span></code></pre></div>
<pre><code>## [1] 22</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data-structures.html#cb181-1" tabindex="-1"></a><span class="fu">min</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-structures.html#cb183-1" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 45</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-structures.html#cb185-1" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-structures.html#cb187-1" tabindex="-1"></a><span class="fu">median</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data-structures.html#cb189-1" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##       2       5       5       9      11      22</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data-structures.html#cb191-1" tabindex="-1"></a><span class="fu">sd</span>(x)</span></code></pre></div>
<pre><code>## [1] 7.968689</code></pre>
<p>rank() function ranks the elements. It plays fair, giving ties an average rank. sort() orders elements either ascending (from the smallest to the biggest) or descending (decreasing = T will make it sort from the biggest to the smallest).</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="data-structures.html#cb193-1" tabindex="-1"></a><span class="fu">rank</span>(x)</span></code></pre></div>
<pre><code>## [1] 2.5 1.0 5.0 4.0 2.5</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data-structures.html#cb195-1" tabindex="-1"></a><span class="fu">sort</span>(x)</span></code></pre></div>
<pre><code>## [1]  2  5  5 11 22</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="data-structures.html#cb197-1" tabindex="-1"></a><span class="fu">sort</span>(x, <span class="at">decreasing =</span> T)</span></code></pre></div>
<pre><code>## [1] 22 11  5  5  2</code></pre>
<p>diff() iterates the differences between adjacent elements of vector x.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="data-structures.html#cb199-1" tabindex="-1"></a><span class="fu">diff</span>(x)</span></code></pre></div>
<pre><code>## [1]  -3  20 -11  -6</code></pre>
<p>rev() will reverse the position of the elements in the vector.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="data-structures.html#cb201-1" tabindex="-1"></a><span class="fu">rev</span>(x)</span></code></pre></div>
<pre><code>## [1]  5 11 22  2  5</code></pre>
<p>Operations are performed element by element, like log, sqrt, x^2, etc. They return vectors too.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data-structures.html#cb203-1" tabindex="-1"></a><span class="fu">log</span>(x)</span></code></pre></div>
<pre><code>## [1] 1.6094379 0.6931472 3.0910425 2.3978953 1.6094379</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="data-structures.html#cb205-1" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code></pre></div>
<pre><code>## [1] 2.236068 1.414214 4.690416 3.316625 2.236068</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="data-structures.html#cb207-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  25   4 484 121  25</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="data-structures.html#cb209-1" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span>x <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 11  5 45 23 11</code></pre>
<p>Exclude the second element from x and save as y:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="data-structures.html#cb211-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb211-2"><a href="data-structures.html#cb211-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1]  5 22 11  5</code></pre>
<p>Add an element 100 to vector x between its second and the third element:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="data-structures.html#cb213-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)     </span>
<span id="cb213-2"><a href="data-structures.html#cb213-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(x[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="dv">100</span>, x[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] )  </span>
<span id="cb213-3"><a href="data-structures.html#cb213-3" tabindex="-1"></a>x  <span class="co"># Now it contains the added 100                        </span></span></code></pre></div>
<pre><code>## [1]   5   2 100  22  11   5</code></pre>
<p>The length of the new created x is:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="data-structures.html#cb215-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Use the two commands below to add a new element to the end. They generate the same results.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="data-structures.html#cb217-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>) </span>
<span id="cb217-2"><a href="data-structures.html#cb217-2" tabindex="-1"></a><span class="fu">c</span>(x, <span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1]  5  2 22 11  5  7</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="data-structures.html#cb219-1" tabindex="-1"></a><span class="fu">append</span>(x, <span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1]  5  2 22 11  5  7</code></pre>
<p>Create an empty vector y:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="data-structures.html#cb221-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb221-2"><a href="data-structures.html#cb221-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="data-structures.html#cb223-1" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Here’s how to find unique elements:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="data-structures.html#cb225-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>) </span>
<span id="cb225-2"><a href="data-structures.html#cb225-2" tabindex="-1"></a><span class="fu">unique</span>(x)</span></code></pre></div>
<pre><code>## [1]  5  2 22 11</code></pre>
<p>And the frequencies of the unique elements:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="data-structures.html#cb227-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb227-2"><a href="data-structures.html#cb227-2" tabindex="-1"></a><span class="fu">table</span>(x)</span></code></pre></div>
<pre><code>## x
##  2  5 11 22 
##  1  2  1  1</code></pre>
<p>To locate the max or min, find a particular value, or satisfy a condition like <span class="math inline">\(x^2&gt;100\)</span>:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="data-structures.html#cb229-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb229-2"><a href="data-structures.html#cb229-2" tabindex="-1"></a><span class="fu">which.max</span>(x)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="data-structures.html#cb231-1" tabindex="-1"></a><span class="fu">which.min</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="data-structures.html#cb233-1" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">==</span> <span class="dv">11</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="data-structures.html#cb235-1" tabindex="-1"></a><span class="fu">which</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<p>You can randomly select some elements from the vector. Do you always get the same results if you run the following code more than once? The answer is “No”. Each run is a surprise, like a mini lottery:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="data-structures.html#cb237-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb237-2"><a href="data-structures.html#cb237-2" tabindex="-1"></a><span class="fu">sample</span>(x, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 22 11  2</code></pre>
<p>Elements in the vector can have names. Personalize elements with names and type “x” to see the difference.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="data-structures.html#cb239-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb239-2"><a href="data-structures.html#cb239-2" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;David&quot;</span>, <span class="st">&quot;Beck&quot;</span>, <span class="st">&quot;Zach&quot;</span>, <span class="st">&quot;Amy&quot;</span>, <span class="st">&quot;John&quot;</span>)</span>
<span id="cb239-3"><a href="data-structures.html#cb239-3" tabindex="-1"></a>x  <span class="co"># Now it&#39;s a who&#39;s who of data!</span></span></code></pre></div>
<pre><code>## David  Beck  Zach   Amy  John 
##     5     2    22    11     5</code></pre>
<p>You can refer to the elements by their names now.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="data-structures.html#cb241-1" tabindex="-1"></a>x[<span class="st">&quot;Amy&quot;</span>] <span class="co"># Amy says hi!</span></span></code></pre></div>
<pre><code>## Amy 
##  11</code></pre>
<p>The <em>any()</em> and <em>all()</em> functions produce logical values. They return if any or all of their arguments are TRUE.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="data-structures.html#cb243-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">5</span>)</span>
<span id="cb243-2"><a href="data-structures.html#cb243-2" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="data-structures.html#cb245-1" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="data-structures.html#cb247-1" tabindex="-1"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="data-structures.html#cb249-1" tabindex="-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Who’s greater than 10 in this vector party?</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="data-structures.html#cb251-1" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">10</span>  <span class="co"># Raise your hand if you&#39;re over 10!</span></span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<p>There are multiple methods to get a subset from a vector. Here are some examples:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="data-structures.html#cb253-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb253-2"><a href="data-structures.html#cb253-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] NA  2 -4 NA  9 -1  5</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="data-structures.html#cb255-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[x <span class="sc">&lt;</span> <span class="dv">0</span>]  <span class="co"># Extract the rebels (negative values)</span></span>
<span id="cb255-2"><a href="data-structures.html#cb255-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] NA -4 NA -1</code></pre>
<p>Vectors <strong>x</strong> and <strong>y</strong> contain annoying NA values, which can be removed using <strong>is.na()</strong> function.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="data-structures.html#cb257-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> y[<span class="sc">!</span><span class="fu">is.na</span>(y)]   <span class="co"># Remove all NAs in y. Or equivalently, keep all NOT NAs in y. </span></span>
<span id="cb257-2"><a href="data-structures.html#cb257-2" tabindex="-1"></a>                    <span class="co"># The exclamation &#39;!&#39; means NOT.</span></span>
<span id="cb257-3"><a href="data-structures.html#cb257-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] -4 -1</code></pre>
<p>Now the updated variable y contains only numerical values. All NAs have been removed. To assign the “cleaned” vector to a different variable z:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="data-structures.html#cb259-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> y[<span class="sc">!</span><span class="fu">is.na</span>(y)]   <span class="co"># Assign the new vector without NAs to z.</span></span>
<span id="cb259-2"><a href="data-structures.html#cb259-2" tabindex="-1"></a>z                 </span></code></pre></div>
<pre><code>## [1] -4 -1</code></pre>
<p>Alternatively, you can use the <em>subset()</em> function to get a “clean” data without NAs. For example:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="data-structures.html#cb261-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb261-2"><a href="data-structures.html#cb261-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">subset</span>(x, x <span class="sc">&lt;</span> <span class="dv">0</span>)</span>
<span id="cb261-3"><a href="data-structures.html#cb261-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] -4 -1</code></pre>
<p>Let’s peek into the function <strong>is.na()</strong>, which checks if a vector contains NA or not. Note that the result is a vector holding logical values. Do we have missing values in the vector x?</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="data-structures.html#cb263-1" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>In R, <strong>NA</strong> represents missing or unavailable values, like a placeholder for “I don’t know.”</p>
<p>Consider the case where a given value isn’t available in the data set. Unlike simply omitting values, <strong>NA</strong> explicitly indicates unavailability. This distinction is important for accurate data analysis. Many functions that work with vectors treat these values specially. For instance, the sum of x might not be straightforward due to NAs:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="data-structures.html#cb265-1" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>The result <strong>NA</strong> is considered “not available” because one of the vector’s values is <strong>NA</strong>. R is responsible; It won’t just blithely add up the numbers without warning you about the incomplete data. However, you can explicitly tell <strong>sum</strong> (and many other functions) to remove <strong>NA</strong> values before R starts the calculations.</p>
<p>Let’s find how <strong>sum</strong> function handles NAs:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="data-structures.html#cb267-1" tabindex="-1"></a>? sum</span></code></pre></div>
<p>As you see in the documentation, <strong>sum</strong> has an <strong>na.rm</strong> parameter to handle NA values. The optional argument <strong>na.rm</strong> is set to <strong>FALSE</strong> by default, but if you set it to <strong>TRUE</strong>, all NAs will be removed from the vector before the calculation is performed. In other words, you can use the argument <strong>na.rm = T</strong> or <strong>na.rm = TRUE</strong> to ignore all NAs during calculations.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="data-structures.html#cb268-1" tabindex="-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co">#  Calculate a sum excluding NAs</span></span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-146}</p>
</blockquote>
<blockquote>
<p>For vector var1 &lt;- c(NA, 334, 566, 319, NA, -307).</p>
<ol style="list-style-type: lower-alpha">
<li>Create a new vector var2 by removing all NAs from var1.</li>
<li>Calculate the mean of var1, ignoring the NAs.
:::</li>
</ol>
</blockquote>
<p>To illustrate the difference between NULL and NA, let’s experiment with vec.x:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="data-structures.html#cb270-1" tabindex="-1"></a><span class="co"># Build up vec.x with numbers greater than 10 in the vector </span></span>
<span id="cb270-2"><a href="data-structures.html#cb270-2" tabindex="-1"></a>vec.x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">0</span>, <span class="dv">9</span>)</span>
<span id="cb270-3"><a href="data-structures.html#cb270-3" tabindex="-1"></a>z1 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb270-4"><a href="data-structures.html#cb270-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> vec.x) {</span>
<span id="cb270-5"><a href="data-structures.html#cb270-5" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">10</span>) z1 <span class="ot">&lt;-</span> <span class="fu">c</span>(z1, i)</span>
<span id="cb270-6"><a href="data-structures.html#cb270-6" tabindex="-1"></a>}</span>
<span id="cb270-7"><a href="data-structures.html#cb270-7" tabindex="-1"></a>z1</span></code></pre></div>
<pre><code>## [1] 40 11</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="data-structures.html#cb272-1" tabindex="-1"></a><span class="fu">length</span>(z1) <span class="co"># How long is z1?</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="data-structures.html#cb274-1" tabindex="-1"></a><span class="co"># Build up vec.x with numbers greater than 10 in the vector</span></span>
<span id="cb274-2"><a href="data-structures.html#cb274-2" tabindex="-1"></a>vec.x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">0</span>, <span class="dv">9</span>)</span>
<span id="cb274-3"><a href="data-structures.html#cb274-3" tabindex="-1"></a>z2 <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb274-4"><a href="data-structures.html#cb274-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> vec.x) {</span>
<span id="cb274-5"><a href="data-structures.html#cb274-5" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">10</span>) z2 <span class="ot">&lt;-</span> <span class="fu">c</span>(z2, i)</span>
<span id="cb274-6"><a href="data-structures.html#cb274-6" tabindex="-1"></a>}</span>
<span id="cb274-7"><a href="data-structures.html#cb274-7" tabindex="-1"></a>z2</span></code></pre></div>
<pre><code>## [1] NA 40 11</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="data-structures.html#cb276-1" tabindex="-1"></a><span class="fu">length</span>(z2)  <span class="co"># And z2?</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>The length of <strong>z1</strong> and <strong>z2</strong> reveals that the NULL is counted as nonexistent like the invisible man, while NA is a missing value, taking up space.</p>
<p>Vectors in R are like the ingredients in a recipe – mix them right, you’ll create data-analysis delicacies. Let’s peek the operation between a vector and a scalar.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="data-structures.html#cb278-1" tabindex="-1"></a><span class="co"># Vector meets a scalar</span></span>
<span id="cb278-2"><a href="data-structures.html#cb278-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb278-3"><a href="data-structures.html#cb278-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb278-4"><a href="data-structures.html#cb278-4" tabindex="-1"></a>x <span class="sc">+</span> y </span></code></pre></div>
<pre><code>## [1]  2  5  9 10 11</code></pre>
<p>As you can see, 1 is added to each element in x. The operation is equivalent adding a vector of ones to x:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="data-structures.html#cb280-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb280-2"><a href="data-structures.html#cb280-2" tabindex="-1"></a>x <span class="sc">+</span> y</span></code></pre></div>
<pre><code>## [1]  2  5  9 10 11</code></pre>
<p>The operation between vectors with the same length is element-wise. For example:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="data-structures.html#cb282-1" tabindex="-1"></a><span class="co"># Two vectors with the same length</span></span>
<span id="cb282-2"><a href="data-structures.html#cb282-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb282-3"><a href="data-structures.html#cb282-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">15</span>)</span>
<span id="cb282-4"><a href="data-structures.html#cb282-4" tabindex="-1"></a>x <span class="sc">+</span> y   <span class="co"># Element-wise addition</span></span></code></pre></div>
<pre><code>## [1]  2  6  8 12 25</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="data-structures.html#cb284-1" tabindex="-1"></a>x <span class="sc">*</span> y   <span class="co"># Element-wise multiplication, each pair in sync</span></span></code></pre></div>
<pre><code>## [1]   1   8   0  27 150</code></pre>
<p>If vectors have different length, R will automatically <em>recycle</em> the shorter one, until it has the same length as the longer one. For example:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="data-structures.html#cb286-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb286-2"><a href="data-structures.html#cb286-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb286-3"><a href="data-structures.html#cb286-3" tabindex="-1"></a>x <span class="sc">+</span> y</span></code></pre></div>
<pre><code>## [1]  2  6  9 11 11</code></pre>
<p>y was <em>recycled</em>. Here’s what R is really doing:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="data-structures.html#cb288-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb288-2"><a href="data-structures.html#cb288-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb288-3"><a href="data-structures.html#cb288-3" tabindex="-1"></a>x <span class="sc">+</span> y</span></code></pre></div>
<pre><code>## [1]  2  6  9 11 11</code></pre>
<p><em>ifelse()</em> function allows you to choose elements conditionally. Its structure is <em>ifelse(test, yes, no)</em>. The <strong>yes</strong> or <strong>no</strong> depends on whether the test is true or false. Let’s see it in action:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-structures.html#cb290-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb290-2"><a href="data-structures.html#cb290-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&#39;Positive&#39;</span>, <span class="st">&#39;Negative&#39;</span>)</span>
<span id="cb290-3"><a href="data-structures.html#cb290-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] &quot;Positive&quot; &quot;Negative&quot; &quot;Positive&quot; &quot;Negative&quot; &quot;Negative&quot; &quot;Positive&quot;</code></pre>
<p>In this example, the elements in y are either ‘positive’ or ‘negative’, based on whether elements in x are greater or less than 0.</p>
<p>Another twist with ifelse():</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-structures.html#cb292-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="dv">6</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb292-2"><a href="data-structures.html#cb292-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">ifelse</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="fu">abs</span>(x), <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">1</span>) </span>
<span id="cb292-3"><a href="data-structures.html#cb292-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 7 9 6 3 2</code></pre>
<p>Here in this case, if an element in x is less than 0 (if x is negative), y takes the absolute value of the element. Otherwise (if x is positive or zero), multiply the element by 2 then add 1 for y.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-156}</p>
</blockquote>
<blockquote>
<p>Randomly select 10 integers from 1 to 100 using sample selection function. Create a vector y which satisfies the following conditions: if an selected integer is an even number, y is ‘even’, otherwise y returns ‘odd’.
:::</p>
</blockquote>
<p>To find where elements of one vector appear in another, use the <strong>match()</strong> function:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-structures.html#cb294-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">3</span>)</span>
<span id="cb294-2"><a href="data-structures.html#cb294-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">11</span>, <span class="dv">8</span>)</span>
<span id="cb294-3"><a href="data-structures.html#cb294-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">match</span>(y, x) <span class="co"># Where do y&#39;s elements show up in x?</span></span>
<span id="cb294-4"><a href="data-structures.html#cb294-4" tabindex="-1"></a>z <span class="co"># Unveil the positions</span></span></code></pre></div>
<pre><code>## [1]  1  4 NA</code></pre>
<p>The elements 5 and 8 in y locate at the first and fourth position of x respectively. The function ignores the duplicated 5 which locates at the second position of x. The last element 8 in y is not found in x, which returns an “NA”.</p>
</div>
<div id="an-example-of-vector-usage" class="section level4 hasAnchor" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> An example of vector usage<a href="data-structures.html#an-example-of-vector-usage" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Image a fishing Journey where Tom, Jerry, and Mickey went fishing and caught 7, 3, and 9 fishes, respectively, shown in a vector:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-structures.html#cb296-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] 7 3 9</code></pre>
<p>The <strong>c()</strong> function creates a new vector by combining a set of values. Give it a name if we want to use it later:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-structures.html#cb298-1" tabindex="-1"></a>fishes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb298-2"><a href="data-structures.html#cb298-2" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>## [1] 7 3 9</code></pre>
<p><strong>fishes</strong> is a vector with 3 elements. Many functions can be used to operate on this vector. Let’s start with a bar plot:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="data-structures.html#cb300-1" tabindex="-1"></a><span class="fu">barplot</span>(fishes)  <span class="co"># See figure 3.3A</span></span></code></pre></div>
<p>Compute the total catch:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="data-structures.html#cb301-1" tabindex="-1"></a><span class="fu">sum</span>(fishes)</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
<p>To access the individual elements by indices:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="data-structures.html#cb303-1" tabindex="-1"></a>fishes[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-163}</p>
</blockquote>
<blockquote>
<p>Did Mickey catch more fishes than Tom and Jerry combined? Find out the answer using the <strong>fishes</strong> vector and return a TRUE or FALSE value.
:::</p>
</blockquote>
<p>Jerry protested that, per minimum size fishing rules, a ¼ inch long fish he caught and released was not counted in properly. So add one more to Jerry’s catch by changing the value in the 2nd element:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="data-structures.html#cb305-1" tabindex="-1"></a>fishes[<span class="dv">2</span>] <span class="ot">&lt;-</span> fishes[<span class="dv">2</span>] <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb305-2"><a href="data-structures.html#cb305-2" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>## [1] 7 4 9</code></pre>
<p>Add an 1 to the current value of the 2nd element of 3, the result of 4 is assigned back to the 2nd element itself. As a result, the 2nd element is increased by 1. This is not a math equation, but a value assignment operation. More rigorously, we should write this using <strong>&lt;-</strong>.</p>
<p>We can also directly overwrite the values.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="data-structures.html#cb307-1" tabindex="-1"></a>fishes[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb307-2"><a href="data-structures.html#cb307-2" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>## [1] 7 4 9</code></pre>
<p>Now they started a camp fire, and each ate 1 fish for dinner. The left fishes after dinner:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="data-structures.html#cb309-1" tabindex="-1"></a>fishes2 <span class="ot">&lt;-</span> fishes <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb309-2"><a href="data-structures.html#cb309-2" tabindex="-1"></a>fishes2</span></code></pre></div>
<pre><code>## [1] 6 3 8</code></pre>
<p>R subtracts 1 from each individual element. Most arithmetic operations work just as well on vectors as they do on single values. If you add a scalar (a single value) to a vector, the scalar will be added to each value in the vector, returning a new vector with the results.</p>
<p>Then, something bad happened in the fishing journey: While they are sleeping in their camping site, a fox stole 3 fishes from Jerry’s bucket, and 4 fishes from Mickey’s bucket. How many fishes were left now?</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="data-structures.html#cb311-1" tabindex="-1"></a>stolen <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>)  <span class="co"># Fishes stolen by a fox</span></span>
<span id="cb311-2"><a href="data-structures.html#cb311-2" tabindex="-1"></a>fishes2 <span class="sc">-</span> stolen <span class="co"># Remaining fishes</span></span></code></pre></div>
<pre><code>## [1] 6 0 4</code></pre>
<p>If you add or subtract two vectors of the same length, R will take the corresponding elements from each vector and add or subtract them. The 0 is necessary to keep the same vector length.</p>
<p>Proud of himself, Mickey wanted to make a 5ft x 5ft poster to show himself the best fisherman. Knowing that <strong>a picture is worth a thousand words</strong>, he learned R and started plotting, trying to put his name on the plots. The data elements in a vector can have names or labels for a more personalized touch:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="data-structures.html#cb313-1" tabindex="-1"></a><span class="fu">names</span>(fishes) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Jerry&quot;</span>, <span class="st">&quot;Mickey&quot;</span>)</span></code></pre></div>
<p>The right side is a vector, holding 3 character values. These values are assigned as the names of the 3 elements in the fishes vector. names() is a built-in function. Visualize the vector:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-structures.html#cb314-1" tabindex="-1"></a>fishes</span></code></pre></div>
<pre><code>##    Tom  Jerry Mickey 
##      7      4      9</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="data-structures.html#cb316-1" tabindex="-1"></a><span class="fu">barplot</span>(fishes)   <span class="co"># Bar plot with names. See figure 3.3B</span></span></code></pre></div>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:6-1"></span>
<img src="images/img0601_fish.png" alt="Simple Bar plot" width="80%" />
<p class="caption">
Figure 3.3: Simple Bar plot
</p>
</div>
<p>Assigning names for a vector also enables you to use labels to access each element. Try getting the value for Jerry:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="data-structures.html#cb317-1" tabindex="-1"></a>fishes[<span class="st">&quot;Jerry&quot;</span>]  <span class="co"># Jerry&#39;s catch</span></span></code></pre></div>
<pre><code>## Jerry 
##     4</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-171}</p>
</blockquote>
<blockquote>
<p>Assign the value ‘Ten’ to <strong>Tom</strong> using his name rather than the index in the fishes vector.
:::</p>
</blockquote>
<p>Tom proposes ambitiously that the goal for the next fishing trip is to double their catches.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="data-structures.html#cb319-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> fishes</span></code></pre></div>
<pre><code>##    Tom  Jerry Mickey 
##     14      8     18</code></pre>
<p>Hopelessly optimistic, Jerry proposed that next time each should “square” their catches, so that together they might feed the entire school.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="data-structures.html#cb321-1" tabindex="-1"></a><span class="fu">sum</span>(fishes <span class="sc">^</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 146</code></pre>
<p>Note that two operations are nested. You can obviously do it in two steps.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-174}</p>
</blockquote>
<blockquote>
<p>Create a vector representing the prices of groceries: bread $2.5, milk $3.1, jam $5.3, beer $9.1. And visualize it with a bat plot.
:::</p>
</blockquote>
</div>
<div id="scatter-plots-of-two-vectors" class="section level4 hasAnchor" number="3.2.1.3">
<h4><span class="header-section-number">3.2.1.3</span> Scatter Plots of two vectors<a href="data-structures.html#scatter-plots-of-two-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <strong>plot</strong> function takes two vectors, one for X values and one for Y values, and creates a scatter plot. Let’s explore the relationship between numbers and their square roots.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="data-structures.html#cb323-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="fl">0.1</span>)</span>
<span id="cb323-2"><a href="data-structures.html#cb323-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x)</span></code></pre></div>
<p>Then simply call plot with the two vectors:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="data-structures.html#cb324-1" tabindex="-1"></a><span class="fu">plot</span>(x, y)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>Great job! Notice that values from the first argument (x) forms the horizontal axis, and values from the second (y) takes the vertical stage.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-177}</p>
</blockquote>
<blockquote>
<p>Bring up a vector “x” with 21 integers from -10 to 10, then create a scatter plot showing x^2 against x.
:::</p>
</blockquote>
</div>
</div>
<div id="matrices" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Matrices<a href="data-structures.html#matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>A matrix</strong> is a two-dimensional vector(rows and columns) with two additional attributes: the number of rows(nrow) and the number of columns(ncol). It can only contain one type of values, i.e. numbers, characters, or logical values.</p>
<p>We can create a matrix using <em>rbind</em> or <em>cbind</em> function. <em>rbind</em> combines all rows and <em>cbind</em> combines all columns:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="data-structures.html#cb325-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">15</span>)) <span class="co"># Combine vectors by row</span></span>
<span id="cb325-2"><a href="data-structures.html#cb325-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    5
## [2,]   10   13   15</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="data-structures.html#cb327-1" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">15</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>)) <span class="co"># Combine vectors by column</span></span>
<span id="cb327-2"><a href="data-structures.html#cb327-2" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3   10    3
## [2,]    4   13    2
## [3,]    5   15    1</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="data-structures.html#cb329-1" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">rbind</span>(m, n)   <span class="co"># Combine two matrices m and n by row</span></span>
<span id="cb329-2"><a href="data-structures.html#cb329-2" tabindex="-1"></a>s</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    5
## [2,]   10   13   15
## [3,]    3   10    3
## [4,]    4   13    2
## [5,]    5   15    1</code></pre>
<p>To use <em>rbind()</em> combining matrices by row, the matrices must have the same number of columns. Similar to <em>cbind()</em>, the matrices must have same number of rows to combine by column.</p>
<p>The <em>matrix()</em> function is another way to create matrices:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="data-structures.html#cb331-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb331-2"><a href="data-structures.html#cb331-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<p>The argument <em>seq()</em> create a sequence from 1 to 12, <em>nrow()</em> and <em>ncol()</em> define the number of rows and columns in the matrix, respectively. It’s not necessary to define both <em>nrow()</em> and <em>ncol()</em>. Since if one is provided, the other one is inferred from the length of the data.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="data-structures.html#cb333-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb333-2"><a href="data-structures.html#cb333-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<p>Notice that the matrix is filled in column-wise by default. Add the <em>byrow = TRUE</em> to the argument to fill a matrix by row-wise:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="data-structures.html#cb335-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)    <span class="co"># Fill matrix row-wise</span></span>
<span id="cb335-2"><a href="data-structures.html#cb335-2" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9
## [4,]   10   11   12</code></pre>
<p>Also, you can generate a matrix by creating an empty matrix first:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="data-structures.html#cb337-1" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb337-2"><a href="data-structures.html#cb337-2" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   NA   NA   NA
## [2,]   NA   NA   NA
## [3,]   NA   NA   NA
## [4,]   NA   NA   NA</code></pre>
<p>Then assign values to the empty matrix. For example, assign the value 3 to the position at first row and first column, and value 100 to the position of the second row and third column:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="data-structures.html#cb339-1" tabindex="-1"></a>w[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb339-2"><a href="data-structures.html#cb339-2" tabindex="-1"></a>w[<span class="dv">2</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb339-3"><a href="data-structures.html#cb339-3" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3   NA   NA
## [2,]   NA   NA  100
## [3,]   NA   NA   NA
## [4,]   NA   NA   NA</code></pre>
<p>A matrix can also be created from a vector by setting its dimensions using function dim().</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="data-structures.html#cb341-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">76</span>)</span>
<span id="cb341-2"><a href="data-structures.html#cb341-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  5  6  9  8 10 21 15 76</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="data-structures.html#cb343-1" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="data-structures.html#cb345-1" tabindex="-1"></a><span class="fu">dim</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb345-2"><a href="data-structures.html#cb345-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   21
## [2,]    5    8   15
## [3,]    6   10   76</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="data-structures.html#cb347-1" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>Using <em>as.matrix()</em> function, you can convert a non-matrix data set to a matrix. Take the data <em>iris</em> as an example.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="data-structures.html#cb349-1" tabindex="-1"></a>subset.iris <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb349-2"><a href="data-structures.html#cb349-2" tabindex="-1"></a><span class="fu">class</span>(subset.iris)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>The data structure of <em>subset.iris</em> is a data frame. Now we turn it into a matrix.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="data-structures.html#cb351-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(subset.iris) <span class="co"># Data frame to matrix</span></span>
<span id="cb351-2"><a href="data-structures.html#cb351-2" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div id="matrix-operations" class="section level4 hasAnchor" number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> Matrix operations<a href="data-structures.html#matrix-operations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Matrices support a variety of operations:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="data-structures.html#cb353-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb353-2"><a href="data-structures.html#cb353-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="data-structures.html#cb355-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span> <span class="co"># Square each element in x</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   25
## [2,]    4   16   36</code></pre>
<p>Transpose of x for the convenience of view and analysis:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="data-structures.html#cb357-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">t</span>(x)</span>
<span id="cb357-2"><a href="data-structures.html#cb357-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="data-structures.html#cb359-1" tabindex="-1"></a>x <span class="sc">%*%</span> y <span class="co"># Matrix Multiplication</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   35   44
## [2,]   44   56</code></pre>
<p>Subtraction requires matching dimensions:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="data-structures.html#cb361-1" tabindex="-1"></a>x <span class="sc">-</span> y  <span class="co"># Matrix subtraction</span></span></code></pre></div>
<p>Error in x - y : non-conformable arrays</p>
<p>The error reminds us that the matrices for subtraction must have same dimensions.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="data-structures.html#cb362-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>)    </span>
<span id="cb362-2"><a href="data-structures.html#cb362-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    1    1
## [2,]    1    1    1</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="data-structures.html#cb364-1" tabindex="-1"></a>x <span class="sc">-</span> y  <span class="co"># Matrix subtraction now works!</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    2    4
## [2,]    1    3    5</code></pre>
<p>Create a new matrix from calculations by doubling each element and add 5:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="data-structures.html#cb366-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb366-2"><a href="data-structures.html#cb366-2" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    7   11   15
## [2,]    9   13   17</code></pre>
<p>You can also get a logical matrix using logical code.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="data-structures.html#cb368-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">34</span>, <span class="dv">51</span>, <span class="dv">27</span>, <span class="dv">26</span>, <span class="dv">10</span>), <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb368-2"><a href="data-structures.html#cb368-2" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">20</span>  <span class="co"># Logical matrix</span></span></code></pre></div>
<pre><code>##       [,1]  [,2]
## [1,] FALSE  TRUE
## [2,]  TRUE  TRUE
## [3,]  TRUE FALSE</code></pre>
<p>To extract all <em>TRUE</em> results from x:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="data-structures.html#cb370-1" tabindex="-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">20</span>]</span></code></pre></div>
<pre><code>## [1] 34 51 27 26</code></pre>
<p>Similarly, you can define a vector with logical values, then apply it to x to get all TRUE values.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="data-structures.html#cb372-1" tabindex="-1"></a>log.vau <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb372-2"><a href="data-structures.html#cb372-2" tabindex="-1"></a>x[log.vau]  <span class="co"># Filter by logical vector</span></span></code></pre></div>
<pre><code>## [1] 34 51 27 26</code></pre>
<p>Remember matrix is a vector, and filled by column-wise. Therefore the vector with logical values applies to x by column-wise order.</p>
<p>Since matrices are vectors with two dimensions, all operations for vectors also apply to matrices. For example:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="data-structures.html#cb374-1" tabindex="-1"></a>x[<span class="dv">1</span>, ]                        <span class="co"># Get the first row of x</span></span></code></pre></div>
<pre><code>## [1] 12 27</code></pre>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="data-structures.html#cb376-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(iris[, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])   <span class="co"># Take out the first 4 columns of iris and convert it to matrix.  </span></span>
<span id="cb376-2"><a href="data-structures.html#cb376-2" tabindex="-1"></a>c <span class="ot">&lt;-</span> a[<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]             <span class="co"># Extract a subset</span></span>
<span id="cb376-3"><a href="data-structures.html#cb376-3" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>##      Sepal.Width Petal.Length Petal.Width
## [1,]         3.6          1.4         0.2
## [2,]         3.9          1.7         0.4
## [3,]         3.4          1.4         0.3
## [4,]         3.4          1.5         0.2
## [5,]         2.9          1.4         0.2
## [6,]         3.1          1.5         0.1</code></pre>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="data-structures.html#cb378-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb378-2"><a href="data-structures.html#cb378-2" tabindex="-1"></a>c[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ] <span class="ot">&lt;-</span> x                 <span class="co"># Replace the first two rows of c with x</span></span>
<span id="cb378-3"><a href="data-structures.html#cb378-3" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>##      Sepal.Width Petal.Length Petal.Width
## [1,]         1.0          3.0         5.0
## [2,]         2.0          4.0         6.0
## [3,]         3.4          1.4         0.3
## [4,]         3.4          1.5         0.2
## [5,]         2.9          1.4         0.2
## [6,]         3.1          1.5         0.1</code></pre>
<p>To know the mean and sum of these rows and columns, try <em>rowMeans()</em>, <em>colMeans()</em>, <em>rowSums()</em>, <em>colSums()</em>.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="data-structures.html#cb380-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb380-2"><a href="data-structures.html#cb380-2" tabindex="-1"></a><span class="fu">rowMeans</span>(x)</span></code></pre></div>
<pre><code>##     1     2     3     4     5     6     7     8     9    10 
## 2.550 2.375 2.350 2.350 2.550 2.850 2.425 2.525 2.225 2.400</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="data-structures.html#cb382-1" tabindex="-1"></a><span class="fu">colMeans</span>(x)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##         4.86         3.31         1.45         0.22</code></pre>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="data-structures.html#cb384-1" tabindex="-1"></a><span class="fu">rowSums</span>(x)</span></code></pre></div>
<pre><code>##    1    2    3    4    5    6    7    8    9   10 
## 10.2  9.5  9.4  9.4 10.2 11.4  9.7 10.1  8.9  9.6</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="data-structures.html#cb386-1" tabindex="-1"></a><span class="fu">colSums</span>(x)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##         48.6         33.1         14.5          2.2</code></pre>
<p>Now use <strong>apply()</strong> function for more complex calculations, like computing the standard deviations by columns. The second argument “1” or “2” in <em>apply()</em> represents rows or columns that the function applies to.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="data-structures.html#cb388-1" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, sd) <span class="co"># Calculate the standard deviation of each column in x </span></span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##   0.29135698   0.30713732   0.10801234   0.07888106</code></pre>
<p>Or calculate medians by rows, using 1 for rows.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="data-structures.html#cb390-1" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">1</span>, median)  <span class="co"># Calculate the median of each row in x </span></span></code></pre></div>
<pre><code>##    1    2    3    4    5    6    7    8    9   10 
## 2.45 2.20 2.25 2.30 2.50 2.80 2.40 2.45 2.15 2.30</code></pre>
<p>Visualize a large matrix data with a heat map:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="data-structures.html#cb392-1" tabindex="-1"></a><span class="fu">heatmap</span>(x, <span class="at">scale =</span> <span class="st">&quot;column&quot;</span>, <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">5</span>))</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-199-1.png" width="672" /></p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-200}</p>
</blockquote>
<blockquote>
<p>Given <em>subset.iris &lt;- as.matrix(iris[1:10, 1:4])</em>, calculate the column-wise mean of <em>subset.iris</em> using the <strong>apply</strong> function.
:::</p>
</blockquote>
</div>
<div id="examples-of-matrices" class="section level4 hasAnchor" number="3.2.2.2">
<h4><span class="header-section-number">3.2.2.2</span> Examples of matrices<a href="data-structures.html#examples-of-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Example 1: Finding Minimal Values</strong>
Let’s define a function find.min.posi first to find the positions of the minimal value in each column of a matrix, then apply it to <em>subset.iris &lt;- as.matrix(iris[1:10, 1:4])</em>.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="data-structures.html#cb393-1" tabindex="-1"></a>find.min.posi <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb393-2"><a href="data-structures.html#cb393-2" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="cf">function</span>(xcol){</span>
<span id="cb393-3"><a href="data-structures.html#cb393-3" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">which.min</span>(xcol))</span>
<span id="cb393-4"><a href="data-structures.html#cb393-4" tabindex="-1"></a>  }</span>
<span id="cb393-5"><a href="data-structures.html#cb393-5" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, y))</span>
<span id="cb393-6"><a href="data-structures.html#cb393-6" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="data-structures.html#cb394-1" tabindex="-1"></a>subset.iris <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb394-2"><a href="data-structures.html#cb394-2" tabindex="-1"></a><span class="fu">find.min.posi</span>(subset.iris)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##            9            9            3           10</code></pre>
<p>This code identifies the minimum values in each column and returns their positions. For example, the minimal value for Sepal.Length is 4.4, which locates in the 9th row. The minimal values locate in the 9th, 3rd and 10th row for Sepal.Width, Petal.Length and Petal.Width, respectively.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-203}</p>
</blockquote>
<blockquote>
<p>Given <em>subset.iris.2 &lt;- as.matrix(iris[, 1:4])</em>, complete the <em>find.max</em> function below to find the maximal value in each column of <em>subset.iris.2</em>.</p>
<p>find.max &lt;- function(x){<br />
y &lt;- function(xcol){<br />
return(_________)<br />
}<br />
return(_______(x, ____, y))<br />
}</p>
<p>________(subset.iris.2)<br />
:::</p>
</blockquote>
<p>To enhance the readability of matrices, use functions <em>colnames()</em> and <em>rownames()</em> to assign names to the columns and rows:</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="data-structures.html#cb396-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>))</span>
<span id="cb396-2"><a href="data-structures.html#cb396-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="data-structures.html#cb398-1" tabindex="-1"></a><span class="fu">colnames</span>(y) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;First.Col&#39;</span>, <span class="st">&#39;Second.Col&#39;</span>, <span class="st">&#39;Third.Col&#39;</span>)</span>
<span id="cb398-2"><a href="data-structures.html#cb398-2" tabindex="-1"></a><span class="fu">row.names</span>(y) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;odd.number&#39;</span>, <span class="st">&#39;even.number&#39;</span>)</span>
<span id="cb398-3"><a href="data-structures.html#cb398-3" tabindex="-1"></a>y  <span class="co"># Matrix with named rows and columns</span></span></code></pre></div>
<pre><code>##             First.Col Second.Col Third.Col
## odd.number          1          3         5
## even.number         2          4         6</code></pre>
<p>Another interesting application of the matrix is the manipulation of gray-scale images. You may have heard a pixel matrix which represents “picture elements”. They are small little dots making up images. Each image is a matrix with thousands or even millions of pixels. Each pixel can only be one color at a time, its brightness is represented by a single numeric value. The range of the colors from black to white correspond to the scale varies from 0% to 100%. If the color value 0.2941 is assigned to a pixel which locates 3rd row and 4th column, then the dot at the 3rd row and the 4th column is pretty dark.</p>
<p>Sometimes it’s necessary to blur images or add mosaic to a picture for various purposes. See the example of adding a mosaic effect to a gray-scale image.</p>
<p><strong>Example 2: Adding mosaic to an image of Einstein</strong></p>
<p>First, let’s read and display a gray-scale image of Einstein.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="data-structures.html#cb400-1" tabindex="-1"></a><span class="fu">library</span>(pixmap)</span>
<span id="cb400-2"><a href="data-structures.html#cb400-2" tabindex="-1"></a>EINSTEIN <span class="ot">&lt;-</span> <span class="fu">read.pnm</span>(<span class="st">&quot;images/EINSTEIN.pgm&quot;</span>, <span class="at">cellres =</span> <span class="dv">1</span>)</span>
<span id="cb400-3"><a href="data-structures.html#cb400-3" tabindex="-1"></a><span class="fu">plot</span>(EINSTEIN)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-205-1.png" width="672" /></p>
<p>Then explore the structure of this image:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="data-structures.html#cb401-1" tabindex="-1"></a><span class="fu">str</span>(EINSTEIN)</span></code></pre></div>
<pre><code>## Formal class &#39;pixmapGrey&#39; [package &quot;pixmap&quot;] with 6 slots
##   ..@ grey    : num [1:512, 1:512] 0.596 0.541 0.522 0.529 0.561 ...
##   ..@ channels: chr &quot;grey&quot;
##   ..@ size    : int [1:2] 512 512
##   ..@ cellres : num [1:2] 1 1
##   ..@ bbox    : num [1:4] 0 0 512 512
##   ..@ bbcent  : logi FALSE</code></pre>
<p>Here you get a new data class of S4 type. Unlike data frames, you need to use “@” instead of “$” sign to access components of S4 objects.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="data-structures.html#cb403-1" tabindex="-1"></a><span class="fu">class</span>(EINSTEIN<span class="sc">@</span> grey)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p><em>EINSTEIN@ grey</em> is a matrix representing pixel brightness values. The output <em>..@ grey : num [1:512, 1:512]</em> reveals the dimension of matrix (512*512). The value of the pixel(0.2941176) at the 3rd row and the 4th column can be accessed:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="data-structures.html#cb405-1" tabindex="-1"></a>EINSTEIN<span class="sc">@</span> grey[<span class="dv">3</span>,<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 0.2941176</code></pre>
<p>If you change the value 0.2941176 to 0 by <em>EINSTEIN@ grey[3,4] &lt;- 0</em>, the pixel will become pure black. If you assign a random number between 0 to 1 to the value, then the color in the pixel will be randomly assigned based on the random number. To blur an image, let’s define a mosaic.plot function:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="data-structures.html#cb407-1" tabindex="-1"></a>mosaic.plot <span class="ot">&lt;-</span> <span class="cf">function</span>(image, yrange, xrange){</span>
<span id="cb407-2"><a href="data-structures.html#cb407-2" tabindex="-1"></a>  length.y <span class="ot">&lt;-</span> <span class="fu">length</span>(yrange)</span>
<span id="cb407-3"><a href="data-structures.html#cb407-3" tabindex="-1"></a>  length.x <span class="ot">&lt;-</span> <span class="fu">length</span>(xrange)</span>
<span id="cb407-4"><a href="data-structures.html#cb407-4" tabindex="-1"></a>  image2 <span class="ot">&lt;-</span> image</span>
<span id="cb407-5"><a href="data-structures.html#cb407-5" tabindex="-1"></a>  whitenoise <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> length.y, <span class="at">ncol =</span> length.x, <span class="fu">runif</span>(length.y <span class="sc">*</span> length.x))</span>
<span id="cb407-6"><a href="data-structures.html#cb407-6" tabindex="-1"></a>  image2<span class="sc">@</span>grey[yrange, xrange] <span class="ot">&lt;-</span> whitenoise</span>
<span id="cb407-7"><a href="data-structures.html#cb407-7" tabindex="-1"></a>  <span class="fu">return</span>(image2)</span>
<span id="cb407-8"><a href="data-structures.html#cb407-8" tabindex="-1"></a>}</span></code></pre></div>
<p>In this function, the argument <em>image</em> is the original image, <em>yrange</em> and <em>xrange</em> are the ranges of rows and columns that you want to blur, which means the <em>xrange</em> and <em>yrange</em> construct the mosaic region. Copy image to image2 to assure the original image unchanged. The <em>whitenoise</em> creates a matrix filled with random numbers following a uniform distribution, whose dimensions are determined by the mosaic region. Replace the values in the original image range that you want to blur <em><a href="mailto:image2@grey" class="email">image2@grey</a>[yrange,xrange]</em> by the <em>whitenoise</em> matrix.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="data-structures.html#cb408-1" tabindex="-1"></a>EINSTEIN.mosaic <span class="ot">&lt;-</span> <span class="fu">mosaic.plot</span>(EINSTEIN, <span class="dv">175</span><span class="sc">:</span><span class="dv">249</span>, <span class="dv">118</span><span class="sc">:</span><span class="dv">295</span>)</span>
<span id="cb408-2"><a href="data-structures.html#cb408-2" tabindex="-1"></a><span class="fu">plot</span>(EINSTEIN.mosaic)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-210-1.png" width="672" /></p>
<p>Here, <em>yrange=175:249</em> and <em>xrange=118:295</em> select a sub-matrix from 175th to 249th row, and 118th to 295th column. This sub-matrix stores the color values of Einstein’s eyes region. The sub-matrix is replaced by <em>whitenoise</em> matrix. Therefore the image around the eyes region is replaced by image of random dots.</p>
<p>The function <em>locator()</em> allows you to find the relevant rows and columns for specific regions in an image. Type <strong>locator()</strong> in the <em>Console</em> window, R will wait for you to click a point within an image. Click <em>esc</em> on your keyboard to exit the function, then the coordinates of that point will be in the <em>Console</em> window. If you click more points once, the function will return all coordinates of these points sorted by your clicking order. You must be careful about the y-coordinate. The row numbers in <em>pixmap</em> objects increase from the top of the image to the bottom, therefore you need to opposite the y-coordinate by subtracting them from the number of rows in the original image. For example, the y-coordinates obtained from <em>locator()</em> function are actually 337 and 263. After subtracting them from 512, you get 175 and 249, which are used as <em>yrange</em> in the mosaic function.</p>
<blockquote>
<p>::: {.exercise #unnamed-chunk-211}</p>
</blockquote>
<blockquote>
<p>Using the <em>mosaic.plot()</em> function to blur the image of mona_lisa.pgm by adding mosaic to the eyes region. Your output should look like the graph below.
:::</p>
<p><img src="book_files/figure-html/unnamed-chunk-212-1.png" width="672" /></p>
</blockquote>
<blockquote>
<p>::: {.exercise #unnamed-chunk-213}</p>
</blockquote>
<blockquote>
<p>Modify the following function so that the eyes region of Mona Lisa image is covered by a pure color but mosaic. Experiment with different color intensities by setting the degree = 0, 0.5 and 1 respectively, plot the images.<br />
mosaic.plot.2 &lt;- function(picture, yrange, xrange, degree){<br />
length.y &lt;- _______(yrange)<br />
length.x &lt;- length(______)<br />
pic2 &lt;- picture<br />
pic2@____[_______,_______] &lt;- degree<br />
return(pic2)<br />
}<br />
:::</p>
</blockquote>
</div>
</div>
<div id="data-frames" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Data Frames<a href="data-structures.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames are fundamental in R for handling two-dimensional datasets. Unlike matrices, data frames can have different modes (types) for each column, which makes them a universal tool for data analysis. In fact, a data frame is a special case of a two-dimensional list. The data set <em>iris</em> that we analyzed before is a classic example of a data frame.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="data-structures.html#cb409-1" tabindex="-1"></a><span class="fu">class</span>(iris)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="data-structures.html#cb411-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div id="properties-of-a-data-frame" class="section level4 hasAnchor" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> properties of a data frame<a href="data-structures.html#properties-of-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are some <strong>properties of a data frame</strong>.</p>
<ol style="list-style-type: decimal">
<li><strong>Diverse Column Modes</strong>: Data frames can contain columns of various types: numeric, factor, or character. For instance, Sepal.Length in data frame iris is numeric, while Species is a factor.</li>
</ol>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="data-structures.html#cb413-1" tabindex="-1"></a><span class="fu">class</span>(iris<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="data-structures.html#cb415-1" tabindex="-1"></a><span class="fu">class</span>(iris<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><strong>Non-Empty Column Names</strong>: Typically, each column name represents a different variable. There are 5 column names or variables in the <em>iris</em> data set, they are Sepal.Length, Sepal.Width, Petal.Length, Petal.Width, and Species, respectively.</li>
</ol>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="data-structures.html#cb417-1" tabindex="-1"></a><span class="fu">colnames</span>(iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p><strong>Uniform Column Lengths</strong>: All columns in a data frame should have the same number of data points. This ensures each variable has the same number of observations. There are 150 observations for each variable in the <em>iris</em> data.</p></li>
<li><p><strong>Unique Row Names</strong>: The row names are unique. If they are not pre-named, the indices “1”, “2”, “3”, <span class="math inline">\(\cdots\)</span>, “n” will be assigned to each row, where “n” is the length of rows or the number of observations. The row names of <em>iris</em> are shown below:</p></li>
</ol>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="data-structures.html#cb419-1" tabindex="-1"></a><span class="fu">rownames</span>(iris)</span></code></pre></div>
<pre><code>##   [1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   &quot;10&quot;  &quot;11&quot;  &quot;12&quot; 
##  [13] &quot;13&quot;  &quot;14&quot;  &quot;15&quot;  &quot;16&quot;  &quot;17&quot;  &quot;18&quot;  &quot;19&quot;  &quot;20&quot;  &quot;21&quot;  &quot;22&quot;  &quot;23&quot;  &quot;24&quot; 
##  [25] &quot;25&quot;  &quot;26&quot;  &quot;27&quot;  &quot;28&quot;  &quot;29&quot;  &quot;30&quot;  &quot;31&quot;  &quot;32&quot;  &quot;33&quot;  &quot;34&quot;  &quot;35&quot;  &quot;36&quot; 
##  [37] &quot;37&quot;  &quot;38&quot;  &quot;39&quot;  &quot;40&quot;  &quot;41&quot;  &quot;42&quot;  &quot;43&quot;  &quot;44&quot;  &quot;45&quot;  &quot;46&quot;  &quot;47&quot;  &quot;48&quot; 
##  [49] &quot;49&quot;  &quot;50&quot;  &quot;51&quot;  &quot;52&quot;  &quot;53&quot;  &quot;54&quot;  &quot;55&quot;  &quot;56&quot;  &quot;57&quot;  &quot;58&quot;  &quot;59&quot;  &quot;60&quot; 
##  [61] &quot;61&quot;  &quot;62&quot;  &quot;63&quot;  &quot;64&quot;  &quot;65&quot;  &quot;66&quot;  &quot;67&quot;  &quot;68&quot;  &quot;69&quot;  &quot;70&quot;  &quot;71&quot;  &quot;72&quot; 
##  [73] &quot;73&quot;  &quot;74&quot;  &quot;75&quot;  &quot;76&quot;  &quot;77&quot;  &quot;78&quot;  &quot;79&quot;  &quot;80&quot;  &quot;81&quot;  &quot;82&quot;  &quot;83&quot;  &quot;84&quot; 
##  [85] &quot;85&quot;  &quot;86&quot;  &quot;87&quot;  &quot;88&quot;  &quot;89&quot;  &quot;90&quot;  &quot;91&quot;  &quot;92&quot;  &quot;93&quot;  &quot;94&quot;  &quot;95&quot;  &quot;96&quot; 
##  [97] &quot;97&quot;  &quot;98&quot;  &quot;99&quot;  &quot;100&quot; &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot; &quot;106&quot; &quot;107&quot; &quot;108&quot;
## [109] &quot;109&quot; &quot;110&quot; &quot;111&quot; &quot;112&quot; &quot;113&quot; &quot;114&quot; &quot;115&quot; &quot;116&quot; &quot;117&quot; &quot;118&quot; &quot;119&quot; &quot;120&quot;
## [121] &quot;121&quot; &quot;122&quot; &quot;123&quot; &quot;124&quot; &quot;125&quot; &quot;126&quot; &quot;127&quot; &quot;128&quot; &quot;129&quot; &quot;130&quot; &quot;131&quot; &quot;132&quot;
## [133] &quot;133&quot; &quot;134&quot; &quot;135&quot; &quot;136&quot; &quot;137&quot; &quot;138&quot; &quot;139&quot; &quot;140&quot; &quot;141&quot; &quot;142&quot; &quot;143&quot; &quot;144&quot;
## [145] &quot;145&quot; &quot;146&quot; &quot;147&quot; &quot;148&quot; &quot;149&quot; &quot;150&quot;</code></pre>
</div>
<div id="basic-operations" class="section level4 hasAnchor" number="3.2.3.2">
<h4><span class="header-section-number">3.2.3.2</span> Basic operations<a href="data-structures.html#basic-operations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A data frame can be created by combining vectors with the function <em>data.frame()</em> . For example:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="data-structures.html#cb421-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>)</span>
<span id="cb421-2"><a href="data-structures.html#cb421-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">32</span>, <span class="dv">13</span>, <span class="dv">89</span>)</span>
<span id="cb421-3"><a href="data-structures.html#cb421-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;TRUE&quot;</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="st">&quot;TRUE&quot;</span>)</span>
<span id="cb421-4"><a href="data-structures.html#cb421-4" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, y, z)</span>
<span id="cb421-5"><a href="data-structures.html#cb421-5" tabindex="-1"></a>df1</span></code></pre></div>
<p><img src="images/img0300_CharacterToFactor.png" style="display: block; margin: auto;" /></p>
<p>The <em>&lt;fctr&gt;</em>s underneath x and z in the output mean that character vectors x and z are automatically converted to factors. You can check the change by the <em>class()</em> function:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="data-structures.html#cb422-1" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="data-structures.html#cb424-1" tabindex="-1"></a><span class="fu">class</span>(df1<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>To prevent automatic conversion to factors, use an argument <em>stringsAsFactors = FALSE</em> in the <em>data.frame()</em> function.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="data-structures.html#cb426-1" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, y, z, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb426-2"><a href="data-structures.html#cb426-2" tabindex="-1"></a>df2</span></code></pre></div>
<pre><code>##   x  y     z
## 1 A 41  TRUE
## 2 B 32 FALSE
## 3 C 13 FALSE
## 4 D 89  TRUE</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="data-structures.html#cb428-1" tabindex="-1"></a><span class="fu">class</span>(df2<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-222}</p>
</blockquote>
<blockquote>
<p>Determine the class of the R built-in data set <em>mtcars</em> using appropriate functions.
:::</p>
</blockquote>
<p><strong>Data frame</strong> support various functions for data analysis.
Read in data frame x firstly:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="data-structures.html#cb430-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris</span></code></pre></div>
<p>Using summary() to get descriptive statistics of each column.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="data-structures.html#cb431-1" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50  
##                 
##                 
## </code></pre>
<p>head() and tail() functions show the fist and last few rows.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="data-structures.html#cb433-1" tabindex="-1"></a><span class="fu">head</span>(x)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="data-structures.html#cb435-1" tabindex="-1"></a><span class="fu">tail</span>(x)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 145          6.7         3.3          5.7         2.5 virginica
## 146          6.7         3.0          5.2         2.3 virginica
## 147          6.3         2.5          5.0         1.9 virginica
## 148          6.5         3.0          5.2         2.0 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p>Dimensions of the data frame (rows and columns):</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="data-structures.html#cb437-1" tabindex="-1"></a><span class="fu">dim</span>(x)</span></code></pre></div>
<pre><code>## [1] 150   5</code></pre>
<p>You can just get number of rows or number of columns separately:</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="data-structures.html#cb439-1" tabindex="-1"></a><span class="fu">nrow</span>(x)</span></code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="data-structures.html#cb441-1" tabindex="-1"></a><span class="fu">ncol</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>str() is a very useful function, which shows data types for all columns.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="data-structures.html#cb443-1" tabindex="-1"></a><span class="fu">str</span>(x)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Like in matrix, individual elements can be accessed in a data frame. Let’s select the element in the second row and third column:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="data-structures.html#cb445-1" tabindex="-1"></a>x[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1.4</code></pre>
<p>Also you can subtract a subset data frame from x. For example, to extract the columns 2 to 4 and rows 1 to 10:</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="data-structures.html#cb447-1" tabindex="-1"></a>x[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##    Sepal.Width Petal.Length Petal.Width
## 1          3.5          1.4         0.2
## 2          3.0          1.4         0.2
## 3          3.2          1.3         0.2
## 4          3.1          1.5         0.2
## 5          3.6          1.4         0.2
## 6          3.9          1.7         0.4
## 7          3.4          1.4         0.3
## 8          3.4          1.5         0.2
## 9          2.9          1.4         0.2
## 10         3.1          1.5         0.1</code></pre>
<p>Now view the first column:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="data-structures.html#cb449-1" tabindex="-1"></a>x[, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
## [145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>Column selection can also be done using the data frame name x followed with the column name.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="data-structures.html#cb451-1" tabindex="-1"></a>x<span class="sc">$</span>Sepal.Length</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
## [145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>The argument <em>drop=FALSE</em> will keep a one-column vector as a data frame. For example:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="data-structures.html#cb453-1" tabindex="-1"></a><span class="fu">class</span>(x[, <span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="data-structures.html#cb455-1" tabindex="-1"></a><span class="fu">class</span>(x[, <span class="dv">1</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Use mean() function if you need to know the average Sepal Length. By the way, expressions can be nested.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="data-structures.html#cb457-1" tabindex="-1"></a><span class="fu">mean</span>(x<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<p>It’s very common to select a subset of data by certain columns or by certain conditions, using logical operations. The “==”, “&gt;”, and “&lt;” are logical operations and the “=” is an equality sign for assigning value.
Let’s get a subset which contains only the species of setosa:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="data-structures.html#cb459-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">subset</span>(x, Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb459-2"><a href="data-structures.html#cb459-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>A subset that the length of sepal are greater than 7:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="data-structures.html#cb461-1" tabindex="-1"></a><span class="fu">subset</span>(x, Sepal.Length <span class="sc">&gt;</span> <span class="dv">7</span>)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 103          7.1         3.0          5.9         2.1 virginica
## 106          7.6         3.0          6.6         2.1 virginica
## 108          7.3         2.9          6.3         1.8 virginica
## 110          7.2         3.6          6.1         2.5 virginica
## 118          7.7         3.8          6.7         2.2 virginica
## 119          7.7         2.6          6.9         2.3 virginica
## 123          7.7         2.8          6.7         2.0 virginica
## 126          7.2         3.2          6.0         1.8 virginica
## 130          7.2         3.0          5.8         1.6 virginica
## 131          7.4         2.8          6.1         1.9 virginica
## 132          7.9         3.8          6.4         2.0 virginica
## 136          7.7         3.0          6.1         2.3 virginica</code></pre>
<p>If more than one condition are applied to the data, use <strong>&amp;</strong> to connect the conditions. For example, to extract a subset which contains only the species of virginica, the sepals more than 7cm long, and the length of petal removed:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="data-structures.html#cb463-1" tabindex="-1"></a>x<span class="fl">.3</span>conds <span class="ot">&lt;-</span> x[x<span class="sc">$</span>Sepal.Length <span class="sc">&gt;</span> <span class="dv">7</span> <span class="sc">&amp;</span> x<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>, <span class="sc">-</span> <span class="dv">3</span>]       <span class="co"># -3 means removing the 3rd column from x.</span></span></code></pre></div>
<blockquote>
<p>::: {.exercise #unnamed-chunk-238}</p>
</blockquote>
<blockquote>
<p>From data set <em>mtcars</em>, select a subset where <em>cyl</em> is 6 and <em>mpg</em> is greater than 21.2, excluding the variable <em>carb</em>.
:::</p>
</blockquote>
</div>
<div id="advanced-techniques-and-analysis" class="section level4 hasAnchor" number="3.2.3.3">
<h4><span class="header-section-number">3.2.3.3</span> Advanced techniques and analysis<a href="data-structures.html#advanced-techniques-and-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Data frames can be modified by adding new columns or rows. Let’s add a new column named “id” to the data frame x, which goes from 1 to 150. Function <em>head()</em> is used to view the first 6 rows of the new data set.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="data-structures.html#cb464-1" tabindex="-1"></a>x.id <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>), x)</span>
<span id="cb464-2"><a href="data-structures.html#cb464-2" tabindex="-1"></a><span class="fu">head</span>(x.id)</span></code></pre></div>
<pre><code>##   id Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1  1          5.1         3.5          1.4         0.2  setosa
## 2  2          4.9         3.0          1.4         0.2  setosa
## 3  3          4.7         3.2          1.3         0.2  setosa
## 4  4          4.6         3.1          1.5         0.2  setosa
## 5  5          5.0         3.6          1.4         0.2  setosa
## 6  6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Add another column of random numbers y to x.id.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="data-structures.html#cb466-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">150</span>)</span>
<span id="cb466-2"><a href="data-structures.html#cb466-2" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(y, x.id)</span>
<span id="cb466-3"><a href="data-structures.html#cb466-3" tabindex="-1"></a><span class="fu">head</span>(x2)</span></code></pre></div>
<pre><code>##             y id Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1  0.88691825  1          5.1         3.5          1.4         0.2  setosa
## 2 -0.54760471  2          4.9         3.0          1.4         0.2  setosa
## 3 -0.89891836  3          4.7         3.2          1.3         0.2  setosa
## 4  0.08343956  4          4.6         3.1          1.5         0.2  setosa
## 5  0.61928627  5          5.0         3.6          1.4         0.2  setosa
## 6 -1.95236310  6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Similar to cbind(), rbind() is for adding another exist row or rows with same length of columns. Now use tail() to examine the result.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="data-structures.html#cb468-1" tabindex="-1"></a>newRow <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="st">&quot;setosa&quot;</span>, <span class="dv">151</span>)</span>
<span id="cb468-2"><a href="data-structures.html#cb468-2" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(x, newRow)</span>
<span id="cb468-3"><a href="data-structures.html#cb468-3" tabindex="-1"></a><span class="fu">tail</span>(x3)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 146          6.7           3          5.2         2.3 virginica
## 147          6.3         2.5            5         1.9 virginica
## 148          6.5           3          5.2           2 virginica
## 149          6.2         3.4          5.4         2.3 virginica
## 150          5.9           3          5.1         1.8 virginica
## 151            1           1            1           1    setosa</code></pre>
<p>You can sort the data frames by a specific columns, either in ascending or descending order. For example, to sort the first column in ascending, and the second column in descending:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="data-structures.html#cb470-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="fu">order</span>(x[, <span class="dv">1</span>]), ]</span>
<span id="cb470-2"><a href="data-structures.html#cb470-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 14          4.3         3.0          1.1         0.1  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 39          4.4         3.0          1.3         0.2  setosa
## 43          4.4         3.2          1.3         0.2  setosa
## 42          4.5         2.3          1.3         0.3  setosa
## 4           4.6         3.1          1.5         0.2  setosa</code></pre>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="data-structures.html#cb472-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x[<span class="fu">rev</span>(<span class="fu">order</span>(x[, <span class="dv">2</span>])), ]</span>
<span id="cb472-2"><a href="data-structures.html#cb472-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 16          5.7         4.4          1.5         0.4  setosa
## 34          5.5         4.2          1.4         0.2  setosa
## 33          5.2         4.1          1.5         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 6           5.4         3.9          1.7         0.4  setosa</code></pre>
<p>It’s common to visualize the distribution of a variable grouped by another. For instance, use boxplot to observe sepal length distribution across species:</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="data-structures.html#cb474-1" tabindex="-1"></a><span class="fu">boxplot</span>(Sepal.Length <span class="sc">~</span> Species, x)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-243-1.png" width="672" /></p>
<p>You can perform statistical analyses by category, like mean of the variables by species:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="data-structures.html#cb475-1" tabindex="-1"></a><span class="fu">aggregate</span>(. <span class="sc">~</span> Species, x, mean)</span></code></pre></div>
<pre><code>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     setosa        5.006       3.428        1.462       0.246
## 2 versicolor        5.936       2.770        4.260       1.326
## 3  virginica        6.588       2.974        5.552       2.026</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-245}</p>
</blockquote>
<blockquote>
<p>Use <em>aggregate()</em> to calculate medians for variables <em>mpg</em>, <em>disp</em>, <em>hp</em>, and <em>wt</em> in data set <em>mtcars</em> across <em>cyl</em>.
:::</p>
</blockquote>
<p>Statistical analysis such as ANOVA and regression analysis are also possible with data frames. Let’s perform analysis of variance, named ANOVA, to test whether sepal length has significant difference among species.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="data-structures.html#cb477-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">aov</span>(Sepal.Length <span class="sc">~</span> Species, iris)</span>
<span id="cb477-2"><a href="data-structures.html#cb477-2" tabindex="-1"></a><span class="fu">summary</span>(m)</span></code></pre></div>
<pre><code>##              Df Sum Sq Mean Sq F value Pr(&gt;F)    
## Species       2  63.21  31.606   119.3 &lt;2e-16 ***
## Residuals   147  38.96   0.265                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The p-value is close to 0, therefore the null hypothesis is rejected and you can conclude that the length of sepal among three species are not same.</p>
<p>The <em>sapply()</em> function applies functions across columns, so that you can do the ANOVA test for all of the 4 numeric variables across the species at once.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="data-structures.html#cb479-1" tabindex="-1"></a>aov.fun <span class="ot">&lt;-</span> <span class="cf">function</span>(temx){</span>
<span id="cb479-2"><a href="data-structures.html#cb479-2" tabindex="-1"></a>  m1 <span class="ot">&lt;-</span> <span class="fu">aov</span>(temx <span class="sc">~</span> iris<span class="sc">$</span>Species)</span>
<span id="cb479-3"><a href="data-structures.html#cb479-3" tabindex="-1"></a>  <span class="fu">summary</span>(m1)</span>
<span id="cb479-4"><a href="data-structures.html#cb479-4" tabindex="-1"></a>}</span>
<span id="cb479-5"><a href="data-structures.html#cb479-5" tabindex="-1"></a>nvar <span class="ot">&lt;-</span> iris[<span class="sc">-</span> <span class="dv">5</span>]  <span class="co"># Remove the variable Species.</span></span>
<span id="cb479-6"><a href="data-structures.html#cb479-6" tabindex="-1"></a>da <span class="ot">&lt;-</span> <span class="fu">sapply</span>(nvar, aov.fun)   <span class="co"># Apply aov.fun() function to each variable in the data set nvar. </span></span>
<span id="cb479-7"><a href="data-structures.html#cb479-7" tabindex="-1"></a>da</span></code></pre></div>
<pre><code>## $Sepal.Length
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 63.212  31.606  119.26 &lt; 2.2e-16 ***
## Residuals    147 38.956   0.265                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## $Sepal.Width
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 11.345  5.6725   49.16 &lt; 2.2e-16 ***
## Residuals    147 16.962  0.1154                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## $Petal.Length
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 437.10 218.551  1180.2 &lt; 2.2e-16 ***
## Residuals    147  27.22   0.185                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## $Petal.Width
##               Df Sum Sq Mean Sq F value    Pr(&gt;F)    
## iris$Species   2 80.413  40.207  960.01 &lt; 2.2e-16 ***
## Residuals    147  6.157   0.042                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Regression analysis uses linear model(lm) to analyze the relationship between these columns. Here sepal length is used as a function of sepal width and petal length, plus error.</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="data-structures.html#cb481-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sepal.Length <span class="sc">~</span> Sepal.Width <span class="sc">+</span> Petal.Length, x)</span>
<span id="cb481-2"><a href="data-structures.html#cb481-2" tabindex="-1"></a><span class="fu">summary</span>(m)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Sepal.Length ~ Sepal.Width + Petal.Length, data = x)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.96159 -0.23489  0.00077  0.21453  0.78557 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   2.24914    0.24797    9.07 7.04e-16 ***
## Sepal.Width   0.59552    0.06933    8.59 1.16e-14 ***
## Petal.Length  0.47192    0.01712   27.57  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3333 on 147 degrees of freedom
## Multiple R-squared:  0.8402, Adjusted R-squared:  0.838 
## F-statistic: 386.4 on 2 and 147 DF,  p-value: &lt; 2.2e-16</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-249}</p>
</blockquote>
<blockquote>
<p>Test if <em>mpg</em>, <em>disp</em>, <em>hp</em>, <em>wt</em> and <em>qsec</em> significantly differ across <em>cyl</em> in <em>mtcars</em>. Fill the blanks and interpret your conclusion based on the p-values.</p>
<p>aov.fun.car &lt;- function(temx){<br />
m2 &lt;- ________(________ ~ _________$______)<br />
summary(________)<br />
}<br />
sub.car &lt;- mtcars[, ___________]<br />
aov.car &lt;- ___________(_________, __________)<br />
____________<br />
:::</p>
</blockquote>
<p>You can merge two data frames by the function <em>merge()</em>.</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="data-structures.html#cb483-1" tabindex="-1"></a>dfmg1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">V1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>), <span class="at">V2 =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">80</span>, <span class="dv">70</span>, <span class="dv">60</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb483-2"><a href="data-structures.html#cb483-2" tabindex="-1"></a>dfmg1</span></code></pre></div>
<pre><code>##   V1 V2
## 1  A 90
## 2  B 80
## 3  C 70
## 4  D 60</code></pre>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="data-structures.html#cb485-1" tabindex="-1"></a>dfmg2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">V1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">W2 =</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">85</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb485-2"><a href="data-structures.html#cb485-2" tabindex="-1"></a>dfmg2</span></code></pre></div>
<pre><code>##   V1 W2
## 1  A 95
## 2  C 85</code></pre>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="data-structures.html#cb487-1" tabindex="-1"></a><span class="fu">merge</span>(dfmg1, dfmg2)</span></code></pre></div>
<pre><code>##   V1 V2 W2
## 1  A 90 95
## 2  C 70 85</code></pre>
<p>The two data frames dfmg1 and dfmg2 here have the same variable V1. After merging, the rows with common elements “A” and “C” in both V1s are selected.
To merge two data frames with columns contain similar information but different names, use <em>by.x</em> and <em>by.y</em> arguments to specify the variable names in the first and second data frame, respectively.</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="data-structures.html#cb489-1" tabindex="-1"></a>dfmg3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">W1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">W2 =</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">85</span>, <span class="dv">65</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb489-2"><a href="data-structures.html#cb489-2" tabindex="-1"></a>dfmg3</span></code></pre></div>
<pre><code>##   W1 W2
## 1  A 95
## 2  F 85
## 3  C 65</code></pre>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="data-structures.html#cb491-1" tabindex="-1"></a><span class="fu">merge</span>(dfmg1, dfmg3, <span class="at">by.x =</span> <span class="st">&quot;V1&quot;</span>, <span class="at">by.y =</span> <span class="st">&quot;W1&quot;</span>)</span></code></pre></div>
<pre><code>##   V1 V2 W2
## 1  A 90 95
## 2  C 70 65</code></pre>
<p>Now use data.frame() function to define a new data frame with 100 rows and two columns, <em>ids</em> and <em>rand</em>.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="data-structures.html#cb493-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">rand =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb493-2"><a href="data-structures.html#cb493-2" tabindex="-1"></a><span class="fu">head</span>(y)</span></code></pre></div>
<pre><code>##   id       rand
## 1  1 -0.8922799
## 2  2 -1.9189952
## 3  3  0.6032588
## 4  4 -0.8541374
## 5  5 -1.3943944
## 6  6  0.1835520</code></pre>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="data-structures.html#cb495-1" tabindex="-1"></a><span class="fu">tail</span>(y)</span></code></pre></div>
<pre><code>##      id       rand
## 95   95 -0.4787542
## 96   96  1.3590723
## 97   97  1.4686959
## 98   98  0.6267683
## 99   99 -1.1354164
## 100 100 -0.3957976</code></pre>
<p>You can merge two data frames with different rows. Note the new data frame z has only 100 rows after merging x and y by the common column name <strong>id</strong>.</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="data-structures.html#cb497-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris</span>
<span id="cb497-2"><a href="data-structures.html#cb497-2" tabindex="-1"></a>x<span class="sc">$</span>id <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>)</span>
<span id="cb497-3"><a href="data-structures.html#cb497-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">merge</span>(x, y, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb497-4"><a href="data-structures.html#cb497-4" tabindex="-1"></a><span class="fu">head</span>(z)</span></code></pre></div>
<pre><code>##   id Sepal.Length Sepal.Width Petal.Length Petal.Width Species       rand
## 1  1          5.1         3.5          1.4         0.2  setosa -0.8922799
## 2  2          4.9         3.0          1.4         0.2  setosa -1.9189952
## 3  3          4.7         3.2          1.3         0.2  setosa  0.6032588
## 4  4          4.6         3.1          1.5         0.2  setosa -0.8541374
## 5  5          5.0         3.6          1.4         0.2  setosa -1.3943944
## 6  6          5.4         3.9          1.7         0.4  setosa  0.1835520</code></pre>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="data-structures.html#cb499-1" tabindex="-1"></a><span class="fu">tail</span>(z)</span></code></pre></div>
<pre><code>##      id Sepal.Length Sepal.Width Petal.Length Petal.Width    Species       rand
## 95   95          5.6         2.7          4.2         1.3 versicolor -0.4787542
## 96   96          5.7         3.0          4.2         1.2 versicolor  1.3590723
## 97   97          5.7         2.9          4.2         1.3 versicolor  1.4686959
## 98   98          6.2         2.9          4.3         1.3 versicolor  0.6267683
## 99   99          5.1         2.5          3.0         1.1 versicolor -1.1354164
## 100 100          5.7         2.8          4.1         1.3 versicolor -0.3957976</code></pre>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="data-structures.html#cb501-1" tabindex="-1"></a><span class="fu">summary</span>(z)</span></code></pre></div>
<pre><code>##        id          Sepal.Length    Sepal.Width     Petal.Length  
##  Min.   :  1.00   Min.   :4.300   Min.   :2.000   Min.   :1.000  
##  1st Qu.: 25.75   1st Qu.:5.000   1st Qu.:2.800   1st Qu.:1.500  
##  Median : 50.50   Median :5.400   Median :3.050   Median :2.450  
##  Mean   : 50.50   Mean   :5.471   Mean   :3.099   Mean   :2.861  
##  3rd Qu.: 75.25   3rd Qu.:5.900   3rd Qu.:3.400   3rd Qu.:4.325  
##  Max.   :100.00   Max.   :7.000   Max.   :4.400   Max.   :5.100  
##   Petal.Width          Species        rand         
##  Min.   :0.100   setosa    :50   Min.   :-2.23085  
##  1st Qu.:0.200   versicolor:50   1st Qu.:-0.61558  
##  Median :0.800   virginica : 0   Median : 0.17988  
##  Mean   :0.786                   Mean   : 0.01315  
##  3rd Qu.:1.300                   3rd Qu.: 0.64910  
##  Max.   :1.800                   Max.   : 2.93330</code></pre>
<p>You can also merge data frames by row names too, by adding row names as a new column in each data frame.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="data-structures.html#cb503-1" tabindex="-1"></a><span class="co"># Create sample data frames</span></span>
<span id="cb503-2"><a href="data-structures.html#cb503-2" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb503-3"><a href="data-structures.html#cb503-3" tabindex="-1"></a><span class="fu">rownames</span>(df1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;row1&quot;</span>, <span class="st">&quot;row2&quot;</span>, <span class="st">&quot;row3&quot;</span>)</span>
<span id="cb503-4"><a href="data-structures.html#cb503-4" tabindex="-1"></a></span>
<span id="cb503-5"><a href="data-structures.html#cb503-5" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">C =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>), <span class="at">D =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>))</span>
<span id="cb503-6"><a href="data-structures.html#cb503-6" tabindex="-1"></a><span class="fu">rownames</span>(df2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;row1&quot;</span>, <span class="st">&quot;row2&quot;</span>, <span class="st">&quot;row3&quot;</span>)</span>
<span id="cb503-7"><a href="data-structures.html#cb503-7" tabindex="-1"></a></span>
<span id="cb503-8"><a href="data-structures.html#cb503-8" tabindex="-1"></a><span class="co"># Add row names as a new column in each data frame</span></span>
<span id="cb503-9"><a href="data-structures.html#cb503-9" tabindex="-1"></a>df1<span class="sc">$</span>RowName <span class="ot">&lt;-</span> <span class="fu">rownames</span>(df1)</span>
<span id="cb503-10"><a href="data-structures.html#cb503-10" tabindex="-1"></a>df2<span class="sc">$</span>RowName <span class="ot">&lt;-</span> <span class="fu">rownames</span>(df2)</span>
<span id="cb503-11"><a href="data-structures.html#cb503-11" tabindex="-1"></a></span>
<span id="cb503-12"><a href="data-structures.html#cb503-12" tabindex="-1"></a><span class="co"># Merge the data frames by the common column &quot;RowName&quot;</span></span>
<span id="cb503-13"><a href="data-structures.html#cb503-13" tabindex="-1"></a>merged_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df1, df2, <span class="at">by =</span> <span class="st">&quot;RowName&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="strings-and-string-vectors" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Strings and string vectors<a href="data-structures.html#strings-and-string-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>String manipulation is a common task in data analysis, especially when dealing with textual data. Let’s dive deeper into single-string operations, handling string vectors, and an advanced example involving DNA sequences.</p>
<div id="working-with-a-single-string" class="section level4 hasAnchor" number="3.2.4.1">
<h4><span class="header-section-number">3.2.4.1</span> Working with a Single String<a href="data-structures.html#working-with-a-single-string" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Define a <strong>string</strong> x:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="data-structures.html#cb504-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;R is cool&quot;</span></span></code></pre></div>
<p>Count the number of characters:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="data-structures.html#cb505-1" tabindex="-1"></a><span class="fu">nchar</span>(x)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>Concatenate strings(with a space by default):</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="data-structures.html#cb507-1" tabindex="-1"></a><span class="fu">paste</span>(x, <span class="st">&quot;!!&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;R is cool !!&quot;</code></pre>
<p>Extract sub-string (from position of 6 and 9):</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="data-structures.html#cb509-1" tabindex="-1"></a><span class="fu">substr</span>(x, <span class="dv">6</span>, <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## [1] &quot;cool&quot;</code></pre>
<p>Split string into a list separated by space:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="data-structures.html#cb511-1" tabindex="-1"></a><span class="fu">strsplit</span>(x, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;R&quot;    &quot;is&quot;   &quot;cool&quot;</code></pre>
<p>Replace “R” with “Tim”:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="data-structures.html#cb513-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;R&quot;</span>, <span class="st">&quot;Tim&quot;</span>, x)</span></code></pre></div>
<pre><code>## [1] &quot;Tim is cool&quot;</code></pre>
<p>Remove everything after a space:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="data-structures.html#cb515-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot; .*&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;</code></pre>
<p>Check for the pattern “is”:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="data-structures.html#cb517-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;is&quot;</span>, x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Convert to lowercase or uppercase:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="data-structures.html#cb519-1" tabindex="-1"></a><span class="fu">tolower</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;r is cool&quot;</code></pre>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="data-structures.html#cb521-1" tabindex="-1"></a><span class="fu">toupper</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;R IS COOL&quot;</code></pre>
</div>
<div id="handling-string-vectors" class="section level4 hasAnchor" number="3.2.4.2">
<h4><span class="header-section-number">3.2.4.2</span> Handling String Vectors<a href="data-structures.html#handling-string-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A <strong>string vector</strong> can hold many strings. This can be a column of names or IDs in a table.
First let’s define a string vector:</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="data-structures.html#cb523-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;cde&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;ab&quot;</span>) </span></code></pre></div>
<p>You can use all commands about vector for string vector, such as accessing 2nd element in vector:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="data-structures.html#cb524-1" tabindex="-1"></a>x[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;cde&quot;</code></pre>
<p>Determine the number of strings in the vector:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="data-structures.html#cb526-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Find unique elements:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="data-structures.html#cb528-1" tabindex="-1"></a><span class="fu">unique</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;ab&quot;  &quot;cde&quot; &quot;d&quot;</code></pre>
<p>Is there any duplicated element in the vector?</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="data-structures.html#cb530-1" tabindex="-1"></a><span class="fu">duplicated</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>The last element is duplicated.</p>
<p>Count characters in each element:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="data-structures.html#cb532-1" tabindex="-1"></a><span class="fu">nchar</span>(x)</span></code></pre></div>
<pre><code>## [1] 2 3 1 2</code></pre>
<p>You can also unite two string vectors x and y if another vector y is defined first:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="data-structures.html#cb534-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;e&quot;</span>)</span>
<span id="cb534-2"><a href="data-structures.html#cb534-2" tabindex="-1"></a><span class="fu">union</span>(x, y)</span></code></pre></div>
<pre><code>## [1] &quot;ab&quot;  &quot;cde&quot; &quot;d&quot;   &quot;e&quot;</code></pre>
<p>Is there intercept among these two sets of strings?</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="data-structures.html#cb536-1" tabindex="-1"></a><span class="fu">intersect</span>(x, y)</span></code></pre></div>
<pre><code>## [1] &quot;ab&quot;</code></pre>
<p>Add something like “Q” to each element:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="data-structures.html#cb538-1" tabindex="-1"></a><span class="fu">paste</span>(x, <span class="st">&quot;Q&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ab Q&quot;  &quot;cde Q&quot; &quot;d Q&quot;   &quot;ab Q&quot;</code></pre>
<p>To avoid the space between these elements and “Q”, try paste0():</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="data-structures.html#cb540-1" tabindex="-1"></a><span class="fu">paste0</span>(x, <span class="st">&quot;Q&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;abQ&quot;  &quot;cdeQ&quot; &quot;dQ&quot;   &quot;abQ&quot;</code></pre>
<p>Collapse multiple strings into one joined by space:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="data-structures.html#cb542-1" tabindex="-1"></a><span class="fu">paste</span>(x, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ab cde d ab&quot;</code></pre>
</div>
<div id="advanced-example-manipulating-dna-sequences" class="section level4 hasAnchor" number="3.2.4.3">
<h4><span class="header-section-number">3.2.4.3</span> Advanced Example: Manipulating DNA Sequences<a href="data-structures.html#advanced-example-manipulating-dna-sequences" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s experiment with a list practically. Consider a piece of DNA sequence:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="data-structures.html#cb544-1" tabindex="-1"></a>DNA <span class="ot">&lt;-</span> <span class="st">&quot;taaCCATTGtaaGAACATGGTTGTCcaaaCAAGATGCTAGT&quot;</span></span></code></pre></div>
<p>Note that the assignment operator “&lt;-” is used here. “=” can also function correctly in many instances but has the potential to be ambiguous.</p>
<p>First, convert everything to upper case.</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="data-structures.html#cb545-1" tabindex="-1"></a>DNA <span class="ot">&lt;-</span> <span class="fu">toupper</span>(DNA)</span></code></pre></div>
<p>Next, cut this DNA into smaller pieces by the pattern “ATG”. This type of thing happens in nature, as some enzymes cut DNA according to a certain pattern.</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="data-structures.html#cb546-1" tabindex="-1"></a>segs <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(DNA, <span class="st">&quot;ATG&quot;</span>)  <span class="co"># Split by &quot;ATG&quot;</span></span></code></pre></div>
<p>The result is contained in ‘segs’ as a <strong>list</strong>, which will be discussed later in this chapter. The unlist( ) function converts list into a string vector.</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="data-structures.html#cb547-1" tabindex="-1"></a>segs <span class="ot">&lt;-</span> <span class="fu">unlist</span>(segs)   </span>
<span id="cb547-2"><a href="data-structures.html#cb547-2" tabindex="-1"></a>segs  <span class="co"># A vector of strings</span></span></code></pre></div>
<pre><code>## [1] &quot;TAACCATTGTAAGAAC&quot; &quot;GTTGTCCAAACAAG&quot;   &quot;CTAGT&quot;</code></pre>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="data-structures.html#cb549-1" tabindex="-1"></a>segs[<span class="dv">1</span>]  <span class="co"># First segment</span></span></code></pre></div>
<pre><code>## [1] &quot;TAACCATTGTAAGAAC&quot;</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-279}</p>
</blockquote>
<blockquote>
<p>In the <strong>iris</strong> dataset, define a new column <em>FullName</em> containing the full species name by adding “Iris” in front of each species name. For example, “setosa” becomes “Iris setosa”.
:::</p>
</blockquote>
<p>Note: some of the materials above have been inspired by <a href="http://tryr.codeschool.com/">http://tryr.codeschool.com/</a>, which contains more in-depth information on string manipulation in R.</p>
</div>
</div>
<div id="lists" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Lists<a href="data-structures.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lists are adaptable structures in R that can hold objects of different types, overcoming the limitations of vectors.</p>
<div id="list-creating-modifying-and-accessing" class="section level4 hasAnchor" number="3.2.5.1">
<h4><span class="header-section-number">3.2.5.1</span> List creating, modifying, and accessing<a href="data-structures.html#list-creating-modifying-and-accessing" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s start by creating a simple list:</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="data-structures.html#cb551-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">5</span>, <span class="st">&quot;John Doe&quot;</span>, <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">7</span>), mean)  <span class="co"># A list with 4 components</span></span>
<span id="cb551-2"><a href="data-structures.html#cb551-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [[1]]
## [1] 5
## 
## [[2]]
## [1] &quot;John Doe&quot;
## 
## [[3]]
## [1] 100   7
## 
## [[4]]
## function (x, ...) 
## UseMethod(&quot;mean&quot;)
## &lt;bytecode: 0x000001d92f930088&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>You can associate each components with a <em>tag</em> for easy reference.</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="data-structures.html#cb553-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">5</span>, <span class="at">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="at">BP =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">77</span>), <span class="at">fun =</span> mean)  </span>
<span id="cb553-2"><a href="data-structures.html#cb553-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $height
## [1] 5
## 
## $name
## [1] &quot;John Doe&quot;
## 
## $BP
## [1] 100  77
## 
## $fun
## function (x, ...) 
## UseMethod(&quot;mean&quot;)
## &lt;bytecode: 0x000001d92f930088&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>Here is another way to create a list:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="data-structures.html#cb555-1" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">9</span>), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="co"># Matrix</span></span>
<span id="cb555-2"><a href="data-structures.html#cb555-2" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">:</span> <span class="dv">1</span> <span class="co"># Vector</span></span>
<span id="cb555-3"><a href="data-structures.html#cb555-3" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.4</span>, <span class="fl">5.1</span>, <span class="fl">9.0</span>, <span class="fl">4.4</span>)  <span class="co"># Numeric vector</span></span>
<span id="cb555-4"><a href="data-structures.html#cb555-4" tabindex="-1"></a>x4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;u&#39;</span>, <span class="st">&#39;v&#39;</span>, <span class="st">&#39;w&#39;</span>)  <span class="co"># Character vector</span></span>
<span id="cb555-5"><a href="data-structures.html#cb555-5" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(x1, x2, x3, x4)  <span class="co"># Combine into a list</span></span>
<span id="cb555-6"><a href="data-structures.html#cb555-6" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2] [,3]
## [1,]    4    5   10
## [2,]    2    6    9
## 
## [[2]]
## [1] 8 7 6 5 4 3 2 1
## 
## [[3]]
## [1] 2.4 5.1 9.0 4.4
## 
## [[4]]
## [1] &quot;u&quot; &quot;v&quot; &quot;w&quot;</code></pre>
<p>Or build a list by assigning values to an empty list:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="data-structures.html#cb557-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">list</span>()         <span class="co"># Create an empty list</span></span>
<span id="cb557-2"><a href="data-structures.html#cb557-2" tabindex="-1"></a>v[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">9</span>), <span class="at">ncol =</span> <span class="dv">3</span>)  <span class="co"># Assign a matrix to v[[1]]</span></span>
<span id="cb557-3"><a href="data-structures.html#cb557-3" tabindex="-1"></a>v[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">:</span> <span class="dv">1</span>    <span class="co"># Assign a vector to v[[2]]</span></span>
<span id="cb557-4"><a href="data-structures.html#cb557-4" tabindex="-1"></a>v[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> x3       <span class="co"># Assign x3 to v[[3]] where x3 is defined as above</span></span>
<span id="cb557-5"><a href="data-structures.html#cb557-5" tabindex="-1"></a>v[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> x4       <span class="co"># Assign x4 to v[[4]] where x4 is defined as above</span></span>
<span id="cb557-6"><a href="data-structures.html#cb557-6" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2] [,3]
## [1,]    4    5   10
## [2,]    2    6    9
## 
## [[2]]
## [1] 8 7 6 5 4 3 2 1
## 
## [[3]]
## [1] 2.4 5.1 9.0 4.4
## 
## [[4]]
## [1] &quot;u&quot; &quot;v&quot; &quot;w&quot;</code></pre>
<p>List ‘z’ and ‘v’ are identical despite being created differently, because they are assigned with the same components.</p>
<p>There are several different ways to access the elements in a list. For example, to access the third component in y:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="data-structures.html#cb559-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">5</span>, <span class="at">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="at">BP =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">77</span>), <span class="at">fun =</span> mean)</span>
<span id="cb559-2"><a href="data-structures.html#cb559-2" tabindex="-1"></a>y[[<span class="dv">3</span>]]        <span class="co"># Specify the number in a double square bracket</span></span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="data-structures.html#cb561-1" tabindex="-1"></a>y<span class="sc">$</span>BP          <span class="co"># Use $ sign and tag</span></span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="data-structures.html#cb563-1" tabindex="-1"></a>y[[<span class="st">&quot;BP&quot;</span>]]     <span class="co"># Use the tag in a double square bracket</span></span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<p>Note that <strong>double square bracket</strong> ‘[[]]’ is used here, which is different from using single square brake ‘[]’ in a vector. For a list, single square brackets return a sublist, while double square brackets return the actual element. For example, y[3] returns a list, y[[3]] returns a numerical vector. Use functions <em>class()</em> and <em>is.list</em> to check the type of the returned object:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="data-structures.html#cb565-1" tabindex="-1"></a>y[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## $BP
## [1] 100  77</code></pre>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="data-structures.html#cb567-1" tabindex="-1"></a><span class="fu">class</span>(y[<span class="dv">3</span>])               <span class="co"># Get the class of y[3]</span></span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="data-structures.html#cb569-1" tabindex="-1"></a><span class="fu">is.list</span>(y[<span class="dv">3</span>])             <span class="co"># Check if y[3] is a list or not</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="data-structures.html#cb571-1" tabindex="-1"></a>y[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## [1] 100  77</code></pre>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="data-structures.html#cb573-1" tabindex="-1"></a><span class="fu">class</span>(y[[<span class="dv">3</span>]])             <span class="co"># Get the class of y[[3]] </span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="data-structures.html#cb575-1" tabindex="-1"></a><span class="fu">is.list</span>(y[[<span class="dv">3</span>]])           <span class="co"># Check if y[[3]] is a list or not</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Lists can store functions as elements. For example, the forth component of y is <em>fun = mean</em>. There are no quotation marks around <em>mean</em>. The <em>class(y[[4]])</em> returns a function.</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="data-structures.html#cb577-1" tabindex="-1"></a><span class="fu">class</span>(y[[<span class="dv">4</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<p>This implies that y[[4]] is the same as the <em>mean()</em> function. To apply it to a numeric vector:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="data-structures.html#cb579-1" tabindex="-1"></a>y[[<span class="dv">4</span>]](<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))          <span class="co"># Get the mean of 1, 2, 3, 4, 5</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-288}</p>
</blockquote>
<blockquote>
<p>Given list1 &lt;- list(Name = “Tom”, Hobby = “Fishing”, Num.fish = c(16, 27, 5))</p>
<p>Access the second component in list1 using three ways we introduced above. What are the types of list1[“Hobby”] and list1[[“Hobby”]], respectively?<br />
:::</p>
</blockquote>
</div>
<div id="list-operations" class="section level4 hasAnchor" number="3.2.5.2">
<h4><span class="header-section-number">3.2.5.2</span> List operations<a href="data-structures.html#list-operations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Modify an element:</li>
</ul>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="data-structures.html#cb581-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">5</span>, <span class="at">name =</span> <span class="st">&quot;John Doe&quot;</span>, <span class="at">BP =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">77</span>), <span class="at">fun =</span> mean)</span>
<span id="cb581-2"><a href="data-structures.html#cb581-2" tabindex="-1"></a>y[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Mike&quot;</span>    <span class="co"># Change the 2nd component from &quot;John Doe&quot; to &quot;Mike&quot;</span></span>
<span id="cb581-3"><a href="data-structures.html#cb581-3" tabindex="-1"></a>y[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span>      <span class="co"># Delete the 4th component by setting it to NULL</span></span>
<span id="cb581-4"><a href="data-structures.html#cb581-4" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $height
## [1] 5
## 
## $name
## [1] &quot;Mike&quot;
## 
## $BP
## [1] 100  77</code></pre>
<p>The output shows that the name has been changed to Mike and the mean function is deleted. So far, the length of y is 3:</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="data-structures.html#cb583-1" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Add the forth components to y:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="data-structures.html#cb585-1" tabindex="-1"></a>y<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;math&quot;</span>, <span class="st">&quot;art&quot;</span>)  <span class="co"># Add a class component</span></span>
<span id="cb585-2"><a href="data-structures.html#cb585-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $height
## [1] 5
## 
## $name
## [1] &quot;Mike&quot;
## 
## $BP
## [1] 100  77
## 
## $class
## [1] &quot;math&quot; &quot;art&quot;</code></pre>
<ul>
<li>Create Lists with Tag-Value Associations:</li>
</ul>
<p>For example, associate the names and values into a list by creating an empty list and then fill it via assignment statements:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="data-structures.html#cb587-1" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">105</span>, <span class="dv">98</span>, <span class="dv">112</span>)</span>
<span id="cb587-2"><a href="data-structures.html#cb587-2" tabindex="-1"></a>seasons <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Spring&quot;</span>, <span class="st">&quot;Summer&quot;</span>, <span class="st">&quot;Fall&quot;</span>, <span class="st">&quot;Winter&quot;</span>)</span>
<span id="cb587-3"><a href="data-structures.html#cb587-3" tabindex="-1"></a>sale.tag <span class="ot">&lt;-</span> <span class="fu">list</span>()          <span class="co"># Create an empty list</span></span>
<span id="cb587-4"><a href="data-structures.html#cb587-4" tabindex="-1"></a>sale.tag[seasons] <span class="ot">&lt;-</span> sales  <span class="co"># Associate sales data with seasons</span></span>
<span id="cb587-5"><a href="data-structures.html#cb587-5" tabindex="-1"></a>sale.tag</span></code></pre></div>
<pre><code>## $Spring
## [1] 100
## 
## $Summer
## [1] 105
## 
## $Fall
## [1] 98
## 
## $Winter
## [1] 112</code></pre>
<p>Or, we can assign each component corresponding value or vector individually.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="data-structures.html#cb589-1" tabindex="-1"></a>sale.tag <span class="ot">&lt;-</span> <span class="fu">list</span>()          <span class="co"># Start with an empty list</span></span>
<span id="cb589-2"><a href="data-structures.html#cb589-2" tabindex="-1"></a><span class="co"># Assign values to specific seasons</span></span>
<span id="cb589-3"><a href="data-structures.html#cb589-3" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Spring&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb589-4"><a href="data-structures.html#cb589-4" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Summer&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">105</span></span>
<span id="cb589-5"><a href="data-structures.html#cb589-5" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Fall&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">98</span></span>
<span id="cb589-6"><a href="data-structures.html#cb589-6" tabindex="-1"></a>sale.tag[[<span class="st">&quot;Winter&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">112</span></span>
<span id="cb589-7"><a href="data-structures.html#cb589-7" tabindex="-1"></a>sale.tag</span></code></pre></div>
<pre><code>## $Spring
## [1] 100
## 
## $Summer
## [1] 105
## 
## $Fall
## [1] 98
## 
## $Winter
## [1] 112</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-294}</p>
</blockquote>
<blockquote>
<p>For data set sale.tag, choose all correct answers from the following options A - F to answer the questions a, b, c:<br />
A: sale.tag[[1]]<br />
B: sale.tag[[Spring]]<br />
C: sale.tag[[“Spring”]]<br />
D: sale.tag[“Spring”]<br />
E: sale.tag[1]<br />
F: sale.tag[Spring]</p>
<ol style="list-style-type: lower-alpha">
<li>Which options return a vector. Answer:___________<br />
</li>
<li>Which options return a list. Answer:___________<br />
</li>
<li>Which options return an error. Answer:___________<br />
:::</li>
</ol>
</blockquote>
<ul>
<li>List calculation:</li>
</ul>
<p>Basic statistical functions work on vectors won’t do the same job on lists:</p>
<blockquote>
<p>mean(sale.tag)<br />
[1] NA<br />
Warning message:<br />
In mean.default(sale.tag) :<br />
argument is not numeric or logical: returning NA</p>
</blockquote>
<p>Before calculation, you need to use function <em>unlist()</em> to flatten the list into a vector:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="data-structures.html#cb591-1" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">unlist</span>(sale.tag))</span></code></pre></div>
<pre><code>## [1] 103.75</code></pre>
<p>Similar to <em>apply()</em> function for vectors, <em>lapply()</em> (for list apply) works on each component of a list:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="data-structures.html#cb593-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>), <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb593-2"><a href="data-structures.html#cb593-2" tabindex="-1"></a>mean.x <span class="ot">&lt;-</span> <span class="fu">lapply</span>(x, mean)</span>
<span id="cb593-3"><a href="data-structures.html#cb593-3" tabindex="-1"></a>mean.x</span></code></pre></div>
<pre><code>## [[1]]
## [1] 20
## 
## [[2]]
## [1] 6</code></pre>
<p>The <em>mean.x</em> returns a list consisting of 20 and 6, which are means of components of x respectively.</p>
<p>Let’s redo the previous example by using function <em>sapply()</em> for a simpler output as vector or matrix.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="data-structures.html#cb595-1" tabindex="-1"></a>mean.x<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">sapply</span>(x, mean)</span>
<span id="cb595-2"><a href="data-structures.html#cb595-2" tabindex="-1"></a>mean.x<span class="fl">.2</span></span></code></pre></div>
<pre><code>## [1] 20  6</code></pre>
<p>Check the output type by <em>class()</em> or <em>is.vector()</em> function:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="data-structures.html#cb597-1" tabindex="-1"></a><span class="fu">class</span>(mean.x)               </span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="data-structures.html#cb599-1" tabindex="-1"></a><span class="fu">class</span>(mean.x<span class="fl">.2</span>)             </span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="data-structures.html#cb601-1" tabindex="-1"></a><span class="fu">is.vector</span>(mean.x<span class="fl">.2</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Here is another example for <em>sapply()</em> function to filter out NULL elements. First apply <em>is.null</em> function to every element in the list, which will produce a vector with logical values. Then delete the element by setting NULL to it if the logical value comes as <em>TRUE</em> for the element.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="data-structures.html#cb603-1" tabindex="-1"></a>list.null <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;art&#39;</span>, <span class="cn">NULL</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>))</span>
<span id="cb603-2"><a href="data-structures.html#cb603-2" tabindex="-1"></a>list.null</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;art&quot;
## 
## [[2]]
## NULL
## 
## [[3]]
## [1] 2 4 6 8</code></pre>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="data-structures.html#cb605-1" tabindex="-1"></a>list.null[<span class="fu">sapply</span>(list.null, is.null)] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb605-2"><a href="data-structures.html#cb605-2" tabindex="-1"></a>list.null</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;art&quot;
## 
## [[2]]
## [1] 2 4 6 8</code></pre>
<p>For large datasets, <strong>sapply()</strong> is efficient to remove NULL elements.
But for a smaller size dataset, it’s much easier to directly setting NULL to the NULL element in a known position. For example, we set a NULL to the second element of list.null:</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="data-structures.html#cb607-1" tabindex="-1"></a>list.null <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&#39;art&#39;</span>, <span class="cn">NULL</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>))</span>
<span id="cb607-2"><a href="data-structures.html#cb607-2" tabindex="-1"></a>list.null[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span>  <span class="co"># Remove NULL elements</span></span>
<span id="cb607-3"><a href="data-structures.html#cb607-3" tabindex="-1"></a>list.null</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;art&quot;
## 
## [[2]]
## [1] 2 4 6 8</code></pre>
</div>
<div id="example-using-list" class="section level4 hasAnchor" number="3.2.5.3">
<h4><span class="header-section-number">3.2.5.3</span> Example using list<a href="data-structures.html#example-using-list" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Lists in R are incredibly versatile, allowing you to efficiently manage and manipulate complex sets of data.</p>
<p>Suppose we have a list of customers who visited a store in the last 10 days. Some customers visited it more than once. The customer names are recorded by the order of the day they came:</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="data-structures.html#cb609-1" tabindex="-1"></a>customer <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Brandon&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Daniel&quot;</span>, <span class="st">&quot;Grace&quot;</span>, <span class="st">&quot;Mary&quot;</span>, </span>
<span id="cb609-2"><a href="data-structures.html#cb609-2" tabindex="-1"></a>                 <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Grace&quot;</span>)</span></code></pre></div>
<p>To find out the days and the total number of days that each customer visited the store, here is a function which returns all locations of the same elements in a list.</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="data-structures.html#cb610-1" tabindex="-1"></a>loc.names <span class="ot">&lt;-</span> <span class="cf">function</span>(f){</span>
<span id="cb610-2"><a href="data-structures.html#cb610-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">unlist</span>(f)                      <span class="co"># Flatten a list x into a vector y</span></span>
<span id="cb610-3"><a href="data-structures.html#cb610-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>()                         <span class="co"># Create an empty list</span></span>
<span id="cb610-4"><a href="data-structures.html#cb610-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(y)){        </span>
<span id="cb610-5"><a href="data-structures.html#cb610-5" tabindex="-1"></a>  c.name <span class="ot">&lt;-</span> y[i]                    <span class="co"># Assign the ith element to c.name. </span></span>
<span id="cb610-6"><a href="data-structures.html#cb610-6" tabindex="-1"></a>  x[[c.name]] <span class="ot">&lt;-</span> <span class="fu">c</span>(x[[c.name]], i)  <span class="co"># Assign values to x[[c.name]]. c.name is the name of x.</span></span>
<span id="cb610-7"><a href="data-structures.html#cb610-7" tabindex="-1"></a>}</span>
<span id="cb610-8"><a href="data-structures.html#cb610-8" tabindex="-1"></a><span class="fu">return</span>(x)</span>
<span id="cb610-9"><a href="data-structures.html#cb610-9" tabindex="-1"></a>}</span></code></pre></div>
<p>When you apply the function, the <em>f</em> will be replaced by your own list, like <strong>customer</strong>.<br />
x &lt;- list () creates an empty list.<br />
In the <em>for</em> loop, i starts from 1 to the length of vector y. In the customer example, the length of y is 10.<br />
<em>c.name &lt;- y[i]</em> assigns the i-th element in y to a new variable <em>c.name</em>. For example, if i = 1, y[1] is the “Alex”, then <em>c.name = “Alex”</em>.</p>
<p><em>x[[c.name]] &lt;- c(x[[c.name]], i)</em> :</p>
<p>For i = 1, you have <em>c.name &lt;- “Alex”</em>, then <em>x[[c.name]] = x[[“Alex”]] = NULL</em> since x starting from an empty list. Therefore c(x[[“Alex”]], i) = c(NULL, i) = i = 1. The value 1 will be assigned to x[[“Alex”]] by the code: <em>x[[“Alex”]] &lt;- c(x[[“Alex”]], i) = 1</em>. Now x is not an empty list, it is a list with 1 component:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="data-structures.html#cb611-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb611-2"><a href="data-structures.html#cb611-2" tabindex="-1"></a>x[[<span class="st">&quot;Alex&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb611-3"><a href="data-structures.html#cb611-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## $Alex
## [1] 1</code></pre>
<p>For i = 2, y[2] &lt;- “Brandon”, then similar to the case of i = 1, you have <em>x[[“Brandon”]] &lt;- 1</em>:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="data-structures.html#cb613-1" tabindex="-1"></a>x[[<span class="st">&quot;Brandon&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb613-2"><a href="data-structures.html#cb613-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## $Alex
## [1] 1
## 
## $Brandon
## [1] 1</code></pre>
<p>For i = 3, <em>y[3] &lt;- “Alex”</em>. You have met “Alex” once, which returned <em>x[[“Alex”]] &lt;- 1</em>. Now you meet “Alex” again, which means you are going to update <em>x[[“Alex”]]</em> by <em>x[[“Alex”]] &lt;- c(x[[“Alex”]], i) = c(1, i) = c(1, 3)</em>. The updated x is:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="data-structures.html#cb615-1" tabindex="-1"></a>x[[<span class="st">&quot;Alex&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb615-2"><a href="data-structures.html#cb615-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## $Alex
## [1] 1 3
## 
## $Brandon
## [1] 1</code></pre>
<p>The process will stop till i = length (y) = 10. The <em>loc.names()</em> function will return all locations of all names which are already stored in x.</p>
<p>Now let’s apply the function to the customer list.</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="data-structures.html#cb617-1" tabindex="-1"></a>customer <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Brandon&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Daniel&quot;</span>, <span class="st">&quot;Grace&quot;</span>, <span class="st">&quot;Mary&quot;</span>, </span>
<span id="cb617-2"><a href="data-structures.html#cb617-2" tabindex="-1"></a>                 <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;Tom&quot;</span>, <span class="st">&quot;Grace&quot;</span>)</span>
<span id="cb617-3"><a href="data-structures.html#cb617-3" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">loc.names</span>(customer)</span>
<span id="cb617-4"><a href="data-structures.html#cb617-4" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## $Alex
## [1] 1 3 8
## 
## $Brandon
## [1] 2
## 
## $Daniel
## [1] 4
## 
## $Grace
## [1]  5 10
## 
## $Mary
## [1] 6 7
## 
## $Tom
## [1] 9</code></pre>
<p>The output reveals the days each customer visited the store: Alex visited store at the first, third and eighth days, Brandon came on the second day, etc.</p>
<p>Next, use <em>sapply()</em> function to calculate the total number of visits per customer.</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="data-structures.html#cb619-1" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(v1,length)     <span class="co"># calculate the repeat times of each element in v1</span></span>
<span id="cb619-2"><a href="data-structures.html#cb619-2" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>##    Alex Brandon  Daniel   Grace    Mary     Tom 
##       3       1       1       2       2       1</code></pre>
<p>Then, sort the visit frequency in decreasing order:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="data-structures.html#cb621-1" tabindex="-1"></a><span class="fu">sort</span>(v2, <span class="at">decreasing =</span> T)</span></code></pre></div>
<pre><code>##    Alex   Grace    Mary Brandon  Daniel     Tom 
##       3       2       2       1       1       1</code></pre>
<blockquote>
<p>::: {.exercise #unnamed-chunk-309}</p>
</blockquote>
<blockquote>
<p>Fill in the blanks in the function <em>my.fun()</em> and apply it to a list of genders. The function should return all element locations and sort the frequencies in increasing order.
The geneder set includes:
F F M M M M I I F I F M I F M I I M I I F<br />
Where F, M, and I represent Female, Male, and Infant, respectively.</p>
</blockquote>
<blockquote>
<p>my.fun &lt;- function(f){
y &lt;- unlist(f)<br />
x &lt;- ___________<br />
for (i in 1:____){<br />
g1 &lt;- y[i]<br />
x[[______]] &lt;- c(x[[____]],i)<br />
}
freq &lt;- _________(x, length)<br />
z &lt;- sort(________, decreasing = ____)<br />
lst &lt;- list(x, z)<br />
___________(lst)<br />
}<br />
gender &lt;- list( “F”, ________________________________, “F”)<br />
__________(gender)<br />
:::</p>
</blockquote>
<p>Many R functions, such as <em>t.test()</em>, return results as <strong>list</strong>s, which contain a series of components, such as p-values, vectors of residuals or coefficients, and even matrices. A list combines everything into one big object that is easy to break down and understand.</p>
<p>To compare two sets of random numbers:</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="data-structures.html#cb623-1" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)  <span class="co"># Create 100 random numbers following Normal Distribution</span></span>
<span id="cb623-2"><a href="data-structures.html#cb623-2" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb623-3"><a href="data-structures.html#cb623-3" tabindex="-1"></a>t.result <span class="ot">&lt;-</span> <span class="fu">t.test</span>(r1, r2) <span class="co"># Run the t test. Test if the mean of r1 and r2 are same.</span></span>
<span id="cb623-4"><a href="data-structures.html#cb623-4" tabindex="-1"></a><span class="fu">is.list</span>(t.result) <span class="co"># Check if the t.result is a list</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="data-structures.html#cb625-1" tabindex="-1"></a>t.result  <span class="co"># A list holds all components of t-test</span></span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  r1 and r2
## t = 0.57704, df = 197.85, p-value = 0.5646
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.2145801  0.3921035
## sample estimates:
##   mean of x   mean of y 
##  0.03685420 -0.05190749</code></pre>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="data-structures.html#cb627-1" tabindex="-1"></a><span class="fu">names</span>(t.result) <span class="co"># Return all tags of the t test result</span></span></code></pre></div>
<pre><code>##  [1] &quot;statistic&quot;   &quot;parameter&quot;   &quot;p.value&quot;     &quot;conf.int&quot;    &quot;estimate&quot;   
##  [6] &quot;null.value&quot;  &quot;stderr&quot;      &quot;alternative&quot; &quot;method&quot;      &quot;data.name&quot;</code></pre>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="data-structures.html#cb629-1" tabindex="-1"></a>t.result<span class="sc">$</span>p.value  <span class="co"># Retrieve  p-value for the test</span></span></code></pre></div>
<pre><code>## [1] 0.5645683</code></pre>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="data-structures.html#cb631-1" tabindex="-1"></a>t.result<span class="sc">$</span>estimate  <span class="co"># Return mean of r1 and r2</span></span></code></pre></div>
<pre><code>##   mean of x   mean of y 
##  0.03685420 -0.05190749</code></pre>
<p>The t-test result is efficiently stored in a list, providing structured access to various test outcomes like p-values and estimates. Run the ‘?t.test’ to access the help page for more information about types of returned values and their names.</p>
<p>Finally, let’s run a simulation with lists, using a loop. We will generate two sets of 100 random numbers from the standard normal distribution with zero mean and unit standard deviation, then perform t-test and get the p-value. By repeating this process 500 times, observe the distribution of p-values and count significant results with p &lt; 0.05.</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="data-structures.html#cb633-1" tabindex="-1"></a>pvalues <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">500</span>)  <span class="co"># Define a vector containing 500 numbers, all equal to 1.</span></span>
<span id="cb633-2"><a href="data-structures.html#cb633-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>) {  <span class="co"># Loop: The values of i takes values from 1,2,3, …, 500</span></span>
<span id="cb633-3"><a href="data-structures.html#cb633-3" tabindex="-1"></a>     result <span class="ot">=</span> <span class="fu">t.test</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>), <span class="fu">rnorm</span>(<span class="dv">100</span>))    </span>
<span id="cb633-4"><a href="data-structures.html#cb633-4" tabindex="-1"></a>     pvalues[i] <span class="ot">=</span> result<span class="sc">$</span>p.value  <span class="co"># p-values are stored in the i-th element in the vector</span></span>
<span id="cb633-5"><a href="data-structures.html#cb633-5" tabindex="-1"></a>}  </span>
<span id="cb633-6"><a href="data-structures.html#cb633-6" tabindex="-1"></a><span class="fu">hist</span>(pvalues)  <span class="co"># Histogram of p-values</span></span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-311-1.png" width="672" /></p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="data-structures.html#cb634-1" tabindex="-1"></a><span class="fu">summary</span>(pvalues)   </span></code></pre></div>
<pre><code>##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 0.001597 0.211807 0.442491 0.467228 0.737778 0.993367</code></pre>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="data-structures.html#cb636-1" tabindex="-1"></a><span class="fu">sum</span>(pvalues <span class="sc">&lt;</span> <span class="fl">0.05</span>)  <span class="co"># Total number of p-value&#39;s which are less than 0.05. </span></span></code></pre></div>
<pre><code>## [1] 29</code></pre>
<p>This simulation demonstrates how lists can be effectively used to store and analyze results from repetitive statistical tests.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizing-the-iris-flower-data-set.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importing-data-and-managing-files.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
